{"expireTime":9007200911206589000,"key":"transformer-remark-markdown-html-e291bb234cd7135e53d2d7f754316cfc-gatsby-remark-prismjs-","val":"<h1>How to use the Node.js REPL</h1>\n<p>description: \"REPL stands for Read-Evaluate-Print-Loop, and it's a great way to explore the Node.js features in a quick way\"</p>\n<hr>\n<p>The <code class=\"language-text\">node</code> command is the one we use to run our Node.js scripts:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> script.js</code></pre></div>\n<p>If we omit the filename, we use it in REPL mode:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span></code></pre></div>\n<blockquote>\n<p>Note: REPL also known as Read Evaluate Print Loop is a programming language environment (basically a console window) that takes single expression as user input and returns the result back to the console after execution.</p>\n</blockquote>\n<p>If you try it now in your terminal, this is what happens:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">node</span>\n\n<span class=\"token operator\">></span></code></pre></div>\n<p>the command stays in idle mode and waits for us to enter something.</p>\n<blockquote>\n<p>Tip: if you are unsure how to open your terminal, google \"How to open terminal on &#x3C;your-operating-system>\".</p>\n</blockquote>\n<p>The REPL is waiting for us to enter some JavaScript code, to be more precise.</p>\n<p>Start simple and enter</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> console.log<span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token builtin class-name\">test</span>\n\nundefined\n\n<span class=\"token operator\">></span></code></pre></div>\n<p>The first value, <code class=\"language-text\">test</code>, is the output we told the console to print, then we get <code class=\"language-text\">undefined</code> which is the return value of running <code class=\"language-text\">console.log()</code>.</p>\n<p>We can now enter a new line of JavaScript.</p>\n<h2>Use the tab to autocomplete</h2>\n<p>The cool thing about the REPL is that it's interactive.</p>\n<p>As you write your code, if you press the <code class=\"language-text\">tab</code> key the REPL will try to autocomplete what you wrote to match a variable you already defined or a predefined one.</p>\n<h2>Exploring JavaScript objects</h2>\n<p>Try entering the name of a JavaScript class, like <code class=\"language-text\">Number</code>, add a dot and press <code class=\"language-text\">tab</code>.</p>\n<p>The REPL will print all the properties and methods you can access on that class:</p>\n<p><img src=\"images/tab.png\" alt=\"Pressing tab reveals object properties\"></p>\n<h2>Explore global objects</h2>\n<p>You can inspect the globals you have access to by typing <code class=\"language-text\">global.</code> and pressing <code class=\"language-text\">tab</code>:</p>\n<p><img src=\"images/globals.png\" alt=\"Globals\"></p>\n<h2>The _ special variable</h2>\n<p>If after some code you type <code class=\"language-text\">_</code>, that is going to print the result of the last operation.</p>\n<h2>Dot commands</h2>\n<p>The REPL has some special commands, all starting with a dot <code class=\"language-text\">.</code>. They are</p>\n<ul>\n<li><code class=\"language-text\">.help</code>: shows the dot commands help</li>\n<li>-</li>\n<li><code class=\"language-text\">.editor</code>: enables editor mode, to write multiline JavaScript code with ease. Once you are in this mode, enter ctrl-D to run the c</li>\n<li>-</li>\n<li><code class=\"language-text\">.break</code>: when inputting a multi-line expression, entering the .break command</li>\n<li>-</li>\n<li><code class=\"language-text\">.clear</code>: resets the REPL context to an empty object and clears any multi-line expression currently being input.</li>\n<li><code class=\"language-text\">.load</code>: loads a JavaScript file, relative to the current working directory</li>\n<li><code class=\"language-text\">.save</code>: saves all you entered in the REPL session to a file (specify the filename)</li>\n<li><code class=\"language-text\">.exit</code>: exits the repl (same as pressing ctrl-C two times)</li>\n</ul>\n<p>The REPL knows when you are typing a multi-line statement without the need to invoke <code class=\"language-text\">.editor</code>.</p>\n<p>For example if you start typing an iteration like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></code></pre></div>\n<p>and you press <code class=\"language-text\">enter</code>, the REPL will go to a new line that starts with 3 dots, indicating you can now continue to work on that block.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token operator\">...</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>If you type <code class=\"language-text\">.break</code> at the end of a line, the multiline mode will stop and the statement will not be executed.</p>\n<h1>Node.js, accept arguments from the command line</h1>\n<p>description: 'How to accept arguments in a Node.js program passed from the command line'</p>\n<p>You can pass any number of arguments when invoking a Node.js application using</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js</code></pre></div>\n<p>Arguments can be standalone or have a key and a value.</p>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js joe</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>joe</code></pre></div>\n<p>This changes how you will retrieve this value in the Node.js code.</p>\n<p>The way you retrieve it is using the <code class=\"language-text\">process</code> object built into Node.js.</p>\n<p>It exposes an <code class=\"language-text\">argv</code> property, which is an array that contains all the command line invocation arguments.</p>\n<p>The first element is the full path of the <code class=\"language-text\">node</code> command.</p>\n<p>The second element is the full path of the file being executed.</p>\n<p>All the additional arguments are present from the third position going forward.</p>\n<p>You can iterate over all the arguments (including the node path and the file path) using a loop:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>val<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can get only the additional arguments by creating a new array that excludes the first 2 params:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you have one argument without an index name, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js joe</code></pre></div>\n<p>you can access it using</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nargs<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this case:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>joe</code></pre></div>\n<p><code class=\"language-text\">args[0]</code> is <code class=\"language-text\">name=joe</code>, and you need to</p>\n<p>parse it. The best way to do so is by using the <a href=\"https://www.npmjs.com/package/minimist\"><code class=\"language-text\">minimist</code></a> library, which helps dealing with arguments:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> args <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'minimist'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nargs<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//joe</span></code></pre></div>\n<p>Install the required <code class=\"language-text\">minimist</code> package using <code class=\"language-text\">npm</code> (lesson about the package manager comes <a href=\"https://nodejs.dev/learn/an-introduction-to-the-npm-package-manager\">later on</a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> minimist</code></pre></div>\n<p>This time you need to use double dashes before each argument name:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js --name<span class=\"token operator\">=</span>joe</code></pre></div>\n<h1>Output to the command line using Node.js</h1>\n<p>description: 'How to print to the command line console using Node.js, from the basic console.log to more complex scenarios'</p>\n<h2>Basic output using the console module</h2>\n<p>Node.js provides a <a href=\"https://nodejs.org/api/console.html\"><code class=\"language-text\">console</code> module</a> which provides tons of very useful ways to interact with the command line.</p>\n<p>It is basically the same as the <code class=\"language-text\">console</code> object you find in the browser.</p>\n<p>The most basic and most used method is <code class=\"language-text\">console.log()</code>, which prints the string you pass to it to the console.</p>\n<p>If you pass an object, it will render it as a string.</p>\n<p>You can pass multiple variables to <code class=\"language-text\">console.log</code>, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token string\">'x'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>and Node.js will print both.</p>\n<p>We can also format pretty phrases by passing variables and a format specifier.</p>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'My %s has %d years'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">%s</code> format a variable as a string</li>\n<li>-</li>\n<li><code class=\"language-text\">%d</code> format a variable as a number</li>\n<li>-</li>\n<li><code class=\"language-text\">%i</code> format a variable as its integer part only</li>\n<li><code class=\"language-text\">%o</code> format a variable as an object</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'%o'</span><span class=\"token punctuation\">,</span> Number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Clear the console</h2>\n<p><code class=\"language-text\">console.clear()</code> clears the console (the behavior might depend on the console used)</p>\n<h2>Counting elements</h2>\n<p><code class=\"language-text\">console.count()</code> is a handy method.</p>\n<p>Take this code:</p>\n<iframe title=\"Output to the command line using Node.js\" src=\"https://stackblitz.com/edit/nodejs-dev-0002-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0002-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<!--\n\n```js\n//\n\nconst x = 1\n\nconst y = 2\n\nconst z = 3\n\nconsole.count(\n\n  'The value of x is ' + x + ' and has been checked .. how many times?'\n\n)\n\nconsole.count(\n\n  'The value of x is ' + x + ' and has been checked .. how many times?'\n\n)\n\nconsole.count(\n\n  'The value of y is ' + y + ' and has been checked .. how many times?'\n\n)\n\n```\n\n-->\n<p>What happens is that <code class=\"language-text\">console.count()</code> will count the number of times a string is printed, and print the count next to it:</p>\n<p>You can just count apples and oranges:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> oranges <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> apples <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'just one apple'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\noranges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fruit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napples<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fruit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Reset counting</h2>\n<p>The console.countReset() method resets counter used with console.count().</p>\n<p>We will use the apples and orange example to demonstrate this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> oranges <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'orange'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> apples <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'just one apple'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\noranges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fruit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napples<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fruit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">countReset</span><span class=\"token punctuation\">(</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\noranges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fruit</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Notice how the call to <code class=\"language-text\">console.countReset('orange')</code> resets the value counter to zero.</p>\n<h2>Print the stack trace</h2>\n<p>There might be cases where it's useful to print the call stack trace of a function, maybe to answer the question <em>how did you reach that part of the code?</em></p>\n<p>You can do so using <code class=\"language-text\">console.trace()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">function2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">trace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">function1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">function2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">function1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This will print the stack trace. This is what's printed if we try this in the Node.js REPL:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Trace\n\n    at function2 <span class=\"token punctuation\">(</span>repl:1:33<span class=\"token punctuation\">)</span>\n\n    at function1 <span class=\"token punctuation\">(</span>repl:1:25<span class=\"token punctuation\">)</span>\n\n    at repl:1:1\n\n    at ContextifyScript.Script.runInThisContext <span class=\"token punctuation\">(</span>vm.js:44:33<span class=\"token punctuation\">)</span>\n\n    at REPLServer.defaultEval <span class=\"token punctuation\">(</span>repl.js:239:29<span class=\"token punctuation\">)</span>\n\n    at bound <span class=\"token punctuation\">(</span>domain.js:301:14<span class=\"token punctuation\">)</span>\n\n    at REPLServer.runBound <span class=\"token punctuation\">[</span>as eval<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span>domain.js:314:12<span class=\"token punctuation\">)</span>\n\n    at REPLServer.onLine <span class=\"token punctuation\">(</span>repl.js:440:10<span class=\"token punctuation\">)</span>\n\n    at emitOne <span class=\"token punctuation\">(</span>events.js:120:20<span class=\"token punctuation\">)</span>\n\n    at REPLServer.emit <span class=\"token punctuation\">(</span>events.js:210:7<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Calculate the time spent</h2>\n<p>You can easily calculate how much time a function takes to run, using <code class=\"language-text\">time()</code> and <code class=\"language-text\">timeEnd()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">measureDoingSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token string\">'doSomething()'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//do something, and measure the time it takes</span>\n\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">timeEnd</span><span class=\"token punctuation\">(</span><span class=\"token string\">'doSomething()'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">measureDoingSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>stdout and stderr</h2>\n<p>As we saw console.log is great for printing messages in the Console. This is what's called the standard output, or <code class=\"language-text\">stdout</code>.</p>\n<p><code class=\"language-text\">console.error</code> prints to the <code class=\"language-text\">stderr</code> stream.</p>\n<p>It will not appear in the console, but it will appear in the error log.</p>\n<h2>Color the output</h2>\n<p>You can color the output of your text in the console by using <a href=\"https://gist.github.com/iamnewton/8754917\">escape sequences</a>. An escape sequence is a set of characters that identifies a color.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\x1b[33m%s\\x1b[0m'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can try that in the Node.js REPL, and it will print <code class=\"language-text\">hi!</code> in yellow.</p>\n<p>However, this is the low-level way to do this. The simplest way to go about coloring the console output is by using a library. <a href=\"https://github.com/chalk/chalk\">Chalk</a> is such a library, and in addition to coloring it also helps with other styling facilities, like making text bold, italic or underlined.</p>\n<p>You install it with <code class=\"language-text\">npm install chalk</code>, then you can use it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> chalk <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chalk'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chalk<span class=\"token punctuation\">.</span><span class=\"token function\">yellow</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Using <code class=\"language-text\">chalk.yellow</code> is much more convenient than trying to remember the escape codes, and the code is much more readable.</p>\n<p>Check the project link posted above for more usage examples.</p>\n<h2>Create a progress bar</h2>\n<p><a href=\"https://www.npmjs.com/package/progress\">Progress</a> is an awesome package to create a progress bar in the console. Install it using <code class=\"language-text\">npm install progress</code></p>\n<p>This snippet creates a 10-step progress bar, and every 100ms one step is completed. When the bar completes we clear the interval:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> ProgressBar <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProgressBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">':bar'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    bar<span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">.</span>complete<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Accept input from the command line in Node.js</h1>\n<p>description: 'How to make a Node.js CLI program interactive using the built-in readline Node.js module'</p>\n<p>How to make a Node.js CLI program interactive?</p>\n<p>Node.js since version 7 provides the <a href=\"https://nodejs.org/api/readline.html\"><code class=\"language-text\">readline</code> module</a> to perform exactly this: get input from a readable stream such as the <code class=\"language-text\">process.stdin</code> stream, which during the execution of a Node.js program is the terminal input, one line at a time.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> readline <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readline'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">createInterface</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>stdout\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadline<span class=\"token punctuation\">.</span><span class=\"token function\">question</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">What's your name?</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hi </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    readline<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This piece of code asks the username, and once the text is entered and the user presses enter, we send a greeting.</p>\n<p>The <code class=\"language-text\">question()</code> method shows the first parameter (a question) and waits for the user input. It calls the callback function once enter is pressed.</p>\n<p>In this callback function, we close the readline interface.</p>\n<p><code class=\"language-text\">readline</code> offers several other methods, and I'll let you check them out on the package documentation linked above.</p>\n<p>If you need to require a password, it's best not to echo it back, but instead show a <code class=\"language-text\">*</code> symbol.</p>\n<p>The simplest way is to use the <a href=\"https://www.npmjs.com/package/readline-sync\"><code class=\"language-text\">readline-sync</code> package</a> which is very similar in terms of the API and handles this out of the box.</p>\n<p>A more complete and abstract solution is provided by the <a href=\"https://github.com/SBoudrias/Inquirer.js\">Inquirer.js package</a>.</p>\n<p>You can install it using <code class=\"language-text\">npm install inquirer</code>, and then you can replicate the above code like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> inquirer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inquirer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> questions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">\"What's your name?\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\ninquirer<span class=\"token punctuation\">.</span><span class=\"token function\">prompt</span><span class=\"token punctuation\">(</span>questions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">answers</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hi </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>answers<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Inquirer.js lets you do many things like asking multiple choices, having radio buttons, confirmations, and more.</p>\n<p>It's worth knowing all the alternatives, especially the built-in ones provided by Node.js, but if you plan to take CLI input to the next level, Inquirer.js is an optimal choice.</p>\n<h1>Expose functionality from a Node.js file using exports</h1>\n<p>description: 'How to use the module.exports API to expose data to other files in your application, or to other applications as well'</p>\n<p>Node.js has a built-in module system.</p>\n<p>A Node.js file can import functionality exposed by other Node.js files.</p>\n<p>When you want to import something you use</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> library <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./library'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>to import the functionality exposed in the <code class=\"language-text\">library.js</code> file that resides in the current file folder.</p>\n<p>In this file, functionality must be exposed before it can be imported by other files.</p>\n<p>Any other object or variable defined in the file by default is private and not exposed to the outer world.</p>\n<p>This is what the <code class=\"language-text\">module.exports</code> API offered by the <a href=\"https://nodejs.org/api/modules.html\"><code class=\"language-text\">module</code> system</a> allows us to do.</p>\n<p>When you assign an object or a function as a new <code class=\"language-text\">exports</code> property, that is the thing that's being exposed, and as such, it can be imported in other parts of your app, or in other apps as well.</p>\n<p>You can do so in 2 ways.</p>\n<p>The first is to assign an object to <code class=\"language-text\">module.exports</code>, which is an object provided out of the box by the module system, and this will make your file export <em>just that object</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// car.js</span>\n\n<span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">brand</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ford'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'Fiesta'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> car<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./car'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The second way is to add the exported object as a property of <code class=\"language-text\">exports</code>. This way allows you to export multiple objects, functions or data:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">brand</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ford'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'Fiesta'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>car <span class=\"token operator\">=</span> car<span class=\"token punctuation\">;</span></code></pre></div>\n<p>or directly</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nexports<span class=\"token punctuation\">.</span>car <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">brand</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ford'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'Fiesta'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And in the other file, you'll use it by referencing a property of your import:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./items'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>car<span class=\"token punctuation\">;</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> car <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./items'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>car<span class=\"token punctuation\">;</span></code></pre></div>\n<p>What's the difference between <code class=\"language-text\">module.exports</code> and <code class=\"language-text\">exports</code>?</p>\n<p>The first exposes the object it points to.</p>\n<p>The latter exposes <em>the properties</em> of the object it points to.</p>\n<h1>An introduction to the npm package manager</h1>\n<p>description: 'A quick guide to npm, the powerful package manager key to the success of Node.js. In January 2017 over 350000 packages were reported being listed in the npm registry, making it the biggest single language code repository on Earth, and you can be sure there is a package for (almost!) everything.'</p>\n<h2>Introduction to npm</h2>\n<p><code class=\"language-text\">npm</code> is the standard package manager for Node.js.</p>\n<p>In January 2017 over 350000 packages were reported being listed in the npm registry, making it the biggest single language code repository on Earth, and you can be sure there is a package for (almost!) everything.</p>\n<p>It started as a way to download and manage dependencies of Node.js packages, but it has since become a tool used also in frontend JavaScript.</p>\n<p>There are many things that <code class=\"language-text\">npm</code> does.</p>\n<blockquote>\n<p><a href=\"https://yarnpkg.com/en/\"><strong>Yarn</strong></a> and <a href=\"https://pnpm.js.org/\"><strong>pnpm</strong></a> are alternatives to npm cli. You can check them out as well.</p>\n</blockquote>\n<h2>Downloads</h2>\n<p><code class=\"language-text\">npm</code> manages downloads of dependencies of your project.</p>\n<h3>Installing all dependencies</h3>\n<p>If a project has a <code class=\"language-text\">package.json</code> file, by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<p>it will install everything the project needs, in the <code class=\"language-text\">node_modules</code> folder, creating it if it's not existing already.</p>\n<h3>Installing a single package</h3>\n<p>You can also install a specific package by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package-name<span class=\"token operator\">></span></code></pre></div>\n<p>Furthermore, since npm 5, this command adds <code class=\"language-text\">&lt;package-name></code> to the <code class=\"language-text\">package.json</code> file <em>dependencies</em>. Before version 5, you needed to add the flag <code class=\"language-text\">--save</code>.</p>\n<p>Often you'll see more flags added to this command:</p>\n<ul>\n<li><code class=\"language-text\">--save-dev</code> installs and adds the entry to the <code class=\"language-text\">package.json</code> file <em>devDependencies</em></li>\n<li>-</li>\n<li><code class=\"language-text\">--no-save</code> installs but does not add the entry to the <code class=\"language-text\">package.json</code> file <em>dependencies</em></li>\n<li>-</li>\n<li><code class=\"language-text\">--save-optional</code> installs and adds the entry to the <code class=\"language-text\">package.json</code> file <em>optionalDependencies</em></li>\n<li><code class=\"language-text\">--no-optional</code> will prevent optional dependencies from being installed</li>\n</ul>\n<p>Shorthands of the flags can also be used:</p>\n<ul>\n<li>-S: --save</li>\n<li>-</li>\n<li>-D: --save-dev</li>\n<li>-O: --save-optional</li>\n</ul>\n<p>The difference between <em>devDependencies</em> and <em>dependencies</em> is that the former contains development tools, like a testing library, while the latter is bundled with the app in production.</p>\n<p>As for the <em>optionalDependencies</em> the difference is that build failure of the dependency will not cause installation to fail. But it is your program's responsibility to handle the lack of the dependency. Read more about <a href=\"https://docs.npmjs.com/cli/v7/configuring-npm/package-json#optionaldependencies\">optional dependencies</a>.</p>\n<h3>Updating packages</h3>\n<p>Updating is also made easy, by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> update</code></pre></div>\n<p><code class=\"language-text\">npm</code> will check all packages for a newer version that satisfies your versioning constraints.</p>\n<p>You can specify a single package to update as well:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> update <span class=\"token operator\">&lt;</span>package-name<span class=\"token operator\">></span></code></pre></div>\n<h2>Versioning</h2>\n<p>In addition to plain downloads, <code class=\"language-text\">npm</code> also manages <strong>versioning</strong>, so you can specify any specific version of a package, or require a version higher or lower than what you need.</p>\n<p>Many times you'll find that a library is only compatible with a major release of another library.</p>\n<p>Or a bug in the latest release of a lib, still unfixed, is causing an issue.</p>\n<p>Specifying an explicit version of a library also helps to keep everyone on the same exact version of a package, so that the whole team runs the same version until the <code class=\"language-text\">package.json</code> file is updated.</p>\n<p>In all those cases, versioning helps a lot, and <code class=\"language-text\">npm</code> follows the semantic versioning (semver) standard.</p>\n<h2>Running Tasks</h2>\n<p>The package.json file supports a format for specifying command line tasks that can be run by using</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run <span class=\"token operator\">&lt;</span>task-name<span class=\"token operator\">></span></code></pre></div>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"start-dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node lib/server-development\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node lib/server-production\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It's very common to use this feature to run Webpack:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --watch --progress --colors --config webpack.conf.js\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --progress --colors --config webpack.conf.js\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NODE_ENV=production webpack -p --config webpack.conf.js\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So instead of typing those long commands, which are easy to forget or mistype, you can run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> run <span class=\"token function\">watch</span>\n\n$ <span class=\"token function\">npm</span> run dev\n\n$ <span class=\"token function\">npm</span> run prod</code></pre></div>\n<h1>Where does npm install the packages?</h1>\n<p>description: 'How to find out where npm installs the packages'</p>\n<p>When you install a package using <code class=\"language-text\">npm</code> you can perform 2 types of installation:</p>\n<ul>\n<li>a local install</li>\n<li>-</li>\n<li>a global install</li>\n</ul>\n<p>By default, when you type an <code class=\"language-text\">npm install</code> command, like:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> lodash</code></pre></div>\n<p>the package is installed in the current file tree, under the <code class=\"language-text\">node_modules</code> subfolder.</p>\n<p>As this happens, <code class=\"language-text\">npm</code> also adds the <code class=\"language-text\">lodash</code> entry in the <code class=\"language-text\">dependencies</code> property of the <code class=\"language-text\">package.json</code> file present in the current folder.</p>\n<p>A global installation is performed using the <code class=\"language-text\">-g</code> flag:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g lodash</code></pre></div>\n<p>When this happens, npm won't install the package under the local folder, but instead, it will use a global location.</p>\n<p>Where, exactly?</p>\n<p>The <code class=\"language-text\">npm root -g</code> command will tell you where that exact location is on your machine.</p>\n<p>On macOS or Linux this location could be <code class=\"language-text\">/usr/local/lib/node_modules</code>.</p>\n<p>On Windows it could be <code class=\"language-text\">C:\\Users\\YOU\\AppData\\Roaming\\npm\\node_modules</code></p>\n<p>If you use <code class=\"language-text\">nvm</code> to manage Node.js versions, however, that location would differ.</p>\n<p>I, for example, use <code class=\"language-text\">nvm</code> and my packages location was shown as <code class=\"language-text\">/Users/joe/.nvm/versions/node/v8.9.0/lib/node_modules</code>.</p>\n<h1>How to use or execute a package installed using npm</h1>\n<p>description: 'How to include and use in your code a package installed in your node_modules folder'</p>\n<p>When you install a package into your <code class=\"language-text\">node_modules</code> folder using <code class=\"language-text\">npm</code> , or also globally, how do you use it in your Node.js code?</p>\n<p>Say you install <code class=\"language-text\">lodash</code>, the popular JavaScript utility library, using</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> lodash</code></pre></div>\n<p>This is going to install the package in the local <code class=\"language-text\">node_modules</code> folder.</p>\n<p>To use it in your code, you just need to import it into your program using <code class=\"language-text\">require</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> _ <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lodash'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>What if your package is an executable?</p>\n<p>In this case, it will put the executable file under the <code class=\"language-text\">node_modules/.bin/</code> folder.</p>\n<p>One easy way to demonstrate this is <a href=\"https://www.npmjs.com/package/cowsay\">cowsay</a>.</p>\n<p>The cowsay package provides a command line program that can be executed to make a cow say something (and other animals as well ü¶ä).</p>\n<p>When you install the package using <code class=\"language-text\">npm install cowsay</code>, it will install itself and a few dependencies in the <code class=\"language-text\">node_modules</code> folder:</p>\n<p><img src=\"images/node_modules-content.png\" alt=\"The node_modules folder content\"></p>\n<p>There is a hidden <code class=\"language-text\">.bin</code> folder, which contains symbolic links to the cowsay binaries:</p>\n<p><img src=\"images/binary-files.png\" alt=\"The binary files\"></p>\n<p>How do you execute those?</p>\n<p>You can of course type <code class=\"language-text\">./node_modules/.bin/cowsay</code> to run it, and it works, but <code class=\"language-text\">npx</code>, included in the recent versions of <code class=\"language-text\">npm</code> (since 5.2), is a much better option. You just run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx cowsay</code></pre></div>\n<p>and <code class=\"language-text\">npx</code> will find the package location.</p>\n<p><img src=\"images/cow-say.png\" alt=\"Cow says something\"></p>\n<h1>The package.json guide</h1>\n<p>description: 'The package.json file is a key element in lots of app codebases based on the Node.js ecosystem.'</p>\n<p>If you work with JavaScript, or you've ever interacted with a JavaScript project, Node.js or a frontend project, you surely met the <code class=\"language-text\">package.json</code> file.</p>\n<p>What's that for? What should you know about it, and what are some of the cool things you can do with it?</p>\n<p>The <code class=\"language-text\">package.json</code> file is kind of a manifest for your project. It can do a lot of things, completely unrelated. It's a central repository of configuration for tools, for example. It's also where <code class=\"language-text\">npm</code> and <code class=\"language-text\">yarn</code> store the names and versions for all the installed packages.</p>\n<h2>The file structure</h2>\n<p>Here's an example package.json file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It's empty! There are no fixed requirements of what should be in a <code class=\"language-text\">package.json</code> file, for an application. The only requirement is that it respects the JSON format, otherwise it cannot be read by programs that try to access its properties programmatically.</p>\n<p>If you're building a Node.js package that you want to distribute over <code class=\"language-text\">npm</code> things change radically, and you must have a set of properties that will help other people use it. We'll see more about this later on.</p>\n<p>This is another package.json:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test-project\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>It defines a <code class=\"language-text\">name</code> property, which tells the name of the app, or package, that's contained in the same folder where this file lives.</p>\n<p>Here's a much more complex example, which was extracted from a sample Vue.js application:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test-project\"</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A Vue.js project\"</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"src/main.js\"</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run dev\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"unit\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest --config test/unit/jest.conf.js --coverage\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run unit\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint --ext .js,.vue src test/unit\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/build.js\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.5.2\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"autoprefixer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.1.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.22.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^8.2.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-helper-vue-jsx-merge-props\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.3\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^21.0.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.1.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-plugin-dynamic-import-node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.2.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-plugin-syntax-jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.18.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-plugin-transform-es2015-modules-commonjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.26.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-plugin-transform-runtime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.22.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-plugin-transform-vue-jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.5.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-preset-env\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.3.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"babel-preset-stage-2\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.22.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"chalk\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"copy-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.0.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"css-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.28.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.15.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-config-airbnb-base\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^11.3.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-friendly-formatter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-import-resolver-webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.8.3\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.7.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-plugin-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.7.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"eslint-plugin-vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"extract-text-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"file-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.4\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"friendly-errors-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.6.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"html-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.30.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^22.0.4\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"jest-serializer-vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.3.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"node-notifier\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.1.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"optimize-css-assets-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.2.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"ora\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.2.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"portfinder\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.13\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"postcss-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^11.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"postcss-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.8\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"postcss-url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.2.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"rimraf\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.6.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"semver\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.3.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"shelljs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.7.6\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"uglifyjs-webpack-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.1.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"url-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.8\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"vue-jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"vue-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^13.3.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"vue-style-loader\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"vue-template-compiler\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.5.2\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.6.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"webpack-bundle-analyzer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.9.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"webpack-dev-server\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.9.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"webpack-merge\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.1.0\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"engines\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\">= 6.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"npm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\">= 3.0.0\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"browserslist\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"> 1%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"last 2 versions\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"not ie &lt;= 8\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>there are <em>lots</em> of things going on here:</p>\n<ul>\n<li><code class=\"language-text\">version</code> indicates the current version</li>\n<li>-</li>\n<li><code class=\"language-text\">name</code> sets the application/package name</li>\n<li>-</li>\n<li><code class=\"language-text\">description</code> is a brief description of the app/package</li>\n<li>-</li>\n<li><code class=\"language-text\">main</code> sets the entry point for the application</li>\n<li>-</li>\n<li><code class=\"language-text\">private</code> if set to <code class=\"language-text\">true</code> prevents the app/package to be accidental</li>\n<li>-</li>\n<li><code class=\"language-text\">scripts</code> defines a set of node scripts you can run</li>\n<li><code class=\"language-text\">dependencies</code> sets a list of <code class=\"language-text\">npm</code> packages installed as dependencies</li>\n<li><code class=\"language-text\">devDependencies</code> sets a list of <code class=\"language-text\">npm</code> packages installed as development dependencies</li>\n<li><code class=\"language-text\">engines</code> sets which versions of Node.js this package/app works on</li>\n<li><code class=\"language-text\">browserslist</code> is used to tell which browsers (and their versions) you want to support</li>\n</ul>\n<p>All those properties are used by either <code class=\"language-text\">npm</code> or other tools that we can use.</p>\n<h2>Properties breakdown</h2>\n<p>Most of those properties are only used on <a href=\"https://www.npmjs.com/\">https://www.npmjs.com/</a>, others by scripts that interact with your code, like <code class=\"language-text\">npm</code> or others.</p>\n<h3>name</h3>\n<p>Sets the package name.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"test-project\"</span></code></pre></div>\n<p>The name must be less than 214 characters, must not have spaces, it can only contain lowercase letters, hyphens (<code class=\"language-text\">-</code>) or underscores (<code class=\"language-text\">_</code>).</p>\n<p>This is because when a package is published on <code class=\"language-text\">npm</code>, it gets its own URL based on this property.</p>\n<p>If you published this package publicly on GitHub, a good value for this property is the GitHub repository name.</p>\n<h3>author</h3>\n<p>Lists the package author name</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joe &lt;joe@whatever.com> (https://whatever.com)\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Can also be used with this format:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joe\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"joe@whatever.com\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://whatever.com\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>contributors</h3>\n<p>As well as the author, the project can have one or more contributors. This property is an array that lists them.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"contributors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Joe &lt;joe@whatever.com> (https://whatever.com)\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Can also be used with this format:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"contributors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joe\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token string-property property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"joe@whatever.com\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token string-property property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://whatever.com\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>bugs</h3>\n<p>Links to the package issue tracker, most likely a GitHub issues page</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"bugs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/whatever/package/issues\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>homepage</h3>\n<p>Sets the package homepage</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"homepage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://whatever.com/package\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>version</h3>\n<p>Indicates the current version of the package.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span></code></pre></div>\n<p>This property follows the semantic versioning (semver) notation for versions, which means the version is always expressed with 3 numbers: <code class=\"language-text\">x.x.x</code>.</p>\n<p>The first number is the major version, the second the minor version and the third is the patch version.</p>\n<p>There is a meaning in these numbers: a release that only fixes bugs is a patch release, a release that introduces backward-compatible changes is a minor release, a major release can have breaking changes.</p>\n<h3>license</h3>\n<p>Indicates the license of the package.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span></code></pre></div>\n<h3>keywords</h3>\n<p>This property contains an array of keywords that associate with what your package does.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n  <span class=\"token string\">\"email\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">\"machine learning\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">\"ai\"</span>\n\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>This helps people find your package when navigating similar packages, or when browsing the <a href=\"https://www.npmjs.com/\">https://www.npmjs.com/</a> website.</p>\n<h3>description</h3>\n<p>This property contains a brief description of the package</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A package to work with strings\"</span></code></pre></div>\n<p>This is especially useful if you decide to publish your package to <code class=\"language-text\">npm</code> so that people can find out what the package is about.</p>\n<h3>repository</h3>\n<p>This property specifies where this package repository is located.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"github:whatever/testing\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Notice the <code class=\"language-text\">github</code> prefix. There are other popular services baked in:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gitlab:whatever/testing\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bitbucket:whatever/testing\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>You can explicitly set the version control system:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"git\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/whatever/testing.git\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You can use different version control systems:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"svn\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"...\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>main</h3>\n<p>Sets the entry point for the package.</p>\n<p>When you import this package in an application, that's where the application will search for the module exports.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"src/main.js\"</span></code></pre></div>\n<h3>private</h3>\n<p>if set to <code class=\"language-text\">true</code> prevents the app/package to be accidentally published on <code class=\"language-text\">npm</code></p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></code></pre></div>\n<h3>scripts</h3>\n<p>Defines a set of node scripts you can run</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run dev\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"unit\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest --config test/unit/jest.conf.js --coverage\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run unit\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint --ext .js,.vue src test/unit\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node build/build.js\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>These scripts are command line applications. You can run them by calling <code class=\"language-text\">npm run XXXX</code> or <code class=\"language-text\">yarn XXXX</code>, where <code class=\"language-text\">XXXX</code> is the command name. Example: <code class=\"language-text\">npm run dev</code>.</p>\n<p>You can use any name you want for a command, and scripts can do literally anything you want.</p>\n<h3>dependencies</h3>\n<p>Sets a list of <code class=\"language-text\">npm</code> packages installed as dependencies.</p>\n<p>When you install a package using npm or yarn:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>PACKAGENAME<span class=\"token operator\">></span>\n\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token operator\">&lt;</span>PACKAGENAME<span class=\"token operator\">></span></code></pre></div>\n<p>that package is automatically inserted in this list.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.5.2\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>devDependencies</h3>\n<p>Sets a list of <code class=\"language-text\">npm</code> packages installed as development dependencies.</p>\n<p>They differ from <code class=\"language-text\">dependencies</code> because they are meant to be installed only on a development machine, not needed to run the code in production.</p>\n<p>When you install a package using npm or yarn:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev <span class=\"token operator\">&lt;</span>PACKAGENAME<span class=\"token operator\">></span>\n\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev <span class=\"token operator\">&lt;</span>PACKAGENAME<span class=\"token operator\">></span></code></pre></div>\n<p>that package is automatically inserted in this list.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"autoprefixer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.1.2\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"babel-core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.22.1\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>engines</h3>\n<p>Sets which versions of Node.js and other commands this package/app work on</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"engines\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\">= 6.0.0\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"npm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\">= 3.0.0\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"yarn\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.13.0\"</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>browserslist</h3>\n<p>Is used to tell which browsers (and their versions) you want to support. It's referenced by Babel, Autoprefixer, and other tools, to only add the polyfills and fallbacks needed to the browsers you target.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token string-property property\">\"browserslist\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n  <span class=\"token string\">\"> 1%\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">\"last 2 versions\"</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">\"not ie &lt;= 8\"</span>\n\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>This configuration means you want to support the last 2 major versions of all browsers with at least 1% of usage (from the <a href=\"https://caniuse.com\">CanIUse.com</a> stats), except IE8 and lower.</p>\n<p>(<a href=\"https://www.npmjs.com/package/browserslist\">see more</a>)</p>\n<h3>Command-specific properties</h3>\n<p>The <code class=\"language-text\">package.json</code> file can also host command-specific configuration, for example for Babel, ESLint, and more.</p>\n<p>Each has a specific property, like <code class=\"language-text\">eslintConfig</code>, <code class=\"language-text\">babel</code> and others. Those are command-specific, and you can find how to use those in the respective command/project documentation.</p>\n<h2>Package versions</h2>\n<p>You have seen in the description above version numbers like these: <code class=\"language-text\">~3.0.0</code> or <code class=\"language-text\">^0.13.0</code>. What do they mean, and which other version specifiers can you use?</p>\n<p>That symbol specifies which updates your package accepts, from that dependency.</p>\n<p>Given that using semver (semantic versioning) all versions have 3 digits, the first being the major release, the second the minor release and the third is the patch release, you have these \"<a href=\"https://nodejs.dev/learn/semantic-versioning-using-npm/\">Rules</a>\".</p>\n<p>You can combine most of the versions in ranges, like this: <code class=\"language-text\">1.0.0 || >=1.1.0 &lt;1.2.0</code>, to either use 1.0.0 or one release from 1.1.0 up, but lower than 1.2.0.</p>\n<h1>The package-lock.json file</h1>\n<p>description: \"The package-lock.json file is automatically generated when installing node packages. Learn what it's about\"</p>\n<hr>\n<p>In version 5, npm introduced the <code class=\"language-text\">package-lock.json</code> file.</p>\n<p>What's that? You probably know about the <code class=\"language-text\">package.json</code> file, which is much more common and has been around for much longer.</p>\n<p>The goal of <code class=\"language-text\">package-lock.json</code> file is to keep track of the exact version of every package that is installed so that a product is 100% reproducible in the same way even if packages are updated by their maintainers.</p>\n<p>This solves a very specific problem that <code class=\"language-text\">package.json</code> left unsolved. In package.json you can set which versions you want to upgrade to (patch or minor), using the <strong>semver</strong> notation, for example:</p>\n<ul>\n<li>if you write <code class=\"language-text\">~0.13.0</code>, you want to only update patch releases: <code class=\"language-text\">0.13.1</code> is ok, but <code class=\"language-text\">0.14.0</code> is not.</li>\n<li>-</li>\n<li>if you write <code class=\"language-text\">^0.13.0</code>, you want to get updates that do not change the leftmost non-zero number: <code class=\"language-text\">0.13.1</code>, <code class=\"language-text\">0.13.2</code> and so on. If you write <code class=\"language-text\">^1.13.0</code>, you will get patch and minor releases: <code class=\"language-text\">1.13.1</code>, <code class=\"language-text\">1.14.0</code> and so on up to <code class=\"language-text\">2.0.0</code> but not <code class=\"language-text\">2.0.0</code>.</li>\n<li>if you write <code class=\"language-text\">0.13.0</code>, that is the exact version that will be used, always</li>\n</ul>\n<p>You don't commit to Git your node_modules folder, which is generally huge, and when you try to replicate the project on another machine by using the <code class=\"language-text\">npm install</code> command, if you specified the <code class=\"language-text\">~</code> syntax and a patch release of a package has been released, that one is going to be installed. Same for <code class=\"language-text\">^</code> and minor releases.</p>\n<blockquote>\n<p>If you specify exact versions, like <code class=\"language-text\">0.13.0</code> in the example, you are not affected by this problem.</p>\n</blockquote>\n<p>It could be you, or another person trying to initialize the project on the other side of the world by running <code class=\"language-text\">npm install</code>.</p>\n<p>So your original project and the newly initialized project are actually different. Even if a patch or minor release should not introduce breaking changes, we all know bugs can (and so, they will) slide in.</p>\n<p>The <code class=\"language-text\">package-lock.json</code> sets your currently installed version of each package <strong>in stone</strong>, and <code class=\"language-text\">npm</code> will use those exact versions when running <code class=\"language-text\">npm ci</code>.</p>\n<p>This concept is not new, and other programming languages package managers (like Composer in PHP) use a similar system for years.</p>\n<p>The <code class=\"language-text\">package-lock.json</code> file needs to be committed to your Git repository, so it can be fetched by other people, if the project is public or you have collaborators, or if you use Git as a source for deployments.</p>\n<p>The dependencies versions will be updated in the <code class=\"language-text\">package-lock.json</code> file when you run <code class=\"language-text\">npm update</code>.</p>\n<h2>An example</h2>\n<p>This is an example structure of a <code class=\"language-text\">package-lock.json</code> file we get when we run <code class=\"language-text\">npm install cowsay</code> in an empty folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n\n<span class=\"token punctuation\">{</span>\n\n  <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"lockfileVersion\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token string-property property\">\"ansi-regex\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"3.0.0\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> \"https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>registry<span class=\"token punctuation\">.</span>npmjs<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>ansi<span class=\"token operator\">-</span>regex<span class=\"token operator\">/</span><span class=\"token operator\">-</span><span class=\"token operator\">/</span>ansi<span class=\"token operator\">-</span>regex<span class=\"token operator\">-</span><span class=\"token number\">3.</span>\n\n<span class=\"token number\">0.0</span><span class=\"token punctuation\">.</span>tgz\"<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-7QMXwyIGT3lGbAKWa922Bas32Zg=\"</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"cowsay\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.3.1\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz\"</span>\n\n<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> \"sha512<span class=\"token operator\">-</span>3PVFe6FePVtPj1HTeLin9v8WyLl<span class=\"token operator\">+</span>VmM1l1H<span class=\"token operator\">/</span>5P<span class=\"token operator\">+</span>BTTDkM\n\nAjufp<span class=\"token operator\">+</span>0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ<span class=\"token operator\">==</span>\"<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token string-property property\">\"get-stdin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.0.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"optimist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.6.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"string-width\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~2.1.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"strip-eof\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.0\"</span>\n\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"get-stdin\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5.0.1\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> \"https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>registry<span class=\"token punctuation\">.</span>npmjs<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>get<span class=\"token operator\">-</span>stdin<span class=\"token operator\">/</span><span class=\"token operator\">-</span><span class=\"token operator\">/</span>get<span class=\"token operator\">-</span>stdin<span class=\"token operator\">-</span><span class=\"token number\">5.0</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token number\">1</span><span class=\"token punctuation\">.</span>tgz\"<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-Ei4WFZHiH/TFJTAwVpPyDmOTo5g=\"</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"is-fullwidth-code-point\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> \"https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>registry<span class=\"token punctuation\">.</span>npmjs<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>is<span class=\"token operator\">-</span>fullwidth<span class=\"token operator\">-</span>code<span class=\"token operator\">-</span>point<span class=\"token operator\">/</span><span class=\"token operator\">-</span><span class=\"token operator\">/</span>\n\nis<span class=\"token operator\">-</span>fullwidth<span class=\"token operator\">-</span>code<span class=\"token operator\">-</span>point<span class=\"token operator\">-</span><span class=\"token number\">2.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">.</span>tgz\"<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-o7MKXE8ZkYMWeqq5O+764937ZU8=\"</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"minimist\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.10\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> \"https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>registry<span class=\"token punctuation\">.</span>npmjs<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>minimist<span class=\"token operator\">/</span><span class=\"token operator\">-</span><span class=\"token operator\">/</span>minimist<span class=\"token operator\">-</span><span class=\"token number\">0.0</span><span class=\"token number\">.10</span>\n\n<span class=\"token punctuation\">.</span>tgz\"<span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-3j+YVD2/lggr5IrRoMfNqDYwHc8=\"</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"optimist\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.6.1\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-2j6nRob6IaGaERwybpDrFaAZZoY=\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token string-property property\">\"minimist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.0.1\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"wordwrap\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.0.2\"</span>\n\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"string-width\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.1.1\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw==\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token string-property property\">\"is-fullwidth-code-point\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.0.0\"</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">\"strip-ansi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.0.0\"</span>\n\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"strip-ansi\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0.0\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-qEeQIusaw2iocTibY1JixQXuNo8=\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token string-property property\">\"ansi-regex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.0\"</span>\n\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"strip-eof\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/strip-eof/-/strip-eof-1.0.0.tgz\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-u0P/VZim6wXYm1n80SnJgzE2Br8=\"</span>\n\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"wordwrap\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.3\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/wordwrap/-/wordwrap-0.0.3.tgz\"</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha1-o9XabNXAvAAI03I0u68b7WMFkQc=\"</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We installed <code class=\"language-text\">cowsay</code>, which depends on</p>\n<ul>\n<li><code class=\"language-text\">get-stdin</code></li>\n<li>-</li>\n<li><code class=\"language-text\">optimist</code></li>\n<li>-</li>\n<li><code class=\"language-text\">string-width</code></li>\n<li><code class=\"language-text\">strip-eof</code></li>\n</ul>\n<p>In turn, those packages require other packages, as we can see from the <code class=\"language-text\">requires</code> property that some have:</p>\n<ul>\n<li><code class=\"language-text\">ansi-regex</code></li>\n<li>-</li>\n<li>`is-fullwidt</li>\n<li>-</li>\n<li><code class=\"language-text\">minimist</code></li>\n<li><code class=\"language-text\">wordwrap</code></li>\n<li><code class=\"language-text\">strip-eof</code></li>\n</ul>\n<p>They are added in alphabetical order into the file, and each one has a <code class=\"language-text\">version</code> field, a <code class=\"language-text\">resolved</code> field that points to the package location, and an <code class=\"language-text\">integrity</code> string that we can use to verify the package.</p>\n<h1>Computer Networking &#x26; Socket Programming</h1>\n<p>Socket programming is the development of programs for <a href=\"https://en.wikipedia.org/wiki/Computer_network\">Computer Networking</a>. Networking applications are loosely based off of the top most layers of the conceptual 7-layer model called the <a href=\"https://en.wikipedia.org/wiki/OSI_model\">OSI Model</a>. The layers most relevant to socket programmers is layer 4, the <a href=\"https://en.wikipedia.org/wiki/Transport_layer\">Transport layer</a>, and layer 7, the <a href=\"https://en.wikipedia.org/wiki/Application_layer\">Application layer</a>. Specific protocols are implemented at each layer, and are instrumental for the functionality of the internet.</p>\n<p>Node.js exposes extensive API's for implementing these protocols so developers can create socket programming applications. The most common example is the <code class=\"language-text\">http</code> module. <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\">HTTP</a> exists on the Application layer of the OSI Model; if you want to learn more about the <code class=\"language-text\">http</code> module, read the Node.js <a href=\"https://nodejs.org/api/http.html\">http documentation</a> or the Nodejs.dev <a href=\"https://nodejs.dev/the-nodejs-http-module\">guide</a>. Another socket programming Node.js module is the <code class=\"language-text\">dgram</code> module for <a href=\"https://en.wikipedia.org/wiki/User_Datagram_Protocol\">UDP</a> communication. UDP exists on the Transport layer; for more information about this technology read the Node.js <a href=\"https://nodejs.org/api/dgram.html\">dgram documentaion</a>. More importantly, the <code class=\"language-text\">net</code> module, which this guide is all about, provides an extensive API for a stream-based TCP server. <a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\">TCP</a> exists on the Transport layer of the OSI Model and is what HTTP is implemented on top of.</p>\n<blockquote>\n<p>TCP is a reliable, ordered, and error-checked delivery of a stream of bytes between applications communicating via an internet protocol (IP) network.</p>\n</blockquote>\n<blockquote>\n</blockquote>\n<blockquote>\n<p>~ <a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\">Wikipedia</a></p>\n</blockquote>\n<h2>Net Module - Getting Started</h2>\n<p>The key part of the <code class=\"language-text\">net</code> module is the <code class=\"language-text\">net.Socket</code> class. A socket instance in Node.js is both a <a href=\"https://nodejs.org/api/stream.html#stream_duplex_and_transform_streams\">duplex stream</a> and an <a href=\"https://nodejs.org/api/events.html#events_class_eventemitter\">event emitter</a>. This means it is readable, writable, and can utilize the event loop. Sockets can be created by the user and by Node.js, and they are the programmatic object for communicating. Sockets must connect to a <code class=\"language-text\">net.Server</code> class instance; a socket connection to a server is often referred to as a <em>client connection</em>. Every socket connection is considered \"private\" in the sense that the only entities with access to the connection is the server and the client. A server instance <strong>can</strong> have multiple client connections, but will maintain separate communication streams with each connection.</p>\n<p>Lets look at the simplest example of a TCP server, an echo server. An <em>echo server</em> is one which returns the same message sent to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> net <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'net'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create a TCP server using the `net.createServer()` method</span>\n\n<span class=\"token comment\">// The callback method is an event listener for the 'connection' event</span>\n\n<span class=\"token comment\">// This method is passed a single parameter, the client socket connection</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> net<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">client</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Client connected!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// The client is a stream, set the data encoding to utf8</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">setEncoding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Manual implementation of an echo server:</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// data is a UTF-8 string</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log the message from the client to the server</span>\n\n        client<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// write the same message back to the client</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Automatic implementation of an echo server:</span>\n\n    <span class=\"token comment\">// client is a stream, use the Stream.pipe prototype method to connect it's</span>\n\n    <span class=\"token comment\">// read stream to it's write stream</span>\n\n    <span class=\"token comment\">// client.pipe(client)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Start the server on localhost:8124</span>\n\n<span class=\"token comment\">// The `http` module, inherits this method for its own http.Server.listen</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">8124</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for connection...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>With this server running, connect to it using your system's command-line TCP interface. The two most common are telnet and netcat. If you're unsure which, try both! If neither work, search on Google for \"telnet alternative for &#x3C;your OS>\".</p>\n<p>In another terminal connect to the running TCP server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">telnet localhost <span class=\"token number\">8124</span>\n\n<span class=\"token comment\"># or</span>\n\n<span class=\"token function\">nc</span> localhost <span class=\"token number\">8124</span></code></pre></div>\n<p>If you see the message <code class=\"language-text\">Client connected!</code> in the TCP server terminal, you can begin sending messages from the client connection terminal. Whatever you send should be sent back to you immediatly (if you copy-and-pasted the code from above directly, you'll receive your message twice because their are two echo implementations). Disconnecting is easy; use your terminal's quit keystroke (commonly <code class=\"language-text\">CTRL+C</code>) or exit the terminal application instance.</p>\n<p>Great work! You have succesfully implemented your first TCP server-client connection.</p>\n<h2>Example using <code class=\"language-text\">net.createConnection()</code></h2>\n<p>Before starting, open two terminals and startup the Node.js repl (you can also use two files called <code class=\"language-text\">server.js</code> and <code class=\"language-text\">client.js</code> respectively). In the following example, we will create a TCP server and a connection to that server using the <code class=\"language-text\">net</code> module. By doing so, the interactivity is not the same as the previous echo example. In fact, without using other core Node.js modules, this example is completely non-interactive. The client code will disconnect itself at the end of its execution.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// In the first repl, create and start a server</span>\n\n<span class=\"token keyword\">const</span> net <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'net'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> net<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">client</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Client connected'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log the client has connected to the server</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">setEncoding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// set the data encoding</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello from the server!\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// say hello to the new connection</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        client<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// echo the client message in ALL CAPS</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Client disconnected'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log the client has disconnected to the server</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">8124</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Waiting for connection...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// In the second repl, create and connect a client</span>\n\n<span class=\"token keyword\">const</span> net <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'net'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> net<span class=\"token punctuation\">.</span><span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token number\">8124</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Connected to Server!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log the server connection to the client</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello from the client!\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// say hello to the server</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nclient<span class=\"token punctuation\">.</span><span class=\"token function\">setEncoding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// set the encoding</span>\n\nclient<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log messages from the server to the client</span>\n\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// end the connection after</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nclient<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Disconnected from server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log the server disconnection to the client</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The second example introduces an additional event listener <code class=\"language-text\">'end'</code>. This is very useful for determining when a socket connection is terminated. In the client code, the call to <code class=\"language-text\">client.end()</code> is the programatic way of ending a socket connection.</p>\n<h2>Conclusion</h2>\n<p>Fantastic work! With these two examples you should have what you need to get started building your own TCP communication networks. This guide only brushes the surface of socket programming applications, but the most important take away here is that Node.js implements TCP socket connections as <a href=\"https://nodejs.org/api/stream.html#stream_duplex_and_transform_streams\">duplex streams</a> and <a href=\"https://nodejs.org/api/events.html#events_class_eventemitter\">event emitters</a>. Understanding those two concepts will benefit your overall understanding of the <code class=\"language-text\">net</code> module.</p>\n<p>For more capabilities of the <code class=\"language-text\">net</code> module read the Node.js <a href=\"https://nodejs.org/api/net.html\">net documentation</a>.</p>\n<p>To learn more, try completing the following challenges:</p>\n<ul>\n<li>\n<p>Using <code class=\"language-text\">readline</code> or <code class=\"language-text\">stream</code> modules, create an interactive client connection script</p>\n<ul>\n<li>this can build on the second example provided in this guide</li>\n</ul>\n</li>\n<li>\n<p>Create a group-chat TCP server</p>\n<ul>\n<li>hint: you can hold multiple client connections in an array</li>\n<li>use multiple arrays for a multi-channel chat server</li>\n<li>for an extra challenge try to implement a basic user-store for authentication of user accounts</li>\n</ul>\n</li>\n<li>\n<p>Create a mini CRUD database server using an idiomatic chat-command interface</p>\n<ul>\n<li>The chat-command interface could use keywords such as <code class=\"language-text\">create</code>, <code class=\"language-text\">read</code>, <code class=\"language-text\">update</code>, and <code class=\"language-text\">delete</code> so the client can send instructions to the server</li>\n<li>Data can be persisted between sessions using <code class=\"language-text\">fs</code> to read and write data to files</li>\n</ul>\n</li>\n</ul>\n<h1>Find the installed version of an npm package</h1>\n<p>description: 'How to find out which version of a particular package you have installed in your app'</p>\n<p>To see the version of all installed npm packages, including their dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> list</code></pre></div>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> list\n\n/Users/joe/dev/node/cowsay\n\n‚îî‚îÄ‚î¨ cowsay@1.3.1\n\n  ‚îú‚îÄ‚îÄ get-stdin@5.0.1\n\n  ‚îú‚îÄ‚î¨ optimist@0.6.1\n\n  ‚îÇ ‚îú‚îÄ‚îÄ minimist@0.0.10\n\n  ‚îÇ ‚îî‚îÄ‚îÄ wordwrap@0.0.3\n\n  ‚îú‚îÄ‚î¨ string-width@2.1.1\n\n  ‚îÇ ‚îú‚îÄ‚îÄ is-fullwidth-code-point@2.0.0\n\n  ‚îÇ ‚îî‚îÄ‚î¨ strip-ansi@4.0.0\n\n  ‚îÇ   ‚îî‚îÄ‚îÄ ansi-regex@3.0.0\n\n  ‚îî‚îÄ‚îÄ strip-eof@1.0.0</code></pre></div>\n<p>You can also just open the <code class=\"language-text\">package-lock.json</code> file, but this involves some visual scanning.</p>\n<p><code class=\"language-text\">npm list -g</code> is the same, but for globally installed packages.</p>\n<p>To get only your top-level packages (basically, the ones you told npm to install and you listed in the <code class=\"language-text\">package.json</code>), run <code class=\"language-text\">npm list --depth=0</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> list --depth<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n\n/Users/joe/dev/node/cowsay\n\n‚îî‚îÄ‚îÄ cowsay@1.3.1</code></pre></div>\n<p>You can get the version of a specific package by specifying its name:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> list cowsay\n\n/Users/joe/dev/node/cowsay\n\n‚îî‚îÄ‚îÄ cowsay@1.3.1</code></pre></div>\n<p>This also works for dependencies of packages you installed:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> list minimist\n\n/Users/joe/dev/node/cowsay\n\n‚îî‚îÄ‚î¨ cowsay@1.3.1\n\n  ‚îî‚îÄ‚î¨ optimist@0.6.1\n\n    ‚îî‚îÄ‚îÄ minimist@0.0.10</code></pre></div>\n<p>If you want to see what's the latest available version of the package on the npm repository, run <code class=\"language-text\">npm view [package_name] version</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> view cowsay version\n\n<span class=\"token number\">1.3</span>.1</code></pre></div>\n<h1>Install an older version of an npm package</h1>\n<p>description: 'Learn how to install an older version of an npm package, something that might be useful to solve a compatibility problem'</p>\n<p>You can install an old version of an npm package using the <code class=\"language-text\">@</code> syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span>@<span class=\"token operator\">&lt;</span>version<span class=\"token operator\">></span></code></pre></div>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> cowsay</code></pre></div>\n<p>installs version 1.3.1 (at the time of writing).</p>\n<p>Install version 1.2.0 with:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> cowsay@1.2.0</code></pre></div>\n<p>The same can be done with global packages:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g webpack@4.16.4</code></pre></div>\n<p>You might also be interested in listing all the previous versions of a package. You can do it with <code class=\"language-text\">npm view &lt;package> versions</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ <span class=\"token function\">npm</span> view cowsay versions\n\n<span class=\"token punctuation\">[</span> <span class=\"token string\">'1.0.0'</span>,\n\n  <span class=\"token string\">'1.0.1'</span>,\n\n  <span class=\"token string\">'1.0.2'</span>,\n\n  <span class=\"token string\">'1.0.3'</span>,\n\n  <span class=\"token string\">'1.1.0'</span>,\n\n  <span class=\"token string\">'1.1.1'</span>,\n\n  <span class=\"token string\">'1.1.2'</span>,\n\n  <span class=\"token string\">'1.1.3'</span>,\n\n  <span class=\"token string\">'1.1.4'</span>,\n\n  <span class=\"token string\">'1.1.5'</span>,\n\n  <span class=\"token string\">'1.1.6'</span>,\n\n  <span class=\"token string\">'1.1.7'</span>,\n\n  <span class=\"token string\">'1.1.8'</span>,\n\n  <span class=\"token string\">'1.1.9'</span>,\n\n  <span class=\"token string\">'1.2.0'</span>,\n\n  <span class=\"token string\">'1.2.1'</span>,\n\n  <span class=\"token string\">'1.3.0'</span>,\n\n  <span class=\"token string\">'1.3.1'</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<h1>Update all the Node.js dependencies to their latest version</h1>\n<p>description: 'How do you update all the npm dependencies store in the package.json file, to their latest version available?'</p>\n<p>When you install a package using <code class=\"language-text\">npm install &lt;packagename></code>, the latest available version of the package is downloaded and put in the <code class=\"language-text\">node_modules</code> folder, and a corresponding entry is added to the <code class=\"language-text\">package.json</code> and <code class=\"language-text\">package-lock.json</code> files that are present in your current folder.</p>\n<p>npm calculates the dependencies and installs the latest available version of those as well.</p>\n<p>Let's say you install <a href=\"https://www.npmjs.com/package/cowsay\"><code class=\"language-text\">cowsay</code></a>, a cool command line tool that lets you make a cow say <em>things</em>.</p>\n<p>When you <code class=\"language-text\">npm install cowsay</code>, this entry is added to the <code class=\"language-text\">package.json</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"cowsay\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.3.1\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>and this is an extract of <code class=\"language-text\">package-lock.json</code>, where we removed the nested dependencies for clarity:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//on</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"lockfileVersion\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"cowsay\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.3.1\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token string-property property\">\"resolved\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token string-property property\">\"integrity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ==\"</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token string-property property\">\"requires\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"get-stdin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.0.1\"</span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string-property property\">\"optimist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~0.6.1\"</span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string-property property\">\"string-width\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~2.1.1\"</span><span class=\"token punctuation\">,</span>\n\n                <span class=\"token string-property property\">\"strip-eof\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.0\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now those 2 files tell us that we installed version <code class=\"language-text\">1.3.1</code> of cowsay, and our rule for updates is <code class=\"language-text\">^1.3.1</code>, which for the npm versioning rules means that npm can update to patch and minor releases: <code class=\"language-text\">1.3.2</code>, <code class=\"language-text\">1.4.0</code> and so on.</p>\n<p>If there is a new minor or patch release and we type <code class=\"language-text\">npm update</code>, the installed version is updated, and the <code class=\"language-text\">package-lock.json</code> file diligently filled with the new version.</p>\n<p>Since npm version 5.0.0, <code class=\"language-text\">npm update</code> will update the <code class=\"language-text\">package.json</code> with the updated version. Use <code class=\"language-text\">npm update --no-save</code> to not update <code class=\"language-text\">package.json</code>.</p>\n<p>To discover new releases of the packages, you run <code class=\"language-text\">npm outdated</code>.</p>\n<p>Here's the list of a few outdated packages in one repository that wasn't updated for quite a while:</p>\n<p><img src=\"images/outdated-packages.png\" alt=\"alt-text\"></p>\n<p>Some of those updates are major releases. Running <code class=\"language-text\">npm update</code> won't update the version of those. Major releases are never updated in this way because they (by definition) introduce breaking changes, and <code class=\"language-text\">npm</code> wants to save you trouble.</p>\n<p>To update all packages to a new major version, install the <code class=\"language-text\">npm-check-updates</code> package globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g npm-check-updates</code></pre></div>\n<p>then run it:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ncu -u</code></pre></div>\n<p>this will upgrade all the version hints in the <code class=\"language-text\">package.json</code> file, to <code class=\"language-text\">dependencies</code> and <code class=\"language-text\">devDependencies</code>, so npm can install the new major version.</p>\n<p>You are now ready to run the update:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> update</code></pre></div>\n<p>If you just downloaded the project without the <code class=\"language-text\">node_modules</code> dependencies and you want to install the shiny new versions first, just run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<h1>Semantic Versioning using npm</h1>\n<p>description: 'Semantic Versioning is a convention used to provide a meaning to versions'</p>\n<p>If there's one great thing in Node.js packages, it's that they all agreed on using Semantic Versioning for their version numbering.</p>\n<p>The Semantic Versioning concept is simple: all versions have 3 digits: <code class=\"language-text\">x.y.z</code>.</p>\n<ul>\n<li>the first digit is the major version</li>\n<li>-</li>\n<li>the second digit is the minor version</li>\n<li>the third digit is the patch version</li>\n</ul>\n<p>When you make a new release, you don't just up a number as you please, but you have rules:</p>\n<ul>\n<li>you up the major version when you make incompatible API changes</li>\n<li>-</li>\n<li>you up the minor version when you add functionality in a backward-compatible manner</li>\n<li>you up the patch version when you make backward-compatible bug fixes</li>\n</ul>\n<p>The convention is adopted all across programming languages, and it is very important that every <code class=\"language-text\">npm</code> package adheres to it, because the whole system depends on that.</p>\n<p>Why is that so important?</p>\n<p>Because <code class=\"language-text\">npm</code> set some rules we can use in the <code class=\"language-text\">package.json</code> file to choose which versions it can update our packages to, when we run <code class=\"language-text\">npm update</code>.</p>\n<p>The rules use those symbols:</p>\n<ul>\n<li><code class=\"language-text\">^</code></li>\n<li>-</li>\n<li><code class=\"language-text\">~</code></li>\n<li>-</li>\n<li><code class=\"language-text\">></code></li>\n<li>-</li>\n<li><code class=\"language-text\">>=</code></li>\n<li>-</li>\n<li><code class=\"language-text\">&lt;</code></li>\n<li><code class=\"language-text\">&lt;=</code></li>\n<li><code class=\"language-text\">=</code></li>\n<li><code class=\"language-text\">-</code></li>\n<li><code class=\"language-text\">||</code></li>\n</ul>\n<p>Let's see those rules in detail:</p>\n<ul>\n<li><code class=\"language-text\">^</code>: It will only do updates that do not change the leftmost non-zero number i.e there can be changes in minor version or patch version but not in major version. If you write <code class=\"language-text\">^13.1.0</code>, when running <code class=\"language-text\">npm update</code>, it can update to <code class=\"language-text\">13.2.0</code>, <code class=\"language-text\">13.3.0</code> even <code class=\"language-text\">13.3.1</code>, <code class=\"language-text\">13.3.2</code> and so on, but not to <code class=\"language-text\">14.0.0</code> or above.</li>\n<li>-</li>\n<li><code class=\"language-text\">~</code>: if you write <code class=\"language-text\">~0.13.0</code> when running <code class=\"language-text\">npm update</code> it can</li>\n<li>-</li>\n<li><code class=\"language-text\">></code>: you accept any version higher than the one you specify</li>\n<li>-</li>\n<li><code class=\"language-text\">>=</code>: you accept any version equal t</li>\n<li>-</li>\n<li><code class=\"language-text\">&lt;=</code>: you accept any version equal or lower to the one you specify</li>\n<li><code class=\"language-text\">&lt;</code>: you accept any version lower than the one you specify</li>\n<li><code class=\"language-text\">=</code>: you accept that exact version</li>\n<li><code class=\"language-text\">-</code>: you accept a range of versions. Example: <code class=\"language-text\">2.1.0 - 2.6.2</code></li>\n<li><code class=\"language-text\">||</code>: you combine sets. Example: <code class=\"language-text\">&lt; 2.1 || > 2.6</code></li>\n</ul>\n<p>You can combine some of those notations, for example use <code class=\"language-text\">1.0.0 || >=1.1.0 &lt;1.2.0</code> to either use 1.0.0 or one release from 1.1.0 up, but lower than 1.2.0.</p>\n<p>There are other rules, too:</p>\n<ul>\n<li>no symbol: you accept only that specific version you specify (<code class=\"language-text\">1.2.1</code>)</li>\n<li>-</li>\n<li><code class=\"language-text\">latest</code>: you want to use the latest version available</li>\n</ul>\n<h1>Uninstalling npm packages</h1>\n<p>description: 'How to uninstall an npm Node.js package, locally or globally'</p>\n<p>To uninstall a package you have previously installed <strong>locally</strong> (using <code class=\"language-text\">npm install &lt;package-name></code> in the <code class=\"language-text\">node_modules</code> folder, run</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> uninstall <span class=\"token operator\">&lt;</span>package-name<span class=\"token operator\">></span></code></pre></div>\n<p>from the project root folder (the folder that contains the node_modules folder).</p>\n<p>Using the <code class=\"language-text\">-S</code> flag, or <code class=\"language-text\">--save</code>, this operation will also remove the reference in the <code class=\"language-text\">package.json</code> file.</p>\n<p>package.json will be automatically updated with devDependency and dependency once you uninstall npm package.</p>\n<p>If the package is installed <strong>globally</strong>, you need to add the <code class=\"language-text\">-g</code> / <code class=\"language-text\">--global</code> flag:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> uninstall -g <span class=\"token operator\">&lt;</span>package-name<span class=\"token operator\">></span></code></pre></div>\n<p>for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> uninstall -g webpack</code></pre></div>\n<p>and you can run this command from anywhere you want on your system because the folder where you currently are does not matter.</p>\n<h1>npm global or local packages</h1>\n<p>description: 'When is a package best installed globally? Why?'</p>\n<p>The main difference between local and global packages is this:</p>\n<ul>\n<li><strong>local packages</strong> are installed in the directory where you run <code class=\"language-text\">npm install &lt;package-name></code>, and they are put in the <code class=\"language-text\">node_modules</code> folder under this directory</li>\n<li>-</li>\n<li><strong>global packages</strong> are all put in a single place in your system (exactly where depends on your setup), regardless of where you run <code class=\"language-text\">npm install -g &lt;package-name></code></li>\n</ul>\n<p>In your code you can only require local packages:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'package-name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>so when should you install in one way or another?</p>\n<p>In general, <strong>all packages should be installed locally</strong>.</p>\n<p>This makes sure you can have dozens of applications in your computer, all running a different version of each package if needed.</p>\n<p>Updating a global package would make all your projects use the new release, and as you can imagine this might cause nightmares in terms of maintenance, as some packages might break compatibility with further dependencies, and so on.</p>\n<p>All projects have their own local version of a package, even if this might appear like a waste of resources, it's minimal compared to the possible negative consequences.</p>\n<p>A package <strong>should be installed globally</strong> when it provides an executable command that you run from the shell (CLI), and it's reused across projects.</p>\n<p>You can also install executable commands locally and run them using npx, but some packages are just better installed globally.</p>\n<p>Great examples of popular global packages which you might know are</p>\n<ul>\n<li><code class=\"language-text\">npm</code></li>\n<li>-</li>\n<li>`create-rea</li>\n<li>-</li>\n<li><code class=\"language-text\">vue-cli</code></li>\n<li>-</li>\n<li><code class=\"language-text\">grunt-cli</code></li>\n<li>-</li>\n<li><code class=\"language-text\">mocha</code></li>\n<li><code class=\"language-text\">react-native-cli</code></li>\n<li><code class=\"language-text\">gatsby-cli</code></li>\n<li><code class=\"language-text\">forever</code></li>\n<li><code class=\"language-text\">nodemon</code></li>\n</ul>\n<p>You probably have some packages installed globally already on your system. You can see them by running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> list -g --depth <span class=\"token number\">0</span></code></pre></div>\n<p>on your command line.</p>\n<h1>npm dependencies and devDependencies</h1>\n<p>description: 'When is a package a dependency, and when is it a dev dependency?'</p>\n<p>When you install an npm package using <code class=\"language-text\">npm install &lt;package-name></code>, you are installing it as a <strong>dependency</strong>.</p>\n<p>The package is automatically listed in the package.json file, under the <code class=\"language-text\">dependencies</code> list (as of npm 5: before you had to manually specify <code class=\"language-text\">--save</code>).</p>\n<p>When you add the <code class=\"language-text\">-D</code> flag, or <code class=\"language-text\">--save-dev</code>, you are installing it as a development dependency, which adds it to the <code class=\"language-text\">devDependencies</code> list.</p>\n<p>Development dependencies are intended as development-only packages, that are unneeded in production. For example testing packages, webpack or Babel.</p>\n<p>When you go in production, if you type <code class=\"language-text\">npm install</code> and the folder contains a <code class=\"language-text\">package.json</code> file, they are installed, as npm assumes this is a development deploy.</p>\n<p>You need to set the <code class=\"language-text\">--production</code> flag (<code class=\"language-text\">npm install --production</code>) to avoid installing those development dependencies.</p>\n<h1>The npx Node.js Package Runner</h1>\n<p>description: 'npx is a very cool way to run Node.js code, and provides many useful features'</p>\n<p><code class=\"language-text\">npx</code> is a very powerful command that's been available in <strong>npm</strong> starting version 5.2, released in July 2017.</p>\n<blockquote>\n<p>If you don't want to install npm, you can <a href=\"https://www.npmjs.com/package/npx\">install npx as a standalone package</a></p>\n</blockquote>\n<p><code class=\"language-text\">npx</code> lets you run code built with Node.js and published through the npm registry.</p>\n<h2>Easily run local commands</h2>\n<p>Node.js developers used to publish most of the executable commands as global packages, in order for them to be in the path and executable immediately.</p>\n<p>This was a pain because you could not really install different versions of the same command.</p>\n<p>Running <code class=\"language-text\">npx commandname</code> automatically finds the correct reference of the command inside the <code class=\"language-text\">node_modules</code> folder of a project, without needing to know the exact path, and without requiring the package to be installed globally and in the user's path.</p>\n<h2>Installation-less command execution</h2>\n<p>There is another great feature of <code class=\"language-text\">npx</code>, which is allowing to run commands without first installing them.</p>\n<p>This is pretty useful, mostly because:</p>\n<ol>\n<li>you don't need to install anything</li>\n<li>you can run different versions of the same command, using the syntax @version</li>\n</ol>\n<p>A typical demonstration of using <code class=\"language-text\">npx</code> is through the <code class=\"language-text\">cowsay</code> command. <code class=\"language-text\">cowsay</code> will print a cow saying what you wrote in the command. For example:</p>\n<p><code class=\"language-text\">cowsay \"Hello\"</code> will print</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> _______\n\n<span class=\"token operator\">&lt;</span> Hello <span class=\"token operator\">></span>\n\n -------\n\n        <span class=\"token punctuation\">\\</span>   ^__^\n\n         <span class=\"token punctuation\">\\</span>  <span class=\"token punctuation\">(</span>oo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>_______\n\n            <span class=\"token punctuation\">(</span>__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>       <span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>/<span class=\"token punctuation\">\\</span>\n\n                <span class=\"token operator\">||</span>----w <span class=\"token operator\">|</span>\n\n                <span class=\"token operator\">||</span>     <span class=\"token operator\">||</span></code></pre></div>\n<p>This only works if you have the <code class=\"language-text\">cowsay</code> command globally installed from npm previously. Otherwise you'll get an error when you try to run the command.</p>\n<p><code class=\"language-text\">npx</code> allows you to run that npm command without installing it first. If the command isn't found, <code class=\"language-text\">npx</code> will install it into a central cache:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx cowsay <span class=\"token string\">\"Hello\"</span></code></pre></div>\n<p>will do the job.</p>\n<p>Now, this is a funny useless command.</p>\n<p>Other scenarios include:</p>\n<ul>\n<li>running the <code class=\"language-text\">vue</code> CLI tool to create new applications and run them: <code class=\"language-text\">npx @vue/cli create my-vue-app</code></li>\n<li>-</li>\n<li>creating a new React app using <code class=\"language-text\">create-react-app</code>: <code class=\"language-text\">npx create-react-app my-react-app</code></li>\n</ul>\n<p>and many more.</p>\n<h2>Run some code using a different Node.js version</h2>\n<p>Use the <code class=\"language-text\">@</code> to specify the version, and combine that with the <a href=\"https://www.npmjs.com/package/node\"><code class=\"language-text\">node</code> npm package</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx node@10 -v <span class=\"token comment\">#v10.18.1</span>\n\nnpx node@12 -v <span class=\"token comment\">#v12.14.1</span></code></pre></div>\n<p>This helps to avoid tools like <code class=\"language-text\">nvm</code> or the other Node.js version management tools.</p>\n<h2>Run arbitrary code snippets directly from a URL</h2>\n<p><code class=\"language-text\">npx</code> does not limit you to the packages published on the npm registry.</p>\n<p>You can run code that sits in a GitHub gist, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</code></pre></div>\n<p>Of course, you need to be careful when running code that you do not control, as with great power comes great responsibility.</p>\n<h1>'The Node.js Event Loop'</h1>\n<p>description: 'The Event Loop is one of the most important aspects to understand about Node.js'</p>\n<h2>Introduction</h2>\n<p>The <strong>Event Loop</strong> is one of the most important aspects to understand about Node.js.</p>\n<p>Why is this so important? Because it explains how Node.js can be asynchronous and have non-blocking I/O, and so it explains basically the \"killer app\" of Node.js, the thing that made it this successful.</p>\n<p>The Node.js JavaScript code runs on a single thread. There is just one thing happening at a time.</p>\n<p>This is a limitation that's actually very helpful, as it simplifies a lot how you program without worrying about concurrency issues.</p>\n<p>You just need to pay attention to how you write your code and avoid anything that could block the thread, like synchronous network calls or infinite loops.</p>\n<p>In general, in most browsers there is an event loop for every browser tab, to make every process isolated and avoid a web page with infinite loops or heavy processing to block your entire browser.</p>\n<p>The environment manages multiple concurrent event loops, to handle API calls for example. Web Workers run in their own event loop as well.</p>\n<p>You mainly need to be concerned that <em>your code</em> will run on a single event loop, and write code with this thing in mind to avoid blocking it.</p>\n<h2>Blocking the event loop</h2>\n<p>Any JavaScript code that takes too long to return back control to the event loop will block the execution of any JavaScript code in the page, even block the UI thread, and the user cannot click around, scroll the page, and so on.</p>\n<p>Almost all the I/O primitives in JavaScript are non-blocking. Network requests, filesystem operations, and so on. Being blocking is the exception, and this is why JavaScript is based so much on callbacks, and more recently on promises and async/await.</p>\n<h2>The call stack</h2>\n<p>The call stack is a LIFO (Last In, First Out) stack.</p>\n<p>The event loop continuously checks the <strong>call stack</strong> to see if there's any function that needs to run.</p>\n<p>While doing so, it adds any function call it finds to the call stack and executes each one in order.</p>\n<p>You know the error stack trace you might be familiar with, in the debugger or in the browser console? The browser looks up the function names in the call stack to inform you which function originates the current call:</p>\n<p><img src=\"images/exception-call-stack.png\" alt=\"Exception call stack\"></p>\n<h2>A simple event loop explanation</h2>\n<p>Let's pick an example:</p>\n<iframe title=\"A simple event loop explanation\" src=\"https://stackblitz.com/edit/nodejs-dev-0003-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0003-01 \" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">baz</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code prints</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">foo\n\nbar\n\nbaz</code></pre></div>\n<p>as expected.--></p>\n<p>When this code runs, first <code class=\"language-text\">foo()</code> is called. Inside <code class=\"language-text\">foo()</code> we first call <code class=\"language-text\">bar()</code>, then we call <code class=\"language-text\">baz()</code>.</p>\n<p>At this point the call stack looks like this:</p>\n<p><img src=\"images/call-stack-first-example.png\" alt=\"Call stack first example\"></p>\n<p>The event loop on every iteration looks if there's something in the call stack, and executes it:</p>\n<p><img src=\"images/execution-order-first-example.png\" alt=\"Execution order first example\"></p>\n<p>until the call stack is empty.</p>\n<h2>Queuing function execution</h2>\n<p>The above example looks normal, there's nothing special about it: JavaScript finds things to execute, runs them in order.</p>\n<p>Let's see how to defer a function until the stack is clear.</p>\n<p>The use case of <code class=\"language-text\">setTimeout(() => {}, 0)</code> is to call a function, but execute it once every other function in the code has executed.</p>\n<p>Take this example:</p>\n<iframe title=\"Queuing function execution\" src=\"https://stackblitz.com/edit/nodejs-dev-0004-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0004-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">baz</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-->\n\nThis code prints, maybe surprisingly:\n\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span>bash\n\nfoo\n\nbaz\n\nbar</code></pre></div>\n<p>When this code runs, first foo() is called. Inside foo() we first call setTimeout, passing <code class=\"language-text\">bar</code> as an argument, and we instruct it to run immediately as fast as it can, passing 0 as the timer. Then we call baz().</p>\n<p>At this point the call stack looks like this:</p>\n<p><img src=\"images/call-stack-second-example.png\" alt=\"Call stack second example\"></p>\n<p>Here is the execution order for all the functions in our program:</p>\n<p><img src=\"images/execution-order-second-example.png\" alt=\"Execution order second example\"></p>\n<p>Why is this happening?</p>\n<h2>The Message Queue</h2>\n<p>When setTimeout() is called, the Browser or Node.js starts the timer. Once the timer expires, in this case immediately as we put 0 as the timeout, the callback function is put in the <strong>Message Queue</strong>.</p>\n<p>The Message Queue is also where user-initiated events like click or keyboard events, or fetch responses are queued before your code has the opportunity to react to them. Or also DOM events like <code class=\"language-text\">onload</code>.</p>\n<p><strong>The loop gives priority to the call stack, and it first processes everything it finds in the call stack, and once there's nothing in there, it goes to pick up things in the message queue.</strong></p>\n<p>We don't have to wait for functions like <code class=\"language-text\">setTimeout</code>, fetch or other things to do their own work, because they are provided by the browser, and they live on their own threads. For example, if you set the <code class=\"language-text\">setTimeout</code> timeout to 2 seconds, you don't have to wait 2 seconds - the wait happens elsewhere.</p>\n<h2>ES6 Job Queue</h2>\n<p>ECMAScript 2015 introduced the concept of the Job Queue, which is used by Promises (also introduced in ES6/ES2015). It's a way to execute the result of an async function as soon as possible, rather than being put at the end of the call stack.</p>\n<p>Promises that resolve before the current function ends will be executed right after the current function.</p>\n<p>I find nice the analogy of a rollercoaster ride at an amusement park: the message queue puts you at the back of the queue, behind all the other people, where you will have to wait for your turn, while the job queue is the fastpass ticket that lets you take another ride right after you finished the previous one.</p>\n<p>Example:</p>\n<iframe title=\"ECMAScript 2015 Job Queue\" src=\"https://stackblitz.com/edit/nodejs-dev-0005-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0005-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">baz</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">foo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should be right after baz, before bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">baz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This prints</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">foo\n\nbaz\n\nshould be right after baz, before bar\n\nbar\n\n```-->\n\nThat's a big difference between Promises (and Async/await, which is built on promises) and plain old asynchronous functions through `setTimeout()` or other platform APIs.\n\nFinally, here's what the call stack looks like for the example above:\n\n![Call stack third example](images/call-stack-third-example.png)\n\n# 'Understanding process.nextTick()'\n\ndescription: 'The Node.js process.nextTick function interacts with the event loop in a special way'\n\nAs you try to understand the Node.js event loop, one important part of it is `process.nextTick()`.\n\nEvery time the event loop takes a full trip, we call it a tick.\n\nWhen we pass a function to `process.nextTick()`, we instruct the engine to invoke this function at the end of the current operation, before the next event loop tick starts:\n\n```js\n//\nprocess.nextTick(() => {\n    //do something\n});</code></pre></div>\n<p>The event loop is busy processing the current function code.</p>\n<p>When this operation ends, the JS engine runs all the functions passed to <code class=\"language-text\">nextTick</code> calls during that operation.</p>\n<p>It's the way we can tell the JS engine to process a function asynchronously (after the current function), but as soon as possible, not queue it.</p>\n<p>Calling <code class=\"language-text\">setTimeout(() => {}, 0)</code> will execute the function at the end of next tick, much later than when using <code class=\"language-text\">nextTick()</code> which prioritizes the call and executes it just before the beginning of the next tick.</p>\n<p>Use <code class=\"language-text\">nextTick()</code> when you want to make sure that in the next event loop iteration that code is already executed.</p>\n<h1>Introduction to Node.js</h1>\n<p>description: \"Getting started guide to Node.js, the server-side JavaScript runtime environment. Node.js is built on top of the Google Chrome V8 JavaScript engine, and it's mainly used to create web servers - but it's not limited to just that.\"</p>\n<hr>\n<p>Node.js is an open-source and cross-platform JavaScript runtime environment. It is a popular tool for almost any kind of project!</p>\n<p>Node.js runs the V8 JavaScript engine, the core of Google Chrome, outside of the browser. This allows Node.js to be very performant.</p>\n<p>A Node.js app runs in a single process, without creating a new thread for every request. Node.js provides a set of asynchronous I/O primitives in its standard library that prevent JavaScript code from blocking and generally, libraries in Node.js are written using non-blocking paradigms, making blocking behavior the exception rather than the norm.</p>\n<p>When Node.js performs an I/O operation, like reading from the network, accessing a database or the filesystem, instead of blocking the thread and wasting CPU cycles waiting, Node.js will resume the operations when the response comes back.</p>\n<p>This allows Node.js to handle thousands of concurrent connections with a single server without introducing the burden of managing thread concurrency, which could be a significant source of bugs.</p>\n<p>Node.js has a unique advantage because millions of frontend developers that write JavaScript for the browser are now able to write the server-side code in addition to the client-side code without the need to learn a completely different language.</p>\n<p>In Node.js the new ECMAScript standards can be used without problems, as you don't have to wait for all your users to update their browsers - you are in charge of deciding which ECMAScript version to use by changing the Node.js version, and you can also enable specific experimental features by running Node.js with flags.</p>\n<h2>A Vast Number of Libraries</h2>\n<p>npm with its simple structure helped the ecosystem of Node.js proliferate, and now the npm registry hosts over 1,000,000 open source packages you can freely use.</p>\n<h2>An Example Node.js Application</h2>\n<p>The most common example Hello World of Node.js is a web server:</p>\n<iframe title=\"Hello world web server\" src=\"https://stackblitz.com/edit/nodejs-dev-0001-01?embed=1&file=index.js&zenmode=1\" alt=\"nodejs-dev-0001-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> hostname <span class=\"token operator\">=</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/plain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> hostname<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running at http://</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>hostname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>port<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To run this snippet, save it as a <code class=\"language-text\">server.js</code> file and run <code class=\"language-text\">node server.js</code> in your terminal.--></p>\n<p>This code first includes the Node.js <a href=\"https://nodejs.org/api/http.html\"><code class=\"language-text\">http</code> module</a>.</p>\n<p>Node.js has a fantastic <a href=\"https://nodejs.org/api/\">standard library</a>, including first-class support for networking.</p>\n<p>The <code class=\"language-text\">createServer()</code> method of <code class=\"language-text\">http</code> creates a new HTTP server and returns it.</p>\n<p>The server is set to listen on the specified port and host name. When the server is ready, the callback function is called, in this case informing us that the server is running.</p>\n<p>Whenever a new request is received, the <a href=\"https://nodejs.org/api/http.html#http_event_request\"><code class=\"language-text\">request</code> event</a> is called, providing two objects: a request (an <a href=\"https://nodejs.org/api/http.html#http_class_http_incomingmessage\"><code class=\"language-text\">http.IncomingMessage</code></a> object) and a response (an <a href=\"https://nodejs.org/api/http.html#http_class_http_serverresponse\"><code class=\"language-text\">http.ServerResponse</code></a> object).</p>\n<p>Those 2 objects are essential to handle the HTTP call.</p>\n<p>The first provides the request details. In this simple example, this is not used, but you could access the request headers and request data.</p>\n<p>The second is used to return data to the caller.</p>\n<p>In this case with:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>we set the statusCode property to 200, to indicate a successful response.</p>\n<p>We set the Content-Type header:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/plain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>and we close the response, adding the content as an argument to <code class=\"language-text\">end()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Node.js Frameworks and Tools</h2>\n<p>Node.js is a low-level platform. In order to make things easy and exciting for developers, thousands of libraries were built upon Node.js by the community.</p>\n<p>Many of those established over time as popular options. Here is a non-comprehensive list of the ones worth learning:</p>\n<ul>\n<li><a href=\"https://adonisjs.com/\"><strong>AdonisJS</strong></a>: A TypeScript-based fully featured framework highly focused on developer ergonomics, stability, and confidence. Adonis is one of the fastest Node.js web frameworks.</li>\n<li>-</li>\n<li><a href=\"https://eggjs.org/en/\"><strong>Egg.js</strong></a>: A framework to build better enterprise frameworks and apps with Node.js &#x26; Koa.</li>\n<li>-</li>\n<li><a href=\"https://expressjs.com/\"><strong>Express</strong></a>: It provides one of the most simple yet powerful ways to create a web server. Its minimalist approach, unopinionated, focused on the core features of a server, is key to its success.</li>\n<li>-</li>\n<li><a href=\"https://fastify.io/\"><strong>Fastify</strong></a>: A web framework highly focused on providing the best developer experience with the least overhead and a powerful plugin architecture. Fastify is one of the fastest Node.js we</li>\n<li>-</li>\n<li><a href=\"https://feathersjs.com/\"><strong>FeatherJS</strong></a>: Feathers is a lightweight web-framework for creating real-time applications an</li>\n<li>-</li>\n<li><a href=\"https://www.gatsbyjs.com/\"><strong>Gatsby</strong></a>: A <a href=\"https://reactjs.org/\">React</a>-based, <a href=\"https://graphql.org/\">GraphQL</a></li>\n<li>-</li>\n<li><a href=\"https://hapijs.com\"><strong>hapi</strong></a>: A rich framework for building applications and services that enables developers to focus on writing reusable application logic instead of spending time building infrastructure.</li>\n<li>-</li>\n<li><a href=\"images/http://koajs.com/\"><strong>koa</strong></a>: It is built by the same team behind Express, aims to be even simpler and smaller, building on top of years of knowledge. The new project born out of the need to create incompatibl</li>\n<li>-</li>\n<li><a href=\"https://loopback.io/\"><strong>Loopback.io</strong></a>: Makes it easy to build modern applications that require complex integrations.</li>\n<li><a href=\"https://meteor.com\"><strong>Meteor</strong></a>: An incredibly powerful full-stack framework, powering you with an isomorphic approach to building apps with JavaScript, sharing code on the client and the server. Once an off-the-shelf tool that provided everything, now integrates with frontend libs <a href=\"https://reactjs.org/\">React</a>, <a href=\"https://vuejs.org/\">Vue</a>, and <a href=\"https://angular.io\">Angular</a>. Can be used to create mobile apps as well.</li>\n<li><a href=\"https://github.com/zeit/micro\"><strong>Micro</strong></a>: It provides a very lightweight server to create asynchronous HTTP microservices.</li>\n<li><a href=\"https://nestjs.com/\"><strong>NestJS</strong></a>: A TypeScript based progressive Node.js framework for building enterprise-grade efficient, reliable and scalable server-side applications.</li>\n<li><a href=\"https://nextjs.org/\"><strong>Next.js</strong></a>: <a href=\"https://reactjs.org\">React</a> framework that gives you the best developer experience with all the features you need for production: hybrid static &#x26; server rendering, TypeScript support, smart bundling, route pre-fetching, and more.</li>\n<li><a href=\"https://nx.dev/\"><strong>Nx</strong></a>: A toolkit for full-stack monorepo development using NestJS, Express, <a href=\"https://reactjs.org/\">React</a>, <a href=\"https://angular.io\">Angular</a>, and more! Nx helps scale your development from one team building one application to many teams collaborating on multiple applications!</li>\n<li><a href=\"https://sapper.svelte.dev/\"><strong>Sapper</strong></a>: Sapper is a framework for building web applications of all sizes, with a beautiful development experience and flexible filesystem-based routing. Offers SSR and more!</li>\n<li><a href=\"https://socket.io/\"><strong>Socket.io</strong></a>: A real-time communication engine to build network applications.</li>\n<li><a href=\"https://strapi.io/\"><strong>Strapi</strong></a>: Strapi is a flexible, open-source Headless CMS that gives developers the freedom to choose their favorite tools and frameworks while also allowing editors to easily manage and distribute their content. By making the admin panel and API extensible through a plugin system, Strapi enables the world's largest companies to accelerate content delivery while building beautiful digital experiences.</li>\n</ul>\n<h1>'Understanding setImmediate()'</h1>\n<p>description: 'The Node.js setImmediate function interacts with the event loop in a special way'</p>\n<p>When you want to execute some piece of code asynchronously, but as soon as possible, one option is to use the <code class=\"language-text\">setImmediate()</code> function provided by Node.js:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">setImmediate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//run something</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Any function passed as the setImmediate() argument is a callback that's executed in the next iteration of the event loop.</p>\n<p>How is <code class=\"language-text\">setImmediate()</code> different from <code class=\"language-text\">setTimeout(() => {}, 0)</code> (passing a 0ms timeout), and from <code class=\"language-text\">process.nextTick()</code>?</p>\n<p>A function passed to <code class=\"language-text\">process.nextTick()</code> is going to be executed on the current iteration of the event loop, after the current operation ends. This means it will always execute before <code class=\"language-text\">setTimeout</code> and <code class=\"language-text\">setImmediate</code>.</p>\n<p>A <code class=\"language-text\">setTimeout()</code> callback with a 0ms delay is very similar to <code class=\"language-text\">setImmediate()</code>. The execution order will depend on various factors, but they will be both run in the next iteration of the event loop.</p>\n<h1>Discover JavaScript Timers</h1>\n<p>description: 'When writing JavaScript code, you might want to delay the execution of a function. Learn how to use setTimeout and setInterval to schedule functions in the future'</p>\n<h2><code class=\"language-text\">setTimeout()</code></h2>\n<p>When writing JavaScript code, you might want to delay the execution of a function.</p>\n<p>This is the job of <code class=\"language-text\">setTimeout</code>. You specify a callback function to execute later, and a value expressing how later you want it to run, in milliseconds:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// runs after 2 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// runs after 50 milliseconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This syntax defines a new function. You can call whatever other function you want in there, or you can pass an existing function name, and a set of parameters:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">firstParam<span class=\"token punctuation\">,</span> secondParam</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// runs after 2 seconds</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>myFunction<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> firstParam<span class=\"token punctuation\">,</span> secondParam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">setTimeout</code> returns the timer id. This is generally not used, but you can store this id, and clear it if you want to delete this scheduled function execution:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// should run after 2 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// I changed my mind</span>\n\n<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Zero delay</h3>\n<p>If you specify the timeout delay to <code class=\"language-text\">0</code>, the callback function will be executed as soon as possible, but after the current function execution:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'after '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">' before '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code will print</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">before\n\nafter</code></pre></div>\n<p>This is especially useful to avoid blocking the CPU on intensive tasks and let other functions be executed while performing a heavy calculation, by queuing functions in the scheduler.</p>\n<blockquote>\n<p>Some browsers (IE and Edge) implement a <code class=\"language-text\">setImmediate()</code> method that does this same exact functionality, but it's not standard and <a href=\"https://caniuse.com/#feat=setimmediate\">unavailable on other browsers</a>. But it's a standard function in Node.js.</p>\n</blockquote>\n<h2><code class=\"language-text\">setInterval()</code></h2>\n<p><code class=\"language-text\">setInterval</code> is a function similar to <code class=\"language-text\">setTimeout</code>, with a difference: instead of running the callback function once, it will run it forever, at the specific time interval you specify (in milliseconds):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// runs every 2 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The function above runs every 2 seconds unless you tell it to stop, using <code class=\"language-text\">clearInterval</code>, passing it the interval id that <code class=\"language-text\">setInterval</code> returned:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// runs every 2 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It's common to call <code class=\"language-text\">clearInterval</code> inside the setInterval callback function, to let it auto-determine if it should run again or stop. For example this code runs something unless App.somethingIWait has the value <code class=\"language-text\">arrived</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">.</span>somethingIWait <span class=\"token operator\">===</span> <span class=\"token string\">'arrived'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// otherwise do things</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Recursive setTimeout</h2>\n<p><code class=\"language-text\">setInterval</code> starts a function every n milliseconds, without any consideration about when a function finished its execution.</p>\n<p>If a function always takes the same amount of time, it's all fine:</p>\n<p><img src=\"images/setinterval-ok.png\" alt=\"setInterval working fine\"></p>\n<p>Maybe the function takes different execution times, depending on network conditions for example:</p>\n<p><img src=\"images/setinterval-varying-duration.png\" alt=\"setInterval varying duration\"></p>\n<p>And maybe one long execution overlaps the next one:</p>\n<p><img src=\"images/setinterval-overlapping.png\" alt=\"setInterval overlapping\"></p>\n<p>To avoid this, you can schedule a recursive setTimeout to be called when the callback function finishes:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">myFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do something</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>myFunction<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>myFunction<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>to achieve this scenario:</p>\n<p><img src=\"images/recursive-settimeout.png\" alt=\"Recursive setTimeout\"></p>\n<p><code class=\"language-text\">setTimeout</code> and <code class=\"language-text\">setInterval</code> are available in Node.js, through the <a href=\"https://nodejs.org/api/timers.html\">Timers module</a>.</p>\n<p>Node.js also provides <code class=\"language-text\">setImmediate()</code>, which is equivalent to using <code class=\"language-text\">setTimeout(() => {}, 0)</code>, mostly used to work with the Node.js Event Loop.</p>\n<h1>'JavaScript Asynchronous Programming and Callbacks'</h1>\n<p>description: 'JavaScript is synchronous by default, and is single threaded. This means that code cannot create new threads and run in parallel. Find out what asynchronous code means and how it looks like'</p>\n<h2>Asynchronicity in Programming Languages</h2>\n<p>Computers are asynchronous by design.</p>\n<p>Asynchronous means that things can happen independently of the main program flow.</p>\n<p>In the current consumer computers, every program runs for a specific time slot and then it stops its execution to let another program continue their execution. This thing runs in a cycle so fast that it's impossible to notice. We think our computers run many programs simultaneously, but this is an illusion (except on multiprocessor machines).</p>\n<p>Programs internally use <em>interrupts</em>, a signal that's emitted to the processor to gain the attention of the system.</p>\n<p>I won't go into the internals of this, but just keep in mind that it's normal for programs to be asynchronous and halt their execution until they need attention, allowing the computer to execute other things in the meantime. When a program is waiting for a response from the network, it cannot halt the processor until the request finishes.</p>\n<p>Normally, programming languages are synchronous and some provide a way to manage asynchronicity in the language or through libraries. C, Java, C#, PHP, Go, Ruby, Swift, and Python are all synchronous by default. Some of them handle async by using threads, spawning a new process.</p>\n<h2>JavaScript</h2>\n<p>JavaScript is <strong>synchronous</strong> by default and is single threaded. This means that code cannot create new threads and run in parallel.</p>\n<p>Lines of code are executed in series, one after another, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> c <span class=\"token operator\">=</span> a <span class=\"token operator\">*</span> b<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>But JavaScript was born inside the browser, its main job, in the beginning, was to respond to user actions, like <code class=\"language-text\">onClick</code>, <code class=\"language-text\">onMouseOver</code>, <code class=\"language-text\">onChange</code>, <code class=\"language-text\">onSubmit</code> and so on. How could it do this with a synchronous programming model?</p>\n<p>The answer was in its environment. The <strong>browser</strong> provides a way to do it by providing a set of APIs that can handle this kind of functionality.</p>\n<p>More recently, Node.js introduced a non-blocking I/O environment to extend this concept to file access, network calls and so on.</p>\n<h2>Callbacks</h2>\n<p>You can't know when a user is going to click a button. So, you <strong>define an event handler for the click event</strong>. This event handler accepts a function, which will be called when the event is triggered:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//item clicked</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This is the so-called <strong>callback</strong>.</p>\n<p>A callback is a simple function that's passed as a value to another function, and will only be executed when the event happens. We can do this because JavaScript has first-class functions, which can be assigned to variables and passed around to other functions (called <strong>higher-order functions</strong>)</p>\n<p>It's common to wrap all your client code in a <code class=\"language-text\">load</code> event listener on the <code class=\"language-text\">window</code> object, which runs the callback function only when the page is ready:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//window loaded</span>\n    <span class=\"token comment\">//do what you want</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Callbacks are used everywhere, not just in DOM events.</p>\n<p>One common example is by using timers:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// runs after 2 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>XHR requests also accept a callback, in this example by assigning a function to a property that will be called when a particular event occurs (in this case, the state of the request changes):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nxhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">===</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span> <span class=\"token operator\">?</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://yoursite.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Handling errors in callbacks</h2>\n<p>How do you handle errors with callbacks? One very common strategy is to use what Node.js adopted: the first parameter in any callback function is the error object: <strong>error-first callbacks</strong></p>\n<p>If there is no error, the object is <code class=\"language-text\">null</code>. If there is an error, it contains some description of the error and other information.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/file.json'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//handle error</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//no errors, process data</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>The problem with callbacks</h2>\n<p>Callbacks are great for simple cases!</p>\n<p>However every callback adds a level of nesting, and when you have lots of callbacks, the code starts to be complicated very quickly:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            items<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">//your code here</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This is just a simple 4-levels code, but I've seen much more levels of nesting and it's not fun.</p>\n<p>How do we solve this?</p>\n<h2>Alternatives to callbacks</h2>\n<p>Starting with ES6, JavaScript introduced several features that help us with asynchronous code that do not involve using callbacks: Promises (ES6) and Async/Await (ES2017).</p>\n<h1>Understanding JavaScript Promises</h1>\n<p>description: 'Promises are one way to deal with asynchronous code in JavaScript, without writing too many callbacks in your code.'</p>\n<h2>Introduction to promises</h2>\n<iframe title=\"Introduction to promises\" src=\"https://stackblitz.com/edit/nodejs-dev-0006-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0006-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<p>A promise is commonly defined as <strong>a proxy for a value that will eventually become available</strong>.</p>\n<p>Promises are one way to deal with asynchronous code, without getting stuck in <a href=\"images/http://callbackhell.com/\">callback hell</a>.</p>\n<p>Promises have been part of the language for years (standardized and introduced in ES2015), and have recently become more integrated, with <strong>async</strong> and <strong>await</strong> in ES2017.</p>\n<p><strong>Async functions</strong> use promises behind the scenes, so understanding how promises work is fundamental to understanding how <code class=\"language-text\">async</code> and <code class=\"language-text\">await</code> work.</p>\n<h3>How promises work, in brief</h3>\n<p>Once a promise has been called, it will start in a <strong>pending state</strong>. This means that the calling function continues executing, while the promise is pending until it resolves, giving the calling function whatever data was being requested.</p>\n<p>The created promise will eventually end in a <strong>resolved state</strong>, or in a <strong>rejected state</strong>, calling the respective callback functions (passed to <code class=\"language-text\">then</code> and <code class=\"language-text\">catch</code>) upon finishing.</p>\n<h3>Which JS APIs use promises?</h3>\n<p>In addition to your own code and libraries code, promises are used by standard modern Web APIs such as:</p>\n<ul>\n<li>the Battery API</li>\n<li>-</li>\n<li>the Fetch API</li>\n<li>Service Workers</li>\n</ul>\n<p>It's unlikely that in modern JavaScript you'll find yourself <em>not</em> using promises, so let's start diving right into them.</p>\n<hr>\n<h2>Creating a promise</h2>\n<p>The Promise API exposes a Promise constructor, which you initialize using <code class=\"language-text\">new Promise()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">let</span> done <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isItDoneYet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>done<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> workDone <span class=\"token operator\">=</span> <span class=\"token string\">'Here is the thing I built'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>workDone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> why <span class=\"token operator\">=</span> <span class=\"token string\">'Still working on something else'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>why<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see, the promise checks the <code class=\"language-text\">done</code> global constant, and if that's true, the promise goes to a <strong>resolved</strong> state (since the <code class=\"language-text\">resolve</code> callback was called); otherwise, the <code class=\"language-text\">reject</code> callback is executed, putting the promise in a rejected state. (If none of these functions is called in the execution path, the promise will remain in a pending state)</p>\n<p>A more common example you may come across is a technique called <strong>Promisifying</strong>. This technique is a way to be able to use a classic JavaScript function that takes a callback, and have it return a promise:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFile</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// calling `reject` will cause the promise to fail with or without the error passed as an argument</span>\n\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// and we don't want to go any further</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">getFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/etc/passwd'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>In recent versions of Node.js, you won't have to do this manual conversion for a lot of the API. There is a promisifying function available in the <a href=\"https://nodejs.org/docs/latest-v11.x/api/util.html#util_util_promisify_original\">util module</a> that will do this for you, given that the function you're promisifying has the correct signature.</p>\n</blockquote>\n<hr>\n<h2>Consuming a promise</h2>\n<p>Now let's see how the promise can be <em>consumed</em> or used.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> isItDoneYet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* ... as above ... */</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//...</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">checkIfItsDone</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    isItDoneYet\n\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ok</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ok<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Running <code class=\"language-text\">checkIfItsDone()</code> will specify functions to execute when the <code class=\"language-text\">isItDoneYet</code> promise resolves (in the <code class=\"language-text\">then</code> call) or rejects (in the <code class=\"language-text\">catch</code> call).</p>\n<hr>\n<h2>Chaining promises</h2>\n<p>A promise can be returned to another promise, creating a chain of promises.</p>\n<p>A great example of chaining promises is the Fetch API, which we can use to get a resource and queue a chain of promises to execute when the resource is fetched.</p>\n<p>The Fetch API is a promise-based mechanism, and calling <code class=\"language-text\">fetch()</code> is equivalent to defining our own promise using <code class=\"language-text\">new Promise()</code>.</p>\n<h3>Example of chaining promises</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">status</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> response<span class=\"token punctuation\">.</span>status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>statusText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">json</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todos.json'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span> <span class=\"token comment\">// note that the `status` function is actually **called** here, and that it **returns a promise***</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span> <span class=\"token comment\">// likewise, the only difference here is that the `json` function here returns a promise that resolves with `data`</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ... which is why `data` shows up here as the first parameter to the anonymous function</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request succeeded with JSON response'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request failed'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<code>\n<a href=\"https://www.npmjs.com/package/node-fetch\">node-fetch</a>\n</code> is minimal code for window.fetch compatible API on Node.js runtime.\n</blockquote>\n<p>In this example, we call <code class=\"language-text\">fetch()</code> to get a list of TODO items from the <code class=\"language-text\">todos.json</code> file found in the domain root, and we create a chain of promises.</p>\n<p>Running <code class=\"language-text\">fetch()</code> returns a <a href=\"https://fetch.spec.whatwg.org/#concept-response\">response</a>, which has many properties, and within those we reference:</p>\n<ul>\n<li><code class=\"language-text\">status</code>, a numeric value representing the HTTP status code</li>\n<li>-</li>\n<li><code class=\"language-text\">statusText</code>, a status message, which is <code class=\"language-text\">OK</code> if the request succeeded</li>\n</ul>\n<p><code class=\"language-text\">response</code> also has a <code class=\"language-text\">json()</code> method, which returns a promise that will resolve with the content of the body processed and transformed into JSON.</p>\n<p>So given those promises, this is what happens: the first promise in the chain is a function that we defined, called <code class=\"language-text\">status()</code>, that checks the response status and if it's not a success response (between 200 and 299), it rejects the promise.</p>\n<p>This operation will cause the promise chain to skip all the chained promises listed and will skip directly to the <code class=\"language-text\">catch()</code> statement at the bottom, logging the <code class=\"language-text\">Request failed</code> text along with the error message.</p>\n<p>If that succeeds instead, it calls the <code class=\"language-text\">json()</code> function we defined. Since the previous promise, when successful, returned the <code class=\"language-text\">response</code> object, we get it as an input to the second promise.</p>\n<p>In this case, we return the data JSON processed, so the third promise receives the JSON directly:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request succeeded with JSON response'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>and we simply log it to the console.</p>\n<hr>\n<h2>Handling errors</h2>\n<p>When anything in the chain of promises fails and raises an error or rejects the promise, the control goes to the nearest <code class=\"language-text\">catch()</code> statement down the chain.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// or</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Cascading errors</h3>\n<p>If inside the <code class=\"language-text\">catch()</code> you raise an error, you can append a second <code class=\"language-text\">catch()</code> to handle it, and so on.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>Orchestrating promises</h2>\n<h3><code class=\"language-text\">Promise.all()</code></h3>\n<p>If you need to synchronize different promises, <code class=\"language-text\">Promise.all()</code> helps you define a list of promises, and execute something when they are all resolved.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> f1 <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/something.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> f2 <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/something2.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>f1<span class=\"token punctuation\">,</span> f2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Array of results'</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The ES2015 destructuring assignment syntax allows you to also do</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>f1<span class=\"token punctuation\">,</span> f2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>res1<span class=\"token punctuation\">,</span> res2<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Results'</span><span class=\"token punctuation\">,</span> res1<span class=\"token punctuation\">,</span> res2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You are not limited to using <code class=\"language-text\">fetch</code> of course, <strong>any promise can be used in this fashion</strong>.</p>\n<h3><code class=\"language-text\">Promise.race()</code></h3>\n<p><code class=\"language-text\">Promise.race()</code> runs when the first of the promises you pass to it settles (resolves or rejects), and it runs the attached callback just once, with the result of the first promise settled.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> first <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'first'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> second <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'second'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">race</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// second</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3><code class=\"language-text\">Promise.any()</code></h3>\n<p><code class=\"language-text\">Promise.any()</code> settles when any of the promises you pass to it fulfill or all of the promises get rejected. It returns a single promise that resolves with the value from the first promise that is fulfilled. If all promises are rejected, then the returned promise is rejected with an <code class=\"language-text\">AggregateError</code>.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> first <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>reject<span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'first'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> second <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>reject<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'second'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> second<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// AggregateError</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Common errors</h2>\n<h3>Uncaught TypeError: undefined is not a promise</h3>\n<p>If you get the <code class=\"language-text\">Uncaught TypeError: undefined is not a promise</code> error in the console, make sure you use <code class=\"language-text\">new Promise()</code> instead of just <code class=\"language-text\">Promise()</code></p>\n<h3>UnhandledPromiseRejectionWarning</h3>\n<p>This means that a promise you called rejected, but there was no <code class=\"language-text\">catch</code> used to handle the error. Add a <code class=\"language-text\">catch</code> after the offending <code class=\"language-text\">then</code> to handle this properly.</p>\n<h1>'Modern Asynchronous JavaScript with Async and Await'</h1>\n<p>description: 'Discover the modern approach to asynchronous functions in JavaScript. JavaScript evolved in a very short time from callbacks to Promises, and since ES2017 asynchronous JavaScript is even simpler with the async/await syntax'</p>\n<h2>Introduction</h2>\n<p>JavaScript evolved in a very short time from callbacks to promises (ES2015), and since ES2017 asynchronous JavaScript is even simpler with the async/await syntax.</p>\n<p>Async functions are a combination of promises and generators, and basically, they are a higher level abstraction over promises. Let me repeat: <strong>async/await is built on promises</strong>.</p>\n<h2>Why were async/await introduced?</h2>\n<p>They reduce the boilerplate around promises, and the \"don't break the chain\" limitation of chaining promises.</p>\n<p>When Promises were introduced in ES2015, they were meant to solve a problem with asynchronous code, and they did, but over the 2 years that separated ES2015 and ES2017, it was clear that <em>promises could not be the ultimate solution</em>.</p>\n<p>Promises were introduced to solve the famous <em>callback hell</em> problem, but they introduced complexity on their own, and syntax complexity.</p>\n<p>They were good primitives around which a better syntax could be exposed to the developers, so when the time was right we got <strong>async functions</strong>.</p>\n<p>They make the code look like it's synchronous, but it's asynchronous and non-blocking behind the scenes.</p>\n<h2>How it works</h2>\n<p>An async function returns a promise, like in this example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomethingAsync</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I did something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When you want to <strong>call</strong> this function you prepend <code class=\"language-text\">await</code>, and <strong>the calling code will stop until the promise is resolved or rejected</strong>. One caveat: the client function must be defined as <code class=\"language-text\">async</code>. Here's an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">doSomethingAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>A quick example</h2>\n<p>This is a simple example of async/await used to run a function asynchronously:</p>\n<iframe title=\"Modern Asynchronous JavaScript with Async and Await\" src=\"https://stackblitz.com/edit/nodejs-dev-0007-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0007-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomethingAsync</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I did something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> <span class=\"token function\">doSomethingAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Before'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'After'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The above code will print the following to the browser console:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Before\n\nAfter\n\nI did something //after 3s\n\n```-->\n\n## Promise all the things\n\nPrepending the `async` keyword to any function means that the function will return a promise.\n\nEven if it's not doing so explicitly, it will internally make it return a promise.\n\nThis is why this code is valid:\n\n```js\n//\nconst aFunction = async () => {\n    return 'test';\n};\n\naFunction().then(alert); // This will alert 'test'</code></pre></div>\n<p>and it's the same as:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">aFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">aFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// This will alert 'test'</span></code></pre></div>\n<h2>The code is much simpler to read</h2>\n<p>As you can see in the example above, our code looks very simple. Compare it to code using plain promises, with chaining and callback functions.</p>\n<p>And this is a very simple example, the major benefits will arise when the code is much more complex.</p>\n<p>For example here's how you would get a JSON resource, and parse it, using promises:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFirstUserData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users.json'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// get users list</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// parse JSON</span>\n\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// pick first user</span>\n\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// get user data</span>\n\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">userResponse</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> userResponse<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// parse JSON</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">getFirstUserData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And here is the same functionality provided using await/async:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFirstUserData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// get users list</span>\n\n    <span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// parse JSON</span>\n\n    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> users<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// pick first user</span>\n\n    <span class=\"token keyword\">const</span> userResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>user<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// get user data</span>\n\n    <span class=\"token keyword\">const</span> userData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userResponse<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// parse JSON</span>\n\n    <span class=\"token keyword\">return</span> userData<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">getFirstUserData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Multiple async functions in series</h2>\n<p>Async functions can be chained very easily, and the syntax is much more readable than with plain promises:</p>\n<iframe title=\"Multiple async functions in series\" src=\"https://stackblitz.com/edit/nodejs-dev-0008-01?index.js&zenmode=1&view=editor\" alt=\"nodejs-dev-0008-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promiseToDoSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I did something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">watchOverSomeoneDoingSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">promiseToDoSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> something <span class=\"token operator\">+</span> <span class=\"token string\">' and I watched'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">watchOverSomeoneWatchingSomeoneDoingSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">watchOverSomeoneDoingSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> something <span class=\"token operator\">+</span> <span class=\"token string\">' and I watched as well'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">watchOverSomeoneWatchingSomeoneDoingSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Will print:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I did something and I watched and I watched as well\n\n```-->\n\n## Easier debugging\n\nDebugging promises is hard because the debugger will not step over asynchronous code.\n\nAsync/await makes this very easy because to the compiler it's just like synchronous code.\n\n# The Node.js Event emitter\n\ndescription: 'How to work with custom events in Node.js'\n\nIf you worked with JavaScript in the browser, you know how much of the interaction of the user is handled through events: mouse clicks, keyboard button presses, reacting to mouse movements, and so on.\n\nOn the backend side, Node.js offers us the option to build a similar system using the [`events` module](https://nodejs.org/api/events.html).\n\nThis module, in particular, offers the `EventEmitter` class, which we'll use to handle our events.\n\nYou initialize that using\n\n```js\n//\nconst EventEmitter = require('events');\n\nconst eventEmitter = new EventEmitter();</code></pre></div>\n<p>This object exposes, among many others, the <code class=\"language-text\">on</code> and <code class=\"language-text\">emit</code> methods.</p>\n<ul>\n<li><code class=\"language-text\">emit</code> is used to trigger an event</li>\n<li>-</li>\n<li><code class=\"language-text\">on</code> is used to add a callback function that's going to be executed when the event is triggered</li>\n</ul>\n<p>For example, let's create a <code class=\"language-text\">start</code> event, and as a matter of providing a sample, we react to that by just logging to the console:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'started'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When we run</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>the event handler function is triggered, and we get the console log.</p>\n<p>You can pass arguments to the event handler by passing them as additional arguments to <code class=\"language-text\">emit()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">started </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>number<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Multiple arguments:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">start<span class=\"token punctuation\">,</span> end</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">started from </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>start<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>end<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\neventEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'start'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The EventEmitter object also exposes several other methods to interact with events, like</p>\n<ul>\n<li><code class=\"language-text\">once()</code>: add a one-time listener</li>\n<li>-</li>\n<li><code class=\"language-text\">removeListener()</code> / <code class=\"language-text\">off()</code>: remove an event listener from an event</li>\n<li><code class=\"language-text\">removeAllListeners()</code>: remove all listeners for an event</li>\n</ul>\n<p>You can read all their details on the events module page at <a href=\"https://nodejs.org/api/events.html\">https://nodejs.org/api/events.html</a></p>\n<h1>'Build an HTTP Server'</h1>\n<p>description: 'How to build an HTTP server with Node.js'</p>\n<p>Here is a sample Hello World HTTP web server:</p>\n<iframe title=\"Build an HTTP Server\" src=\"https://stackblitz.com/edit/nodejs-dev-0009-01?index.js&zenmode=1\" alt=\"nodejs-dev-0009-01 on StackBlitz\" style=\"height: 400px; width: 100%; border: 0;\">\n</iframe>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> port <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">200</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;h1>Hello, World!&lt;/h1>'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Server running at port </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>port<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-->\n\nLet's analyze it briefly. We include the [</span><span class=\"token template-punctuation string\">`</span></span>http<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> module](https://nodejs.org/api/http.html).\n\nWe use the module to create an HTTP server.\n\nThe server is set to listen on the specified port, </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token number\">3000</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">. When the server is ready, the </span><span class=\"token template-punctuation string\">`</span></span>listen<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> callback function is called.\n\nThe callback function we pass is the one that's going to be executed upon every request that comes in. Whenever a new request is received, the [</span><span class=\"token template-punctuation string\">`</span></span>request<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> event](https://nodejs.org/api/http.html#http_event_request) is called, providing two objects: a request (an [</span><span class=\"token template-punctuation string\">`</span></span>http<span class=\"token punctuation\">.</span>IncomingMessage<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">](https://nodejs.org/api/http.html#http_class_http_incomingmessage) object) and a response (an [</span><span class=\"token template-punctuation string\">`</span></span>http<span class=\"token punctuation\">.</span>ServerResponse<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">](https://nodejs.org/api/http.html#http_class_http_serverresponse) object).\n\n</span><span class=\"token template-punctuation string\">`</span></span>request<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> provides the request details. Through it, we access the request headers and request data.\n\n</span><span class=\"token template-punctuation string\">`</span></span>response<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> is used to populate the data we're going to return to the client.\n\nIn this case with\n\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span>js\n<span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>we set the statusCode property to 200, to indicate a successful response.</p>\n<p>We also set the Content-Type header:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>and we end close the response, adding the content as an argument to <code class=\"language-text\">end()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nres<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;h1>Hello, World!&lt;/h1>'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>'Making HTTP requests with Node.js'</h1>\n<p>description: 'How to perform HTTP requests with Node.js using GET, POST, PUT and DELETE'</p>\n<h2>Perform a GET Request</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'example.com'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token number\">443</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/todos'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">statusCode: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Perform a POST Request</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>\n    <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> <span class=\"token string\">'Buy the milk üçº'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'whatever.com'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token number\">443</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/todos'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">'Content-Length'</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>length\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">statusCode: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>PUT and DELETE</h2>\n<p>PUT and DELETE requests use the same POST request format - you just need to change the <code class=\"language-text\">options.method</code> value to the appropriate method.</p>\n<h1>Make an HTTP POST request using Node.js</h1>\n<p>description: 'Find out how to make an HTTP POST request using Node.js'</p>\n<p>There are many ways to perform an HTTP POST request in Node.js, depending on the abstraction level you want to use.</p>\n<p>The simplest way to perform an HTTP request using Node.js is to use the <a href=\"https://github.com/axios/axios\">Axios library</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\naxios\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://whatever.com/todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> <span class=\"token string\">'Buy the milk'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">statusCode: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>status<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Axios requires the use of a 3rd party library.</p>\n<p>A POST request is possible just using the Node.js standard modules, although it's more verbose than the two preceding options:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> <span class=\"token string\">'Buy the milk'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'whatever.com'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">port</span><span class=\"token operator\">:</span> <span class=\"token number\">443</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/todos'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token string-property property\">'Content-Length'</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>length\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">statusCode: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>statusCode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">d</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Get HTTP request body data using Node.js</h1>\n<p>description: 'Find out how to extract the data sent as JSON through an HTTP request body using Node.js'</p>\n<p>Here is how you can extract the data that was sent as JSON in the request body.</p>\n<p>If you are using Express, that's quite simple: use the <code class=\"language-text\">body-parser</code> Node.js module.</p>\n<p>For example, to get the body of this request:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://whatever.com/todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">todo</span><span class=\"token operator\">:</span> <span class=\"token string\">'Buy the milk'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This is the matching server-side code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n    express<span class=\"token punctuation\">.</span><span class=\"token function\">urlencoded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">extended</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/todos'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you're not using Express and you want to do this in vanilla Node.js, you need to do a bit more work, of course, as Express abstracts a lot of this for you.</p>\n<p>The key thing to understand is that when you initialize the HTTP server using <code class=\"language-text\">http.createServer()</code>, the callback is called when the server got all the HTTP headers, but not the request body.</p>\n<p>The <code class=\"language-text\">request</code> object passed in the connection callback is a stream.</p>\n<p>So, we must listen for the body content to be processed, and it's processed in chunks.</p>\n<p>We first get the data by listening to the stream <code class=\"language-text\">data</code> events, and when the data ends, the stream <code class=\"language-text\">end</code> event is called, once:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// we can access HTTP headers</span>\n\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Data chunk available: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>chunk<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//end of data</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>So to access the data, assuming we expect to receive a string, we must concatenate the chunks into a string when listening to the stream <code class=\"language-text\">data</code>, and when the stream <code class=\"language-text\">end</code>, we parse the string to JSON:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        data <span class=\"token operator\">+=</span> chunk<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    req<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Buy the milk'</span>\n\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Starting from Node.js v10 a <code class=\"language-text\">for await .. of</code> syntax is available for use. It simplifies the example above and makes it look more linear:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> buffers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token keyword\">await</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> chunk <span class=\"token keyword\">of</span> req<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        buffers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>buffers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>todo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Buy the milk'</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>How to install Node.js</h1>\n<p>description: 'How you can install Node.js on your system: a package manager, the official website installer or nvm'</p>\n<p>Node.js can be installed in different ways. This post highlights the most common and convenient ones.</p>\n<p>Official packages for all the major platforms are available at <a href=\"https://nodejs.dev/download/\">https://nodejs.dev/download/</a>.</p>\n<p>One very convenient way to install Node.js is through a package manager. In this case, every operating system has its own.</p>\n<p>Other package managers for MacOS, Linux, and Windows are listed in <a href=\"https://nodejs.dev/download/package-manager/\">https://nodejs.dev/download/package-manager/</a></p>\n<p><code class=\"language-text\">nvm</code> is a popular way to run Node.js. It allows you to easily switch the Node.js version, and install new versions to try and easily rollback if something breaks, for example.</p>\n<p>It is also very useful to test your code with old Node.js versions.</p>\n<p>See <a href=\"https://github.com/nvm-sh/nvm\">https://github.com/nvm-sh/nvm</a> for more information about this option.</p>\n<p>In any case, when Node.js is installed you'll have access to the <code class=\"language-text\">node</code> executable program in the command line.</p>\n<h1>'Working with file descriptors in Node.js'</h1>\n<p>description: 'How to interact with file descriptors using Node.js'</p>\n<p>Before you're able to interact with a file that sits in your filesystem, you must get a file descriptor.</p>\n<p>A file descriptor is a reference to an open file, a number (fd) returned by opening the file using the <code class=\"language-text\">open()</code> method offered by the <code class=\"language-text\">fs</code> module. This number (<code class=\"language-text\">fd</code>) uniquely identifies an open file in operating system:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> fd</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//fd is our file descriptor</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Notice the <code class=\"language-text\">r</code> we used as the second parameter to the <code class=\"language-text\">fs.open()</code> call.</p>\n<p>That flag means we open the file for reading.</p>\n<p>Other flags you'll commonly use are</p>\n<ul>\n<li><code class=\"language-text\">r+</code> open the file for reading and writing, if file don't exist it won't be created.</li>\n<li>-</li>\n<li><code class=\"language-text\">w+</code> open the file for reading and writing, positioning the stream at the beginning of the file. The file is create</li>\n<li>-</li>\n<li><code class=\"language-text\">a</code> open the file for writing, positioning the stream at the end of the file. The file is created if not existing</li>\n<li><code class=\"language-text\">a+</code> open the file for reading and writing, positioning the stream at the end of the file. The file is created if not existing</li>\n</ul>\n<p>You can also open the file by using the <code class=\"language-text\">fs.openSync</code> method, which returns the file descriptor, instead of providing it in a callback:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fd <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">openSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once you get the file descriptor, in whatever way you choose, you can perform all the operations that require it, like calling <code class=\"language-text\">fs.close()</code> and many other operations that interact with the filesystem.</p>\n<h1>'Node.js file stats'</h1>\n<p>description: 'How to get the details of a file using Node.js'</p>\n<p>Every file comes with a set of details that we can inspect using Node.js.</p>\n<p>In particular, using the <code class=\"language-text\">stat()</code> method provided by the <code class=\"language-text\">fs</code> module.</p>\n<p>You call it passing a file path, and once Node.js gets the file details it will call the callback function you pass, with 2 parameters: an error message, and the file stats:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">stat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> stats</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//we have access to the file stats in `stats`</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Node.js provides also a sync method, which blocks the thread until the file stats are ready:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> stats <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">statSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The file information is included in the stats variable. What kind of information can we extract using the stats?</p>\n<p>A lot, including:</p>\n<ul>\n<li>if the file is a directory or a file, using <code class=\"language-text\">stats.isFile()</code> and <code class=\"language-text\">stats.isDirectory()</code></li>\n<li>-</li>\n<li>if the file is a symbolic link using <code class=\"language-text\">stats.isSymbolicLink()</code></li>\n<li>the file size in bytes using <code class=\"language-text\">stats.size</code>.</li>\n</ul>\n<p>There are other advanced methods, but the bulk of what you'll use in your day-to-day programming is this.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">stat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> stats</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    stats<span class=\"token punctuation\">.</span><span class=\"token function\">isFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n\n    stats<span class=\"token punctuation\">.</span><span class=\"token function\">isDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//false</span>\n\n    stats<span class=\"token punctuation\">.</span><span class=\"token function\">isSymbolicLink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//false</span>\n\n    stats<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span> <span class=\"token comment\">//1024000 //= 1MB</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>'Node.js File Paths'</h1>\n<p>description: 'How to interact with file paths and manipulate them in Node.js'</p>\n<p>Every file in the system has a path.</p>\n<p>On Linux and macOS, a path might look like:</p>\n<p><code class=\"language-text\">/users/joe/file.txt</code></p>\n<p>while Windows computers are different, and have a structure such as:</p>\n<p><code class=\"language-text\">C:\\users\\joe\\file.txt</code></p>\n<p>You need to pay attention when using paths in your applications, as this difference must be taken into account.</p>\n<p>You include this module in your files using</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>and you can start using its methods.</p>\n<h2>Getting information out of a path</h2>\n<p>Given a path, you can extract information out of it using those methods:</p>\n<ul>\n<li><code class=\"language-text\">dirname</code>: get the parent folder of a file</li>\n<li>-</li>\n<li><code class=\"language-text\">basename</code>: get the filename part</li>\n<li><code class=\"language-text\">extname</code>: get the file extension</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> notes <span class=\"token operator\">=</span> <span class=\"token string\">'/users/joe/notes.txt'</span><span class=\"token punctuation\">;</span>\n\npath<span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// /users/joe</span>\n\npath<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// notes.txt</span>\n\npath<span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// .txt</span></code></pre></div>\n<p>You can get the file name without the extension by specifying a second argument to <code class=\"language-text\">basename</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span>notes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//notes</span></code></pre></div>\n<h2>Working with paths</h2>\n<p>You can join two or more parts of a path by using <code class=\"language-text\">path.join()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'joe'</span><span class=\"token punctuation\">;</span>\n\npath<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'users'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'notes.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/users/joe/notes.txt'</span></code></pre></div>\n<p>You can get the absolute path calculation of a relative path using <code class=\"language-text\">path.resolve()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/Users/joe/joe.txt' if run from my home folder</span></code></pre></div>\n<p>In this case Node.js will simply append <code class=\"language-text\">/joe.txt</code> to the current working directory. If you specify a second parameter folder, <code class=\"language-text\">resolve</code> will use the first as a base for the second:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tmp'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/Users/joe/tmp/joe.txt' if run from my home folder</span></code></pre></div>\n<p>If the first parameter starts with a slash, that means it's an absolute path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/etc'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/etc/joe.txt'</span></code></pre></div>\n<p><code class=\"language-text\">path.normalize()</code> is another useful function, that will try and calculate the actual path, when it contains relative specifiers like <code class=\"language-text\">.</code> or <code class=\"language-text\">..</code>, or double slashes:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">normalize</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users/joe/..//test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/users/test.txt'</span></code></pre></div>\n<p><strong>Neither resolve nor normalize will check if the path exists</strong>. They just calculate a path based on the information they got.</p>\n<h1>'Reading files with Node.js'</h1>\n<p>description: 'How to read files using Node.js'</p>\n<p>The simplest way to read a file in Node.js is to use the <code class=\"language-text\">fs.readFile()</code> method, passing it the file path, encoding and a callback function that will be called with the file data (and the error):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Alternatively, you can use the synchronous version <code class=\"language-text\">fs.readFileSync()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Both <code class=\"language-text\">fs.readFile()</code> and <code class=\"language-text\">fs.readFileSync()</code> read the full content of the file in memory before returning the data.</p>\n<p>This means that big files are going to have a major impact on your memory consumption and speed of execution of the program.</p>\n<p>In this case, a better option is to read the file content using streams.</p>\n<h1>'Writing files with Node.js'</h1>\n<p>description: 'How to write files using Node.js'</p>\n<p>The easiest way to write to files in Node.js is to use the <code class=\"language-text\">fs.writeFile()</code> API.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//file written successfully</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Alternatively, you can use the synchronous version <code class=\"language-text\">fs.writeFileSync()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//file written successfully</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>By default, this API will <strong>replace the contents of the file</strong> if it does already exist.</p>\n<p>You can modify the default by specifying a flag:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">flag</span><span class=\"token operator\">:</span> <span class=\"token string\">'a+'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The flags you'll likely use are</p>\n<ul>\n<li><code class=\"language-text\">r+</code> open the file for reading and writing</li>\n<li>-</li>\n<li><code class=\"language-text\">w+</code> open the file for reading and writing, positioning the stream at the beginning of the file. The file is created if</li>\n<li>-</li>\n<li><code class=\"language-text\">a</code> open the file for writing, positioning the stream at the end of the file. The file is created if it does not exist</li>\n<li><code class=\"language-text\">a+</code> open the file for reading and writing, positioning the stream at the end of the file. The file is created if it does not exist</li>\n</ul>\n<p>(you can find more flags at <a href=\"https://nodejs.org/api/fs.html#fs_file_system_flags\">https://nodejs.org/api/fs.html#fs_file_system_flags</a>)</p>\n<h2>Append to a file</h2>\n<p>A handy method to append content to the end of a file is <code class=\"language-text\">fs.appendFile()</code> (and its <code class=\"language-text\">fs.appendFileSync()</code> counterpart):</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">appendFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file.log'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//done!</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Using streams</h2>\n<p>All those methods write the full content to the file before returning the control back to your program (in the async version, this means executing the callback)</p>\n<p>In this case, a better option is to write the file content using streams.</p>\n<h1>'Working with folders in Node.js'</h1>\n<p>description: 'How to interact with folders using Node.js'</p>\n<p>The Node.js <code class=\"language-text\">fs</code> core module provides many handy methods you can use to work with folders.</p>\n<h2>Check if a folder exists</h2>\n<p>Use <code class=\"language-text\">fs.access()</code> to check if the folder exists and Node.js can access it with its permissions.</p>\n<h2>Create a new folder</h2>\n<p>Use <code class=\"language-text\">fs.mkdir()</code> or <code class=\"language-text\">fs.mkdirSync()</code> to create a new folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> folderName <span class=\"token operator\">=</span> <span class=\"token string\">'/Users/joe/test'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span>folderName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span>folderName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Read the content of a directory</h2>\n<p>Use <code class=\"language-text\">fs.readdir()</code> or <code class=\"language-text\">fs.readdirSync()</code> to read the contents of a directory.</p>\n<p>This piece of code reads the content of a folder, both files and subfolders, and returns their relative path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> folderPath <span class=\"token operator\">=</span> <span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can get the full path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fileName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">,</span> fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can also filter the results to only return the files, and exclude the folders:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isFile</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">lstatSync</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fileName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">,</span> fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>isFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Rename a folder</h2>\n<p>Use <code class=\"language-text\">fs.rename()</code> or <code class=\"language-text\">fs.renameSync()</code> to rename folder. The first parameter is the current path, the second the new path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/Users/roger'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//done</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">fs.renameSync()</code> is the synchronous version:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">renameSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/Users/roger'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Remove a folder</h2>\n<p>Use <code class=\"language-text\">fs.rmdir()</code> or <code class=\"language-text\">fs.rmdirSync()</code> to remove a folder.</p>\n<p>Removing a folder that has content can be more complicated than you need. You can pass the option <code class=\"language-text\">{ recursive: true }</code> to recursively remove the contents.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">rmdir</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">recursive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is deleted!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><strong>NOTE:</strong> In Node <code class=\"language-text\">v16.x</code> the option <code class=\"language-text\">recursive</code> is <strong>deprecated</strong> for <code class=\"language-text\">fs.rmdir</code> of callback API, instead use <code class=\"language-text\">fs.rm</code> to delete folders that have content in them:</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">rm</span><span class=\"token punctuation\">(</span>dir<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">recursive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">force</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dir<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> is deleted!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or you can install and make use of the <a href=\"https://www.npmjs.com/package/fs-extra\"><code class=\"language-text\">fs-extra</code></a> module, which is very popular and well maintained. It's a drop-in replacement of the <code class=\"language-text\">fs</code> module, which provides more features on top of it.</p>\n<p>In this case the <code class=\"language-text\">remove()</code> method is what you want.</p>\n<p>Install it using</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> fs-extra</code></pre></div>\n<p>and use it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs-extra'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> folder <span class=\"token operator\">=</span> <span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>folder<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>It can also be used with promises:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>folder<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//done</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>or with async/await:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">removeFolder</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">folder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>folder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//done</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> folder <span class=\"token operator\">=</span> <span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">removeFolder</span><span class=\"token punctuation\">(</span>folder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>'The Node.js fs module'</h1>\n<p>description: 'The fs module of Node.js provides useful functions to interact with the file system'</p>\n<p>The <code class=\"language-text\">fs</code> module provides a lot of very useful functionality to access and interact with the file system.</p>\n<p>There is no need to install it. Being part of the Node.js core, it can be used by simply requiring it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Once you do so, you have access to all its methods, which include:</p>\n<ul>\n<li><code class=\"language-text\">fs.access()</code>: check if the file exists and Node.js can access it with its permissions</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.appendFile()</code>: append data to a file. If the file does not exist, it's created</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.chmod()</code>: change the permissions of</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.chown()</code>: change the owner and group of a file speci</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.close()</code>: close a file descriptor</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.copyFile()</code>: copies a file</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.createReadStream()</code>: create a readable file st</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.createWriteStream()</code>: create a writable file str</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.link()</code>: create a new hard link to a</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.mkdir()</code>: create a new folder</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.mkdtemp()</code>: create a temporary directory</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.open()</code>: set the file mode</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.readdir()</code>: read the contents of a directory</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.readFile()</code>: read the content of a file. Related: <code class=\"language-text\">fs.read()</code></li>\n<li><code class=\"language-text\">fs.readlink()</code>: read the value of a symbolic link</li>\n<li><code class=\"language-text\">fs.realpath()</code>: resolve relative file path pointers (<code class=\"language-text\">.</code>, <code class=\"language-text\">..</code>) to the full path</li>\n<li><code class=\"language-text\">fs.rename()</code>: rename a file or folder</li>\n<li><code class=\"language-text\">fs.rmdir()</code>: remove a folder</li>\n<li><code class=\"language-text\">fs.stat()</code>: returns the status of the file identified by the filename passed. Related: <code class=\"language-text\">fs.fstat()</code>, <code class=\"language-text\">fs.lstat()</code></li>\n<li><code class=\"language-text\">fs.symlink()</code>: create a new symbolic link to a file</li>\n<li><code class=\"language-text\">fs.truncate()</code>: truncate to the specified length the file identified by the filename passed. Related: <code class=\"language-text\">fs.ftruncate()</code></li>\n<li><code class=\"language-text\">fs.unlink()</code>: remove a file or a symbolic link</li>\n<li><code class=\"language-text\">fs.unwatchFile()</code>: stop watching for changes on a file</li>\n<li><code class=\"language-text\">fs.utimes()</code>: change the timestamp of the file identified by the filename passed. Related: <code class=\"language-text\">fs.futimes()</code></li>\n<li><code class=\"language-text\">fs.watchFile()</code>: start watching for changes on a file. Related: <code class=\"language-text\">fs.watch()</code></li>\n<li><code class=\"language-text\">fs.writeFile()</code>: write data to a file. Related: <code class=\"language-text\">fs.write()</code></li>\n</ul>\n<p>One peculiar thing about the <code class=\"language-text\">fs</code> module is that all the methods are asynchronous by default, but they can also work synchronously by appending <code class=\"language-text\">Sync</code>.</p>\n<p>For example:</p>\n<ul>\n<li><code class=\"language-text\">fs.rename()</code></li>\n<li>-</li>\n<li>`fs.renameSync</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.write()</code></li>\n<li><code class=\"language-text\">fs.writeSync()</code></li>\n</ul>\n<p>This makes a huge difference in your application flow.</p>\n<blockquote>\n<p>Node.js 10 includes <a href=\"https://nodejs.org/api/fs.html#fs_fs_promises_api\">experimental support</a> for a promise based API</p>\n</blockquote>\n<p>For example let's examine the <code class=\"language-text\">fs.rename()</code> method. The asynchronous API is used with a callback:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">rename</span><span class=\"token punctuation\">(</span><span class=\"token string\">'before.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'after.json'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//done</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>A synchronous API can be used like this, with a try/catch block to handle errors:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">renameSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'before.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'after.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//done</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The key difference here is that the execution of your script will block in the second example, until the file operation succeeded.</p>\n<h1>'The Node.js path module'</h1>\n<p>description: 'The path module of Node.js provides useful functions to interact with file paths'</p>\n<p>The <code class=\"language-text\">path</code> module provides a lot of very useful functionality to access and interact with the file system.</p>\n<p>There is no need to install it. Being part of the Node.js core, it can be used by simply requiring it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This module provides <code class=\"language-text\">path.sep</code> which provides the path segment separator (<code class=\"language-text\">\\</code> on Windows, and <code class=\"language-text\">/</code> on Linux / macOS), and <code class=\"language-text\">path.delimiter</code> which provides the path delimiter (<code class=\"language-text\">;</code> on Windows, and <code class=\"language-text\">:</code> on Linux / macOS).</p>\n<p>These are the <code class=\"language-text\">path</code> methods:</p>\n<h3><code class=\"language-text\">path.basename()</code></h3>\n<p>Return the last portion of a path. A second parameter can filter out the file extension:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//something</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//something.txt</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//something</span></code></pre></div>\n<h3><code class=\"language-text\">path.dirname()</code></h3>\n<p>Return the directory part of a path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// /test</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">dirname</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something/file.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// /test/something</span></code></pre></div>\n<h3><code class=\"language-text\">path.extname()</code></h3>\n<p>Return the extension part of a path</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ''</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something/file.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// '.txt'</span></code></pre></div>\n<h3><code class=\"language-text\">path.format()</code></h3>\n<p>Returns a path string from an object, This is the opposite of <code class=\"language-text\">path.parse</code><br/></p>\n<p><code class=\"language-text\">path.format</code> accepts an object as argument with the follwing keys:</p>\n<ul>\n<li><code class=\"language-text\">root</code>: the root</li>\n<li>-</li>\n<li><code class=\"language-text\">dir</code>: the folder path starting fro</li>\n<li>-</li>\n<li><code class=\"language-text\">base</code>: the file name + extension</li>\n<li><code class=\"language-text\">name</code>: the file name</li>\n<li><code class=\"language-text\">ext</code>: the file extension</li>\n</ul>\n<p><code class=\"language-text\">root</code> is ignored if <code class=\"language-text\">dir</code> is provided<br/></p>\n<p><code class=\"language-text\">ext</code> and <code class=\"language-text\">name</code> are ignored if <code class=\"language-text\">base</code> exists</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// POSIX</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">dir</span><span class=\"token operator\">:</span> <span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">base</span><span class=\"token operator\">:</span> <span class=\"token string\">'test.txt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  '/Users/joe/test.txt'</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'test'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">ext</span><span class=\"token operator\">:</span> <span class=\"token string\">'txt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  '/Users/joe/test.txt'</span>\n\n<span class=\"token comment\">// WINDOWS</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">dir</span><span class=\"token operator\">:</span> <span class=\"token string\">'C:\\\\Users\\\\joe'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">base</span><span class=\"token operator\">:</span> <span class=\"token string\">'test.txt'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  'C:\\\\Users\\\\joe\\\\test.txt'</span></code></pre></div>\n<h3><code class=\"language-text\">path.isAbsolute()</code></h3>\n<p>Returns true if it's an absolute path</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isAbsolute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test/something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isAbsolute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./test/something'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre></div>\n<h3><code class=\"language-text\">path.join()</code></h3>\n<p>Joins two or more parts of a path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'joe'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'users'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token string\">'notes.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/users/joe/notes.txt'</span></code></pre></div>\n<h3><code class=\"language-text\">path.normalize()</code></h3>\n<p>Tries to calculate the actual path when it contains relative specifiers like <code class=\"language-text\">.</code> or <code class=\"language-text\">..</code>, or double slashes:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">normalize</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users/joe/..//test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/users/test.txt'</span></code></pre></div>\n<h3><code class=\"language-text\">path.parse()</code></h3>\n<p>Parses a path to an object with the segments that compose it:</p>\n<ul>\n<li><code class=\"language-text\">root</code>: the root</li>\n<li>-</li>\n<li><code class=\"language-text\">dir</code>: the folder path starting fro</li>\n<li>-</li>\n<li><code class=\"language-text\">base</code>: the file name + extension</li>\n<li><code class=\"language-text\">name</code>: the file name</li>\n<li><code class=\"language-text\">ext</code>: the file extension</li>\n</ul>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users/test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>results in</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token punctuation\">{</span>\n\n  <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">dir</span><span class=\"token operator\">:</span> <span class=\"token string\">'/users'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">base</span><span class=\"token operator\">:</span> <span class=\"token string\">'test.txt'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">ext</span><span class=\"token operator\">:</span> <span class=\"token string\">'.txt'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'test'</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">path.relative()</code></h3>\n<p>Accepts 2 paths as arguments. Returns the relative path from the first path to the second, based on the current working directory.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">relative</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'test.txt'</span>\n\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">relative</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/Users/joe/something/test.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'something/test.txt'</span></code></pre></div>\n<h3><code class=\"language-text\">path.resolve()</code></h3>\n<p>You can get the absolute path calculation of a relative path using <code class=\"language-text\">path.resolve()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/Users/joe/joe.txt' if run from my home folder</span></code></pre></div>\n<p>By specifying a second parameter, <code class=\"language-text\">resolve</code> will use the first as a base for the second:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tmp'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/Users/joe/tmp/joe.txt' if run from my home folder</span></code></pre></div>\n<p>If the first parameter starts with a slash, that means it's an absolute path:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\npath<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/etc'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'joe.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'/etc/joe.txt'</span></code></pre></div>\n<h1>'The Node.js os module'</h1>\n<p>description: 'The os module of Node.js provides useful functions to interact with underlying system'</p>\n<p>This module provides many functions that you can use to retrieve information from the underlying operating system and the computer the program runs on, and interact with it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> os <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'os'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>There are a few useful properties that tell us some key things related to handling files:</p>\n<p><code class=\"language-text\">os.EOL</code> gives the line delimiter sequence. It's <code class=\"language-text\">\\n</code> on Linux and macOS, and <code class=\"language-text\">\\r\\n</code> on Windows.</p>\n<p><code class=\"language-text\">os.constants.signals</code> tells us all the constants related to handling process signals, like SIGHUP, SIGKILL and so on.</p>\n<p><code class=\"language-text\">os.constants.errno</code> sets the constants for error reporting, like EADDRINUSE, EOVERFLOW and more.</p>\n<p>You can read them all on <a href=\"https://nodejs.org/api/os.html#os_signal_constants\">https://nodejs.org/api/os.html#os_signal_constants</a>.</p>\n<p>Let's now see the main methods that <code class=\"language-text\">os</code> provides:</p>\n<h2><code class=\"language-text\">os.arch()</code></h2>\n<p>Return the string that identifies the underlying architecture, like <code class=\"language-text\">arm</code>, <code class=\"language-text\">x64</code>, <code class=\"language-text\">arm64</code>.</p>\n<h2><code class=\"language-text\">os.cpus()</code></h2>\n<p>Return information on the CPUs available on your system.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'Intel(R) Core(TM)2 Duo CPU     P8600  @ 2.40GHz'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> <span class=\"token number\">2400</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">times</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token number\">281685380</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">nice</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">sys</span><span class=\"token operator\">:</span> <span class=\"token number\">187986530</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">idle</span><span class=\"token operator\">:</span> <span class=\"token number\">685833750</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">irq</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token string\">'Intel(R) Core(TM)2 Duo CPU     P8600  @ 2.40GHz'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> <span class=\"token number\">2400</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">times</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token number\">282348700</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">nice</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">sys</span><span class=\"token operator\">:</span> <span class=\"token number\">161800480</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">idle</span><span class=\"token operator\">:</span> <span class=\"token number\">703509470</span><span class=\"token punctuation\">,</span>\n\n            <span class=\"token literal-property property\">irq</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">os.endianness()</code></h2>\n<p>Return <code class=\"language-text\">BE</code> or <code class=\"language-text\">LE</code> depending if Node.js was compiled with <a href=\"https://en.wikipedia.org/wiki/Endianness\">Big Endian or Little Endian</a>.</p>\n<h2><code class=\"language-text\">os.freemem()</code></h2>\n<p>Return the number of bytes that represent the free memory in the system.</p>\n<h2><code class=\"language-text\">os.homedir()</code></h2>\n<p>Return the path to the home directory of the current user.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token string\">'/Users/joe'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">os.hostname()</code></h2>\n<p>Return the host name.</p>\n<h2><code class=\"language-text\">os.loadavg()</code></h2>\n<p>Return the calculation made by the operating system on the load average.</p>\n<p>It only returns a meaningful value on Linux and macOS.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3.68798828125</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4.00244140625</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11.1181640625</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">os.networkInterfaces()</code></h2>\n<p>Returns the details of the network interfaces available on your system.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">lo0</span><span class=\"token operator\">:</span>\n\n   <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'255.0.0.0'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv4'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe:82:00:00:00:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n     <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'::1'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv6'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe:82:00:00:00:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">scopeid</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n     <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe80::1'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'ffff:ffff:ffff:ffff::'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv6'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe:82:00:00:00:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">scopeid</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">en1</span><span class=\"token operator\">:</span>\n\n   <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe82::9b:8282:d7e6:496e'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'ffff:ffff:ffff:ffff::'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv6'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'06:00:00:02:0e:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">scopeid</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n     <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'192.168.1.38'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'255.255.255.0'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv4'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'06:00:00:02:0e:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">utun0</span><span class=\"token operator\">:</span>\n\n   <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe80::2513:72bc:f405:61d0'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">netmask</span><span class=\"token operator\">:</span> <span class=\"token string\">'ffff:ffff:ffff:ffff::'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">family</span><span class=\"token operator\">:</span> <span class=\"token string\">'IPv6'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">mac</span><span class=\"token operator\">:</span> <span class=\"token string\">'fe:80:00:20:00:00'</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">scopeid</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n\n       <span class=\"token literal-property property\">internal</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<h2><code class=\"language-text\">os.platform()</code></h2>\n<p>Return the platform that Node.js was compiled for:</p>\n<ul>\n<li><code class=\"language-text\">darwin</code></li>\n<li>-</li>\n<li><code class=\"language-text\">freebsd</code></li>\n<li>-</li>\n<li><code class=\"language-text\">linux</code></li>\n<li>-</li>\n<li><code class=\"language-text\">openbsd</code></li>\n<li><code class=\"language-text\">win32</code></li>\n<li>...more</li>\n</ul>\n<h2><code class=\"language-text\">os.release()</code></h2>\n<p>Returns a string that identifies the operating system release number</p>\n<h2><code class=\"language-text\">os.tmpdir()</code></h2>\n<p>Returns the path to the assigned temp folder.</p>\n<h2><code class=\"language-text\">os.totalmem()</code></h2>\n<p>Returns the number of bytes that represent the total memory available in the system.</p>\n<h2><code class=\"language-text\">os.type()</code></h2>\n<p>Identifies the operating system:</p>\n<ul>\n<li><code class=\"language-text\">Linux</code></li>\n<li>-</li>\n<li><code class=\"language-text\">Darwin</code> on macOS</li>\n<li><code class=\"language-text\">Windows_NT</code> on Windows</li>\n</ul>\n<h2><code class=\"language-text\">os.uptime()</code></h2>\n<p>Returns the number of seconds the computer has been running since it was last rebooted.</p>\n<h2><code class=\"language-text\">os.userInfo()</code></h2>\n<p>Returns an object that contains the current <code class=\"language-text\">username</code>, <code class=\"language-text\">uid</code>, <code class=\"language-text\">gid</code>, <code class=\"language-text\">shell</code>, and <code class=\"language-text\">homedir</code></p>\n<h1>'The Node.js events module'</h1>\n<p>description: 'The events module of Node.js provides the EventEmitter class'</p>\n<p>The <code class=\"language-text\">events</code> module provides us the EventEmitter class, which is key to working with events in Node.js.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> EventEmitter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'events'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> door <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The event listener has these in-built events:</p>\n<ul>\n<li><code class=\"language-text\">newListener</code> when a listener is added</li>\n<li>-</li>\n<li><code class=\"language-text\">removeListener</code> when a listener is removed</li>\n</ul>\n<p>Here's a detailed description of the most useful methods:</p>\n<h2><code class=\"language-text\">emitter.addListener()</code></h2>\n<p>Alias for <code class=\"language-text\">emitter.on()</code>.</p>\n<h2><code class=\"language-text\">emitter.emit()</code></h2>\n<p>Emits an event. It synchronously calls every event listener in the order they were registered.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'slam'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// emitting the event \"slam\"</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.eventNames()</code></h2>\n<p>Return an array of strings that represent the events registered on the current <code class=\"language-text\">EventEmitter</code> object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">eventNames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.getMaxListeners()</code></h2>\n<p>Get the maximum amount of listeners one can add to an <code class=\"language-text\">EventEmitter</code> object, which defaults to 10 but can be increased or lowered by using <code class=\"language-text\">setMaxListeners()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">getMaxListeners</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.listenerCount()</code></h2>\n<p>Get the count of listeners of the event passed as parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">listenerCount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.listeners()</code></h2>\n<p>Gets an array of listeners of the event passed as parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">listeners</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.off()</code></h2>\n<p>Alias for <code class=\"language-text\">emitter.removeListener()</code> added in Node.js 10</p>\n<h2><code class=\"language-text\">emitter.on()</code></h2>\n<p>Adds a callback function that's called when an event is emitted.</p>\n<p>Usage:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Door was opened'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.once()</code></h2>\n<p>Adds a callback function that's called when an event is emitted for the first time after registering this. This callback is only going to be called once, never again.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> EventEmitter <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'events'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> ee <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nee<span class=\"token punctuation\">.</span><span class=\"token function\">once</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-event'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//call callback function once</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.prependListener()</code></h2>\n<p>When you add a listener using <code class=\"language-text\">on</code> or <code class=\"language-text\">addListener</code>, it's added last in the queue of listeners, and called last. Using <code class=\"language-text\">prependListener</code> it's added, and called, before other listeners.</p>\n<h2><code class=\"language-text\">emitter.prependOnceListener()</code></h2>\n<p>When you add a listener using <code class=\"language-text\">once</code>, it's added last in the queue of listeners, and called last. Using <code class=\"language-text\">prependOnceListener</code> it's added, and called, before other listeners.</p>\n<h2><code class=\"language-text\">emitter.removeAllListeners()</code></h2>\n<p>Removes all listeners of an <code class=\"language-text\">EventEmitter</code> object listening to a specific event:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">removeAllListeners</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.removeListener()</code></h2>\n<p>Remove a specific listener. You can do this by saving the callback function to a variable, when added, so you can reference it later:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">,</span> doSomething<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">,</span> doSomething<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2><code class=\"language-text\">emitter.setMaxListeners()</code></h2>\n<p>Sets the maximum amount of listeners one can add to an <code class=\"language-text\">EventEmitter</code> object, which defaults to 10 but can be increased or lowered.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ndoor<span class=\"token punctuation\">.</span><span class=\"token function\">setMaxListeners</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>How much JavaScript do you need to know to use Node.js?</h1>\n<p>description: 'If you are just starting out with JavaScript, how deeply do you need to know the language?'</p>\n<p>As a beginner, it's hard to get to a point where you are confident enough in your programming abilities.</p>\n<p>While learning to code, you might also be confused at where does JavaScript end, and where Node.js begins, and vice versa.</p>\n<p>I would recommend you to have a good grasp of the main JavaScript concepts before diving into Node.js:</p>\n<ul>\n<li>Lexical Structure</li>\n<li>-</li>\n<li>Express</li>\n<li>-</li>\n<li>Types</li>\n<li>-</li>\n<li>Classe</li>\n<li>-</li>\n<li>Variabl</li>\n<li>-</li>\n<li>Function</li>\n<li>-</li>\n<li>this</li>\n<li>-</li>\n<li>Arrow Functions</li>\n<li>Loops</li>\n<li>Scopes</li>\n<li>Arrays</li>\n<li>Template Literals</li>\n<li>Semicolons</li>\n<li>Strict Mode</li>\n<li>ECMAScript 6, 2016, 2017</li>\n</ul>\n<p>With those concepts in mind, you are well on your road to become a proficient JavaScript developer, in both the browser and in Node.js.</p>\n<p>The following concepts are also key to understand asynchronous programming, which is one fundamental part of Node.js:</p>\n<ul>\n<li><a href=\"https://nodejs.dev/learn/javascript-asynchronous-programming-and-callbacks\">Asynchronous programming and callbacks</a></li>\n<li>-</li>\n<li><a href=\"https://nodejs.dev/learn/discover-javascript-timers\">Timers</a></li>\n<li>-</li>\n<li>[Promises]</li>\n<li>-</li>\n<li><a href=\"https://nodejs.dev/learn/modern-asynchronous-javascript-with-async-and-await\">Async and Await</a></li>\n<li>Closures</li>\n<li><a href=\"https://nodejs.dev/learn/the-nodejs-event-loop\">The Event Loop</a></li>\n</ul>\n<h1>'The Node.js http module'</h1>\n<p>description: 'The http module of Node.js provides useful functions and classes to build an HTTP server'</p>\n<p>The HTTP core module is a key module to Node.js networking.</p>\n<p>It can be included using</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The module provides some properties and methods, and some classes.</p>\n<h2>Properties</h2>\n<h3><code class=\"language-text\">http.METHODS</code></h3>\n<p>This property lists all the HTTP methods supported:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token operator\">></span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token constant\">METHODS</span>\n\n<span class=\"token punctuation\">[</span> <span class=\"token string\">'ACL'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'BIND'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'CHECKOUT'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'CONNECT'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'COPY'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'DELETE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'HEAD'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'LINK'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'LOCK'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'M-SEARCH'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'MERGE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'MKACTIVITY'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'MKCALENDAR'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'MKCOL'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'MOVE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'NOTIFY'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'PATCH'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'PROPFIND'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'PROPPATCH'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'PURGE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'PUT'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'REBIND'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'REPORT'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'SEARCH'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'SUBSCRIBE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'TRACE'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'UNBIND'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'UNLINK'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'UNLOCK'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string\">'UNSUBSCRIBE'</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<h3><code class=\"language-text\">http.STATUS_CODES</code></h3>\n<p>This property lists all the HTTP status codes and their description:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token operator\">></span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token constant\">STATUS_CODES</span>\n\n<span class=\"token punctuation\">{</span> <span class=\"token string-property property\">'100'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Continue'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'101'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Switching Protocols'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'102'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Processing'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'200'</span><span class=\"token operator\">:</span> <span class=\"token string\">'OK'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'201'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Created'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'202'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Accepted'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'203'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Non-Authoritative Information'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'204'</span><span class=\"token operator\">:</span> <span class=\"token string\">'No Content'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'205'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Reset Content'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'206'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Partial Content'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'207'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Multi-Status'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'208'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Already Reported'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'226'</span><span class=\"token operator\">:</span> <span class=\"token string\">'IM Used'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'300'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Multiple Choices'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'301'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Moved Permanently'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'302'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Found'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'303'</span><span class=\"token operator\">:</span> <span class=\"token string\">'See Other'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'304'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Not Modified'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'305'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Use Proxy'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'307'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Temporary Redirect'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'308'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Permanent Redirect'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'400'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Bad Request'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'401'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Unauthorized'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'402'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Payment Required'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'403'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Forbidden'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'404'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Not Found'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'405'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Method Not Allowed'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'406'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Not Acceptable'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'407'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Proxy Authentication Required'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'408'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Request Timeout'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'409'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Conflict'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'410'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Gone'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'411'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Length Required'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'412'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Precondition Failed'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'413'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Payload Too Large'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'414'</span><span class=\"token operator\">:</span> <span class=\"token string\">'URI Too Long'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'415'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Unsupported Media Type'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'416'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Range Not Satisfiable'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'417'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Expectation Failed'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'418'</span><span class=\"token operator\">:</span> <span class=\"token string\">'I\\'m a teapot'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'421'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Misdirected Request'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'422'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Unprocessable Entity'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'423'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Locked'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'424'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Failed Dependency'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'425'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Unordered Collection'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'426'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Upgrade Required'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'428'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Precondition Required'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'429'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Too Many Requests'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'431'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Request Header Fields Too Large'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'451'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Unavailable For Legal Reasons'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'500'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Internal Server Error'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'501'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Not Implemented'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'502'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Bad Gateway'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'503'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Service Unavailable'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'504'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Gateway Timeout'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'505'</span><span class=\"token operator\">:</span> <span class=\"token string\">'HTTP Version Not Supported'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'506'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Variant Also Negotiates'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'507'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Insufficient Storage'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'508'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Loop Detected'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'509'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Bandwidth Limit Exceeded'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'510'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Not Extended'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token string-property property\">'511'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Network Authentication Required'</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<h3><code class=\"language-text\">http.globalAgent</code></h3>\n<p>Points to the global instance of the Agent object, which is an instance of the <code class=\"language-text\">http.Agent</code> class.</p>\n<p>It's used to manage connections persistence and reuse for HTTP clients, and it's a key component of Node.js HTTP networking.</p>\n<p>More in the <code class=\"language-text\">http.Agent</code> class description later on.</p>\n<h2>Methods</h2>\n<h3><code class=\"language-text\">http.createServer()</code></h3>\n<p>Return a new instance of the <code class=\"language-text\">http.Server</code> class.</p>\n<p>Usage:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//handle every single request with this callback</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3><code class=\"language-text\">http.request()</code></h3>\n<p>Makes an HTTP request to a server, creating an instance of the <code class=\"language-text\">http.ClientRequest</code> class.</p>\n<h3><code class=\"language-text\">http.get()</code></h3>\n<p>Similar to <code class=\"language-text\">http.request()</code>, but automatically sets the HTTP method to GET, and calls <code class=\"language-text\">req.end()</code> automatically.</p>\n<h2>Classes</h2>\n<p>The HTTP module provides 5 classes:</p>\n<ul>\n<li><code class=\"language-text\">http.Agent</code></li>\n<li>-</li>\n<li>`http.ClientReq</li>\n<li>-</li>\n<li><code class=\"language-text\">http.Server</code></li>\n<li><code class=\"language-text\">http.ServerResponse</code></li>\n<li><code class=\"language-text\">http.IncomingMessage</code></li>\n</ul>\n<h3><code class=\"language-text\">http.Agent</code></h3>\n<p>Node.js creates a global instance of the <code class=\"language-text\">http.Agent</code> class to manage connections persistence and reuse for HTTP clients, a key component of Node.js HTTP networking.</p>\n<p>This object makes sure that every request made to a server is queued and a single socket is reused.</p>\n<p>It also maintains a pool of sockets. This is key for performance reasons.</p>\n<h3><code class=\"language-text\">http.ClientRequest</code></h3>\n<p>An <code class=\"language-text\">http.ClientRequest</code> object is created when <code class=\"language-text\">http.request()</code> or <code class=\"language-text\">http.get()</code> is called.</p>\n<p>When a response is received, the <code class=\"language-text\">response</code> event is called with the response, with an <code class=\"language-text\">http.IncomingMessage</code> instance as argument.</p>\n<p>The returned data of a response can be read in 2 ways:</p>\n<ul>\n<li>you can call the <code class=\"language-text\">response.read()</code> method</li>\n<li>-</li>\n<li>in the <code class=\"language-text\">response</code> event handler you can setup an event listener for the <code class=\"language-text\">data</code> event, so you can listen for the data streamed into.</li>\n</ul>\n<h3><code class=\"language-text\">http.Server</code></h3>\n<p>This class is commonly instantiated and returned when creating a new server using <code class=\"language-text\">http.createServer()</code>.</p>\n<p>Once you have a server object, you have access to its methods:</p>\n<ul>\n<li><code class=\"language-text\">close()</code> stops the server from accepting new connections</li>\n<li>-</li>\n<li><code class=\"language-text\">listen()</code> starts the HTTP server and listens for connections</li>\n</ul>\n<h3><code class=\"language-text\">http.ServerResponse</code></h3>\n<p>Created by an <code class=\"language-text\">http.Server</code> and passed as the second parameter to the <code class=\"language-text\">request</code> event it fires.</p>\n<p>Commonly known and used in code as <code class=\"language-text\">res</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//res is an http.ServerResponse object</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The method you'll always call in the handler is <code class=\"language-text\">end()</code>, which closes the response, the message is complete and the server can send it to the client. It must be called on each response.</p>\n<p>These methods are used to interact with HTTP headers:</p>\n<ul>\n<li><code class=\"language-text\">getHeaderNames()</code> get the list of the names of the HTTP headers already set</li>\n<li>-</li>\n<li><code class=\"language-text\">getHeaders()</code> get a copy of the HTTP headers already set</li>\n<li>-</li>\n<li><code class=\"language-text\">setHeader('headername', value)</code> sets an HTTP header value</li>\n<li>-</li>\n<li><code class=\"language-text\">getHeader('headername')</code> gets an HTTP header already set</li>\n<li><code class=\"language-text\">removeHeader('headername')</code> removes an HTTP header already set</li>\n<li><code class=\"language-text\">hasHeader('headername')</code> return true if the response has that header set</li>\n<li><code class=\"language-text\">headersSent()</code> return true if the headers have already been sent to the client</li>\n</ul>\n<p>After processing the headers you can send them to the client by calling <code class=\"language-text\">response.writeHead()</code>, which accepts the statusCode as the first parameter, the optional status message, and the headers object.</p>\n<p>To send data to the client in the response body, you use <code class=\"language-text\">write()</code>. It will send buffered data to the HTTP response stream.</p>\n<p>If the headers were not sent yet using <code class=\"language-text\">response.writeHead()</code>, it will send the headers first, with the status code and message that's set in the request, which you can edit by setting the <code class=\"language-text\">statusCode</code> and <code class=\"language-text\">statusMessage</code> properties values:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nresponse<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">;</span>\n\nresponse<span class=\"token punctuation\">.</span>statusMessage <span class=\"token operator\">=</span> <span class=\"token string\">'Internal Server Error'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3><code class=\"language-text\">http.IncomingMessage</code></h3>\n<p>An <code class=\"language-text\">http.IncomingMessage</code> object is created by:</p>\n<ul>\n<li><code class=\"language-text\">http.Server</code> when listening to the <code class=\"language-text\">request</code> event</li>\n<li>-</li>\n<li><code class=\"language-text\">http.ClientRequest</code> when listening to the <code class=\"language-text\">response</code> event</li>\n</ul>\n<p>It can be used to access the response:</p>\n<ul>\n<li>status using its <code class=\"language-text\">statusCode</code> and <code class=\"language-text\">statusMessage</code> methods</li>\n<li>-</li>\n<li>headers using its <code class=\"language-text\">headers</code> method or `</li>\n<li>-</li>\n<li>HTTP method using its `metho</li>\n<li>-</li>\n<li>HTTP version using the <code class=\"language-text\">httpVersion</code> method</li>\n<li>URL using the <code class=\"language-text\">url</code> method</li>\n<li>underlying socket using the <code class=\"language-text\">socket</code> method</li>\n</ul>\n<p>The data is accessed using streams, since <code class=\"language-text\">http.IncomingMessage</code> implements the Readable Stream interface.</p>\n<h1>Node.js Buffers</h1>\n<p>description: 'Learn what Node.js buffers are, what they are used for, how to use them'</p>\n<h2>What is a buffer?</h2>\n<p>A buffer is an area of memory. Most JavaScript developers are much less familiar with this concept, compared to programmers using a system programming languages (like C, C++, or Go), which interact directly with memory every day.</p>\n<p>It represents a fixed-size chunk of memory (can't be resized) allocated outside of the V8 JavaScript engine.</p>\n<p>You can think of a buffer like an array of integers, which each represent a byte of data.</p>\n<p>It is implemented by the Node.js <a href=\"https://nodejs.org/api/buffer.html\">Buffer class</a>.</p>\n<h2>Why do we need a buffer?</h2>\n<p>Buffers were introduced to help developers deal with binary data, in an ecosystem that traditionally only dealt with strings rather than binaries.</p>\n<p>Buffers in Node.js are not related to the concept of buffering data. That is what happens when a stream processor receives data faster than it can digest.</p>\n<h2>How to create a buffer</h2>\n<p>A buffer is created using the <a href=\"https://nodejs.org/api/buffer.html#buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe\"><code class=\"language-text\">Buffer.from()</code></a>, <a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding\"><code class=\"language-text\">Buffer.alloc()</code></a>, and <a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_allocunsafe_size\"><code class=\"language-text\">Buffer.allocUnsafe()</code></a> methods.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_from_array\"><code class=\"language-text\">Buffer.from(array)</code></a></li>\n<li>-</li>\n<li>[<code class=\"language-text\">Buffer.from(arrayBuffer[, byteOffset[, length]])</code>](<a href=\"https://nodejs.org/api/buffer.html#buffer_class\">https://nodejs.org/api/buffer.html#buffer_class</a></li>\n<li>-</li>\n<li><a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_from_buffer\"><code class=\"language-text\">Buffer.from(buffer)</code></a></li>\n<li><a href=\"https://nodejs.org/api/buffer.html#buffer_class_method_buffer_from_string_encoding\"><code class=\"language-text\">Buffer.from(string[, encoding])</code></a></li>\n</ul>\n<p>You can also just initialize the buffer passing the size. This creates a 1KB buffer:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">alloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//or</span>\n\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">allocUnsafe</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>While both <code class=\"language-text\">alloc</code> and <code class=\"language-text\">allocUnsafe</code> allocate a <code class=\"language-text\">Buffer</code> of the specified size in bytes, the <code class=\"language-text\">Buffer</code> created by <code class=\"language-text\">alloc</code> will be <em>initialized</em> with zeroes and the one created by <code class=\"language-text\">allocUnsafe</code> will be <em>uninitialized</em>. This means that while <code class=\"language-text\">allocUnsafe</code> would be quite fast in comparison to <code class=\"language-text\">alloc</code>, the allocated segment of memory may contain old data which could potentially be sensitive.</p>\n<p>Older data, if present in the memory, can be accessed or leaked when the <code class=\"language-text\">Buffer</code> memory is read. This is what really makes <code class=\"language-text\">allocUnsafe</code> unsafe and extra care must be taken while using it.</p>\n<h2>Using a buffer</h2>\n<h3>Access the content of a buffer</h3>\n<p>A buffer, being an array of bytes, can be accessed like an array:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//72</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//101</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//121</span></code></pre></div>\n<p>Those numbers are the UTF-8 bytes that identify the characters in the buffer (<code class=\"language-text\">H</code> ‚Üí <code class=\"language-text\">72</code>, <code class=\"language-text\">e</code> ‚Üí <code class=\"language-text\">101</code>, <code class=\"language-text\">y</code> ‚Üí <code class=\"language-text\">121</code>). This happens because <code class=\"language-text\">Buffer.from()</code> uses UTF-8 by default.</p>\n<p>Keep in mind that some characters may occupy more than one byte in the buffer (<code class=\"language-text\">√©</code> ‚Üí <code class=\"language-text\">195 169</code>).</p>\n<p>You can print the full content of the buffer using the <code class=\"language-text\">toString()</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">buf.toString()</code> also uses UTF-8 by default.</p>\n<blockquote>\n<p>Notice that if you initialize a buffer with a number that sets its size, you'll get access to pre-initialized memory that will contain random data, not an empty buffer!</p>\n</blockquote>\n<h3>Get the length of a buffer</h3>\n<p>Use the <code class=\"language-text\">length</code> property:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Iterate over the contents of a buffer</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> item <span class=\"token keyword\">of</span> buf<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//72 101 121 33</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Changing the content of a buffer</h3>\n<p>You can write to a buffer a whole string of data by using the <code class=\"language-text\">write()</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">alloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbuf<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Just like you can access a buffer with an array syntax, you can also set the contents of the buffer in the same way:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbuf<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">111</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//o in UTF-8</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Hoy!</span></code></pre></div>\n<h3>Slice a buffer</h3>\n<p>If you want to create a partial visualization of a buffer, you can create a slice. A slice is not a copy: the original buffer is still the source of truth. If that changes, your slice changes.</p>\n<p>Use the <code class=\"language-text\">subarray()</code> method to create it. The first parameter is the starting position, and you can specify an optional second parameter with the end position:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbuf<span class=\"token punctuation\">.</span><span class=\"token function\">subarray</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Hey!</span>\n\n<span class=\"token keyword\">const</span> slice <span class=\"token operator\">=</span> buf<span class=\"token punctuation\">.</span><span class=\"token function\">subarray</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>slice<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//He</span>\n\nbuf<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">111</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//o</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>slice<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//Ho</span></code></pre></div>\n<h3>Copy a buffer</h3>\n<p>Copying a buffer is possible using the <code class=\"language-text\">set()</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bufcopy <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">alloc</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//allocate 4 bytes</span>\n\nbufcopy<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>By default you copy the whole buffer. If you only want to copy a part of the buffer, you can use <code class=\"language-text\">.subarray()</code> and the <code class=\"language-text\">offset</code> argument that specifies an offset to write to:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> buf <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hey?'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bufcopy <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Moo!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbufcopy<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">.</span><span class=\"token function\">subarray</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbufcopy<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'Mey!'</span></code></pre></div>\n<h1>Node.js Streams</h1>\n<p>description: 'Learn what streams are for, why are they so important, and how to use them.'</p>\n<h2>What are streams</h2>\n<p>Streams are one of the fundamental concepts that power Node.js applications.</p>\n<p>They are a way to handle reading/writing files, network communications, or any kind of end-to-end information exchange in an efficient way.</p>\n<p>Streams are not a concept unique to Node.js. They were introduced in the Unix operating system decades ago, and programs can interact with each other passing streams through the pipe operator (<code class=\"language-text\">|</code>).</p>\n<p>For example, in the traditional way, when you tell the program to read a file, the file is read into memory, from start to finish, and then you process it.</p>\n<p>Using streams you read it piece by piece, processing its content without keeping it all in memory.</p>\n<p>The Node.js <a href=\"https://nodejs.org/api/stream.html\"><code class=\"language-text\">stream</code> module</a> provides the foundation upon which all streaming APIs are built.</p>\n<p>All streams are instances of <a href=\"https://nodejs.org/api/events.html#events_class_eventemitter\">EventEmitter</a></p>\n<h2>Why streams</h2>\n<p>Streams basically provide two major advantages over using other data handling methods:</p>\n<ul>\n<li><strong>Memory efficiency</strong>: you don't need to load large amounts of data in memory before you are able to process it</li>\n<li>-</li>\n<li><strong>Time efficiency</strong>: it takes way less time to start processing data, since you can start processing as soon as you have it, rather than waiting till the whole data payload is available</li>\n</ul>\n<h2>An example of a stream</h2>\n<p>A typical example is reading files from a disk.</p>\n<p>Using the Node.js <code class=\"language-text\">fs</code> module, you can read a file, and serve it over HTTP when a new connection is established to your HTTP server:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">'/data.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">readFile()</code> reads the full contents of the file, and invokes the callback function when it's done.</p>\n<p><code class=\"language-text\">res.end(data)</code> in the callback will return the file contents to the HTTP client.</p>\n<p>If the file is big, the operation will take quite a bit of time. Here is the same thing written using streams:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">createReadStream</span><span class=\"token punctuation\">(</span>__dirname <span class=\"token operator\">+</span> <span class=\"token string\">'/data.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    stream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Instead of waiting until the file is fully read, we start streaming it to the HTTP client as soon as we have a chunk of data ready to be sent.</p>\n<h2>pipe()</h2>\n<p>The above example uses the line <code class=\"language-text\">stream.pipe(res)</code>: the <code class=\"language-text\">pipe()</code> method is called on the file stream.</p>\n<p>What does this code do? It takes the source, and pipes it into a destination.</p>\n<p>You call it on the source stream, so in this case, the file stream is piped to the HTTP response.</p>\n<p>The return value of the <code class=\"language-text\">pipe()</code> method is the destination stream, which is a very convenient thing that lets us chain multiple <code class=\"language-text\">pipe()</code> calls, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>dest1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>dest2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This construct is the same as doing</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>dest1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndest1<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>dest2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Streams-powered Node.js APIs</h2>\n<p>Due to their advantages, many Node.js core modules provide native stream handling capabilities, most notably:</p>\n<ul>\n<li><code class=\"language-text\">process.stdin</code> returns a stream connected to stdin</li>\n<li>-</li>\n<li><code class=\"language-text\">process.stdout</code> returns a stream connected to stdout</li>\n<li>-</li>\n<li><code class=\"language-text\">process.stderr</code> returns a stream connected to stderr</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.createReadStream()</code> creates a readable stream to a file</li>\n<li>-</li>\n<li><code class=\"language-text\">fs.createWriteStream()</code> creates a writable strea</li>\n<li>-</li>\n<li><code class=\"language-text\">net.connect()</code> initiates a stream-based connection</li>\n<li><code class=\"language-text\">http.request()</code> returns an instance of the http.ClientRequest class, which is a writable stream</li>\n<li><code class=\"language-text\">zlib.createGzip()</code> compress data using gzip (a compression algorithm) into a stream</li>\n<li><code class=\"language-text\">zlib.createGunzip()</code> decompress a gzip stream.</li>\n<li><code class=\"language-text\">zlib.createDeflate()</code> compress data using deflate (a compression algorithm) into a stream</li>\n<li><code class=\"language-text\">zlib.createInflate()</code> decompress a deflate stream</li>\n</ul>\n<h2>Different types of streams</h2>\n<p>There are four classes of streams:</p>\n<ul>\n<li><code class=\"language-text\">Readable</code>: a stream you can pipe from, but not pipe into (you can receive data, but not send data to it). When you push data into a readable stream, it is buffered, until a consumer starts to read the data.</li>\n<li>-</li>\n<li><code class=\"language-text\">Writable</code>: a stream you can pipe into, but not pipe from (you can send data, but not receive from it)</li>\n<li>-</li>\n<li><code class=\"language-text\">Duplex</code>: a stream you can both pipe into and pipe from, basically a combination of a Readable and Writable stream</li>\n<li><code class=\"language-text\">Transform</code>: a Transform stream is similar to a Duplex, but the output is a transform of its input</li>\n</ul>\n<h2>How to create a readable stream</h2>\n<p>We get the Readable stream from the <a href=\"https://nodejs.org/api/stream.html\"><code class=\"language-text\">stream</code> module</a>, and we initialize it and implement the <code class=\"language-text\">readable._read()</code> method.</p>\n<p>First create a stream object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> Stream <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> readableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>then implement <code class=\"language-text\">_read</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">_read</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can also implement <code class=\"language-text\">_read</code> using the <code class=\"language-text\">read</code> option:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> readableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now that the stream is initialized, we can send data to it:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ho!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>How to create a writable stream</h2>\n<p>To create a writable stream we extend the base <code class=\"language-text\">Writable</code> object, and we implement its _write() method.</p>\n<p>First create a stream object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> Stream <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> writableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Writable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>then implement <code class=\"language-text\">_write</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nwritableStream<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">_write</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can now pipe a</p>\n<p>readable stream in:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writableStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>How to get data from a readable stream</h2>\n<p>How do we read data from a readable stream? Using a writable stream:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> Stream <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> readableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> writableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Writable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwritableStream<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">_write</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writableStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ho!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You can also consume a readable stream directly, using the <code class=\"language-text\">readable</code> event:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readable'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>readableStream<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>How to send data to a writable stream</h2>\n<p>Using the stream <code class=\"language-text\">write()</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nwritableStream<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hey!\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Signaling a writable stream that you ended writing</h2>\n<p>Use the <code class=\"language-text\">end()</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> Stream <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> readableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Readable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> writableStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stream<span class=\"token punctuation\">.</span>Writable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwritableStream<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">_write</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>writableStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreadableStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ho!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwritableStream<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>How to create a transform stream</h2>\n<p>We get the Transform stream from the <a href=\"https://nodejs.org/api/stream.html\"><code class=\"language-text\">stream</code> module</a>, and we initialize it and implement the <code class=\"language-text\">transform._transform()</code> method.</p>\n<p>First create a transform stream object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Transform <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> TransformStream <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>then implement <code class=\"language-text\">_transform</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nTransformStream<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">_transform</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    TransformStream<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Pipe readable stream:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span>stdin<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>TransformStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Node.js, the difference between development and production</h1>\n<p>description: 'Learn how to set up different configurations for production and development environments'</p>\n<p>You can have different configurations for production and development environments.</p>\n<p>Node.js assumes it's always running in a development environment.</p>\n<p>You can signal Node.js that you are running in production by setting the <code class=\"language-text\">NODE_ENV=production</code> environment variable.</p>\n<p>This is usually done by executing the command</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NODE_ENV</span><span class=\"token operator\">=</span>production</code></pre></div>\n<p>in the shell, but it's better to put it in your shell configuration file (e.g. <code class=\"language-text\">.bash_profile</code> with the Bash shell) because otherwise the setting does not persist in case of a system restart.</p>\n<p>You can also apply the environment variable by prepending it to your application initialization command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">NODE_ENV</span><span class=\"token operator\">=</span>production <span class=\"token function\">node</span> app.js</code></pre></div>\n<p>This environment variable is a convention that is widely used in external libraries as well.</p>\n<p>Setting the environment to <code class=\"language-text\">production</code> generally ensures that</p>\n<ul>\n<li>logging is kept to a minimum, essential level</li>\n<li>-</li>\n<li>more caching levels take place to optimize performance</li>\n</ul>\n<p>For example Pug, the templating library used by Express, compiles in debug mode if <code class=\"language-text\">NODE_ENV</code> is not set to <code class=\"language-text\">production</code>. Express views are compiled in every request in development mode, while in production they are cached. There are many more examples.</p>\n<p>You can use conditional statements to execute code in different environments:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">//...</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">//...</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'staging'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">//...</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>For example, in an Express app, you can use this to set different error handlers per environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">errorHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">dumpExceptions</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">showStack</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">errorHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1>Error handling in Node.js</h1>\n<p>description: 'How to handle errors during the execution of a Node.js application'</p>\n<p>Errors in Node.js are handled through exceptions.</p>\n<h2>Creating exceptions</h2>\n<p>An exception is created using the <code class=\"language-text\">throw</code> keyword:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">throw</span> value<span class=\"token punctuation\">;</span></code></pre></div>\n<p>As soon as JavaScript executes this line, the normal program flow is halted and the control is held back to the nearest <strong>exception handler</strong>.</p>\n<p>Usually in client-side code <code class=\"language-text\">value</code> can be any JavaScript value including a string, a number or an object.</p>\n<p>In Node.js, we don't throw strings, we just throw Error objects.</p>\n<h2>Error objects</h2>\n<p>An error object is an object that is either an instance of the Error object, or extends the Error class, provided in the <a href=\"https://nodejs.org/api/errors.html\">Error core module</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ran out of coffee'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">NotEnoughCoffeeError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NotEnoughCoffeeError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Handling exceptions</h2>\n<p>An exception handler is a <code class=\"language-text\">try</code>/<code class=\"language-text\">catch</code> statement.</p>\n<p>Any exception raised in the lines of code included in the <code class=\"language-text\">try</code> block is handled in the corresponding <code class=\"language-text\">catch</code> block:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//lines of code</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">e</code> in this example is the exception value.</p>\n<p>You can add multiple handlers, that can catch different kinds of errors.</p>\n<h2>Catching uncaught exceptions</h2>\n<p>If an uncaught exception gets thrown during the execution of your program, your program will crash.</p>\n<p>To solve this, you listen for the <code class=\"language-text\">uncaughtException</code> event on the <code class=\"language-text\">process</code> object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'uncaughtException'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'There was an uncaught error'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    process<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//mandatory (as per the Node.js docs)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>You don't need to import the <code class=\"language-text\">process</code> core module for this, as it's automatically injected.</p>\n<h2>Exceptions with promises</h2>\n<p>Using promises you can chain different operations, and handle errors at the end:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">doSomething1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>doSomething2<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>doSomething3<span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>How do you know where the error occurred? You don't really know, but you can handle errors in each of the functions you call (<code class=\"language-text\">doSomethingX</code>), and inside the error handler throw a new error, that's going to call the outside <code class=\"language-text\">catch</code> handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">doSomething1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//...</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//...</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//... handle it locally</span>\n\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To be able to handle errors locally without handling them in the function we call, we can break the chain. You can create a function in each <code class=\"language-text\">then()</code> and process the exception:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">doSomething1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">doSomething2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//handle error</span>\n\n            <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span> <span class=\"token comment\">//break the chain!</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">doSomething3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">//handle error</span>\n\n            <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span> <span class=\"token comment\">//break the chain!</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Error handling with async/await</h2>\n<p>Using async/await, you still need to catch errors, and you do it this way:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">someFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> <span class=\"token function\">someOtherFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1>How to log an object in Node.js</h1>\n<p>description: 'Logging objects in Node.js'</p>\n<p>When you type <code class=\"language-text\">console.log()</code> into a JavaScript program that runs in the browser, that is going to create a nice entry in the Browser Console:</p>\n<p><img src=\"images/console-log-browser.png\" alt=\"alt-text\"></p>\n<p>Once you click the arrow, the log is expanded, and you can clearly see the object properties:</p>\n<p><img src=\"images/console-log-browser-expanded.png\" alt=\"alt-text\"></p>\n<p>In Node.js, the same happens.</p>\n<p>We don't have such luxury when we log something to the console, because that's going to output the object to the shell if you run the Node.js program manually, or to the log file. You get a string representation of the object.</p>\n<p>Now, all is fine until a certain level of nesting. After two levels of nesting, Node.js gives up and prints <code class=\"language-text\">[Object]</code> as a placeholder:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n<span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'joe'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">person1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Tony'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">person2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Albert'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">person3</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Peter'</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">23</span>\n\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">{</span>\n\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'joe'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">person1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Tony'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">person2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Albert'</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">person3</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>Object<span class=\"token punctuation\">]</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>How can you print the whole object?</p>\n<p>The best way to do so, while preserving the pretty print, is to use</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>where <code class=\"language-text\">2</code> is the number of spaces to use for indentation.</p>\n<p>Another option is to use</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'util'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>inspect<span class=\"token punctuation\">.</span>defaultOptions<span class=\"token punctuation\">.</span>depth <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>but the problem is that the nested objects after level 2 are now flattened, and this might be a problem with complex objects.</p>\n<h1>'Node.js with TypeScript'</h1>\n<p>description: 'Find out why TypeScript is an awesome tool and learn to use it by yourself.'</p>\n<h2>What is TypeScript</h2>\n<p>TypeScript is a very popular open-source language maintained and developed by Microsoft, it's loved and used by a lot of software developers around the world.</p>\n<p>Basically, it's a superset of JavaScript that adds new capabilities to the language. Most notable addition are static type definitions, something that is not present in plain JavaScript. Thanks to types, it's possible, for example, to declare what kind of arguments we are expecting and what is returned exactly in our functions or what's the exact shape of the object that we are creating. TypeScript is a really powerful tool and opens new world of possibilities in JavaScript projects. It makes our code more secure and robust by preventing a lot of bugs before code is even shipped - it catches problems during writing the code and integrates wonderfully with code editors like Visual Studio Code.</p>\n<p>We can talk about other TypeScript benefits later, let's see some examples now!</p>\n<h2>Examples</h2>\n<p>Take a look at this code snippet and then we can unpack it together:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ntype User <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> number\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> User</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> boolean <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">justine</span><span class=\"token operator\">:</span> User <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Justine'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">23</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">isJustineAnAdult</span><span class=\"token operator\">:</span> boolean <span class=\"token operator\">=</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span>justine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>First part with <code class=\"language-text\">type</code> keyword is responsible for declaring our custom type of objects representing users. Later we utilize this newly created type to create function <code class=\"language-text\">isAdult</code> that accepts one argument of type <code class=\"language-text\">User</code> and returns <code class=\"language-text\">boolean</code>. After this we create <code class=\"language-text\">justine</code>, our example data that can be used for calling previously defined function. Finally, we create new variable with information whether <code class=\"language-text\">justine</code> is an adult or not.</p>\n<p>There are additional things about this example that you should know. Firstly, if we would not comply with declared types, TypeScript would alarm us that something is wrong and prevent misuse. Secondly, not everything must be typed explicitly - TypeScript is very smart and can deduce types for us. For example, variable <code class=\"language-text\">isJustineAnAdult</code> would be of type <code class=\"language-text\">boolean</code> even if we didn't type it explicitly or <code class=\"language-text\">justine</code> would be valid argument for our function even if we didn't declare this variable as of <code class=\"language-text\">User</code> type.</p>\n<p>Okay, so we have some TypeScript code. Now how do we run it?</p>\n<p>First thing to do is to install TypeScript in our project:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i -D typescript</code></pre></div>\n<p>Now we can compile it to JavaScript using <code class=\"language-text\">tsc</code> command in the terminal. Let's do it!</p>\n<p>Assuming that our file is named <code class=\"language-text\">example.ts</code>, the command would look like:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tsc example.ts</code></pre></div>\n<p>This command will result in a new file named <code class=\"language-text\">example.js</code> that we can run using Node.js.</p>\n<p>Now when we know how to compile and run TypeScript code let's see TypeScript bug-preventing capabilities in action!</p>\n<p>This is how we will modify our code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\ntype User <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> number\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> User</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> boolean <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">justine</span><span class=\"token operator\">:</span> User <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Justine'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">'Secret!'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">isJustineAnAdult</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span>justine<span class=\"token punctuation\">,</span> <span class=\"token string\">\"I shouldn't be here!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And this is what TypeScript has to say about this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\nexample<span class=\"token punctuation\">.</span>ts<span class=\"token operator\">:</span><span class=\"token number\">12</span><span class=\"token operator\">:</span><span class=\"token number\">3</span> <span class=\"token operator\">-</span> error <span class=\"token constant\">TS2322</span><span class=\"token operator\">:</span> Type <span class=\"token string\">'string'</span> is not assignable to type <span class=\"token string\">'number'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token number\">12</span>   <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Secret!\"</span><span class=\"token punctuation\">,</span>\n\n     <span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span>\n\n  example<span class=\"token punctuation\">.</span>ts<span class=\"token operator\">:</span><span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token number\">3</span>\n\n    <span class=\"token number\">3</span>   <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n\n        <span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span>\n\n    The expected type comes from property <span class=\"token string\">'age'</span> which is declared here on type <span class=\"token string\">'User'</span>\n\nexample<span class=\"token punctuation\">.</span>ts<span class=\"token operator\">:</span><span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">7</span> <span class=\"token operator\">-</span> error <span class=\"token constant\">TS2322</span><span class=\"token operator\">:</span> Type <span class=\"token string\">'boolean'</span> is not assignable to type <span class=\"token string\">'string'</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token number\">15</span> <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">isJustineAnAdult</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span>justine<span class=\"token punctuation\">,</span> <span class=\"token string\">\"I shouldn't be here!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n         <span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span>\n\nexample<span class=\"token punctuation\">.</span>ts<span class=\"token operator\">:</span><span class=\"token number\">15</span><span class=\"token operator\">:</span><span class=\"token number\">51</span> <span class=\"token operator\">-</span> error <span class=\"token constant\">TS2554</span><span class=\"token operator\">:</span> Expected <span class=\"token number\">1</span> arguments<span class=\"token punctuation\">,</span> but got <span class=\"token number\">2.</span>\n\n<span class=\"token number\">15</span> <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">isJustineAnAdult</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token function\">isAdult</span><span class=\"token punctuation\">(</span>justine<span class=\"token punctuation\">,</span> <span class=\"token string\">\"I shouldn't be here!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                                                     <span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span>\n\nFound <span class=\"token number\">3</span> errors<span class=\"token punctuation\">.</span></code></pre></div>\n<p>As you can see TypeScript successfully prevents us from shipping code that could work unexpectedly. That's wonderful!</p>\n<h2>More about TypeScript</h2>\n<p>TypeScript offers a whole lot of other great mechanisms like interfaces, classes, utility types and so on. Also, on bigger projects you can declare your TypeScript compiler configuration in a separate file and granularly adjust how it works, how strict it is and where it stores compiled files for example. You can read more about all this awesome stuff in <a href=\"https://www.typescriptlang.org/docs\">the official TypeScript docs</a>.</p>\n<p>Some of the other benefits of TypeScript that are worth mentioning are that it can be adopted progressively, it helps making code more readable and understandable and it allows developers to use modern language features while shipping code for older Node.js versions.</p>\n<h2>TypeScript in the Node.js world</h2>\n<p>TypeScript is well-established in the Node.js world and used by many companies, open-source projects, tools and frameworks.</p>\n<p>Some of the notable examples of open-source projects using TypeScript are:</p>\n<ul>\n<li><a href=\"https://nestjs.com/\">NestJS</a> - robust and fully-featured framework that makes creating scalable and well-architected systems easy and pleasant</li>\n<li>-</li>\n<li><a href=\"https://typeorm.io/#/\">TypeORM</a> - great ORM influenced by other well-known tools from other languages like Hibernate, Doctrine or Entity Framewor</li>\n<li>-</li>\n<li><a href=\"https://prisma.io/\">Prisma</a> - next-generation ORM featuring a declarative data model, generated migrations and fully type-safe database queries</li>\n<li><a href=\"https://rxjs.dev/\">RxJS</a> - widely used library for reactive programming</li>\n<li><a href=\"https://adonisjs.com\">AdonisJS</a> - A fully featured web framework with Node.js</li>\n</ul>\n<p>And many, many more great projects... Maybe even your next one!</p>\n<h1>Differences between Node.js and the Browser</h1>\n<p>description: 'How writing JavaScript application in Node.js differs from programming for the Web inside the browser'</p>\n<p>Both the browser and Node.js use JavaScript as their programming language.</p>\n<p>Building apps that run in the browser is a completely different thing than building a Node.js application.</p>\n<p>Despite the fact that it's always JavaScript, there are some key differences that make the experience radically different.</p>\n<p>From the perspective of a frontend developer who extensively uses JavaScript, Node.js apps bring with them a huge advantage: the comfort of programming everything - the frontend and the backend - in a single language.</p>\n<p>You have a huge opportunity because we know how hard it is to fully, deeply learn a programming language, and by using the same language to perform all your work on the web - both on the client and on the server, you're in a unique position of advantage.</p>\n<p>What changes is the ecosystem.</p>\n<p>In the browser, most of the time what you are doing is interacting with the DOM, or other Web Platform APIs like Cookies. Those do not exist in Node.js, of course. You don't have the <code class=\"language-text\">document</code>, <code class=\"language-text\">window</code> and all the other objects that are provided by the browser.</p>\n<p>And in the browser, we don't have all the nice APIs that Node.js provides through its modules, like the filesystem access functionality.</p>\n<p>Another big difference is that in Node.js you control the environment. Unless you are building an open source application that anyone can deploy anywhere, you know which version of Node.js you will run the application on. Compared to the browser environment, where you don't get the luxury to choose what browser your visitors will use, this is very convenient.</p>\n<p>This means that you can write all the modern ES6-7-8-9 JavaScript that your Node.js version supports.</p>\n<p>Since JavaScript moves so fast, but browsers can be a bit slow to upgrade, sometimes on the web you are stuck with using older JavaScript / ECMAScript releases.</p>\n<p>You can use Babel to transform your code to be ES5-compatible before shipping it to the browser, but in Node.js, you won't need that.</p>\n<p>Another difference is that Node.js uses the CommonJS module system, while in the browser we are starting to see the ES Modules standard being implemented.</p>\n<p>In practice, this means that for the time being you use <code class=\"language-text\">require()</code> in Node.js and <code class=\"language-text\">import</code> in the browser.</p>\n<h1>The V8 JavaScript Engine</h1>\n<p>description: \"V8 is the name of the JavaScript engine that powers Google Chrome. It's the thing that takes our JavaScript and executes it while browsing with Chrome. V8 provides the runtime environment in which JavaScript executes. The DOM and the other Web Platform APIs are provided by the browser.\"</p>\n<hr>\n<p>V8 is the name of the JavaScript engine that powers Google Chrome. It's the thing that takes our JavaScript and executes it while browsing with Chrome.</p>\n<p>V8 provides the runtime environment in which JavaScript executes. The DOM, and the other Web Platform APIs are provided by the browser.</p>\n<p>The cool thing is that the JavaScript engine is independent of the browser in which it's hosted. This key feature enabled the rise of Node.js. V8 was chosen to be the engine that powered Node.js back in 2009, and as the popularity of Node.js exploded, V8 became the engine that now powers an incredible amount of server-side code written in JavaScript.</p>\n<p>The Node.js ecosystem is huge and thanks to V8 which also powers desktop apps, with projects like Electron.</p>\n<h2>Other JS engines</h2>\n<p>Other browsers have their own JavaScript engine:</p>\n<ul>\n<li>Firefox has <a href=\"https://spidermonkey.dev\"><strong>SpiderMonkey</strong></a></li>\n<li>-</li>\n<li>Safari has <a href=\"https://developer.apple.com/documentation/javascriptcore\"><strong>JavaScriptCore</strong></a> (also called Nitro)</li>\n<li>Edge was originally based on <a href=\"https://github.com/Microsoft/ChakraCore\"><strong>Chakra</strong></a> but has more recently been <a href=\"https://support.microsoft.com/en-us/help/4501095/download-the-new-microsoft-edge-based-on-chromium\">rebuilt using Chromium</a> and the V8 engine.</li>\n</ul>\n<p>and many others exist as well.</p>\n<p>All those engines implement the <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\">ECMA ES-262 standard</a>, also called ECMAScript, the standard used by JavaScript.</p>\n<h2>The quest for performance</h2>\n<p>V8 is written in C++, and it's continuously improved. It is portable and runs on Mac, Windows, Linux and several other systems.</p>\n<p>In this V8 introduction, we will ignore the implementation details of V8: they can be found on more authoritative sites (e.g. the <a href=\"https://v8.dev/\">V8 official site</a>), and they change over time, often radically.</p>\n<p>V8 is always evolving, just like the other JavaScript engines around, to speed up the Web and the Node.js ecosystem.</p>\n<p>On the web, there is a race for performance that's been going on for years, and we (as users and developers) benefit a lot from this competition because we get faster and more optimized machines year after year.</p>\n<h2>Compilation</h2>\n<p>JavaScript is generally considered an interpreted language, but modern JavaScript engines no longer just interpret JavaScript, they compile it.</p>\n<p>This has been happening since 2009, when the SpiderMonkey JavaScript compiler was added to Firefox 3.5, and everyone followed this idea.</p>\n<p>JavaScript is internally compiled by V8 with <strong>just-in-time</strong> (JIT) <strong>compilation</strong> to speed up the execution.</p>\n<p>This might seem counter-intuitive, but since the introduction of Google Maps in 2004, JavaScript has evolved from a language that was generally executing a few dozens of lines of code to complete applications with thousands to hundreds of thousands of lines running in the browser.</p>\n<p>Our applications can now run for hours inside a browser, rather than being just a few form validation rules or simple scripts.</p>\n<p>In this <em>new world</em>, compiling JavaScript makes perfect sense because while it might take a little bit more to have the JavaScript <em>ready</em>, once done it's going to be much more performant than purely interpreted code.</p>\n<h1>Run Node.js scripts from the command line</h1>\n<p>description: 'How to run any Node.js script from the CLI'</p>\n<p>The usual way to run a Node.js program is to run the <code class=\"language-text\">node</code> globally available command (once you install Node.js) and pass the name of the file you want to execute.</p>\n<p>If your main Node.js application file is <code class=\"language-text\">app.js</code>, you can call it by typing:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">node</span> app.js</code></pre></div>\n<p>Above, you are explicitly telling the shell to run your script with <code class=\"language-text\">node</code>. You can also embed this information into your JavaScript file with a \"shebang\" line. The \"shebang\" is the first line in the file, and tells the OS which interpreter to use for running the script. Below is the first line of JavaScript:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/node</span></code></pre></div>\n<p>Above, we are explicitly giving the absolute path of interpreter. Not all operating systems have <code class=\"language-text\">node</code> in the bin folder, but all should have <code class=\"language-text\">env</code>. You can tell the OS to run <code class=\"language-text\">env</code> with node as parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env node</span>\n\n// your code</code></pre></div>\n<p>To use a shebang, your file should have executable permission. You can give <code class=\"language-text\">app.js</code> the executable permission by running:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> u+x app.js</code></pre></div>\n<p>While running the command, make sure you are in the same directory which contains the <code class=\"language-text\">app.js</code> file.</p>\n<h1>How to exit from a Node.js program</h1>\n<p>description: 'Learn how to terminate a Node.js app in the best possible way'</p>\n<p>There are various ways to terminate a Node.js application.</p>\n<p>When running a program in the console you can close it with <code class=\"language-text\">ctrl-C</code>, but what we want to discuss here is programmatically exiting.</p>\n<p>Let's start with the most drastic one, and see why you're better off <em>not</em> using it.</p>\n<p>The <code class=\"language-text\">process</code> core module provides a handy method that allows you to programmatically exit from a Node.js program: <code class=\"language-text\">process.exit()</code>.</p>\n<p>When Node.js runs this line, the process is immediately forced to terminate.</p>\n<p>This means that any callback that's pending, any network request still being sent, any filesystem access, or processes writing to <code class=\"language-text\">stdout</code> or <code class=\"language-text\">stderr</code> - all is going to be ungracefully terminated right away.</p>\n<p>If this is fine for you, you can pass an integer that signals the operating system the exit code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>By default the exit code is <code class=\"language-text\">0</code>, which means success. Different exit codes have different meaning, which you might want to use in your own system to have the program communicate to other programs.</p>\n<p>You can read more on exit codes at <a href=\"https://nodejs.org/api/process.html#process_exit_codes\">https://nodejs.org/api/process.html#process_exit_codes</a></p>\n<p>You can also set the <code class=\"language-text\">process.exitCode</code> property:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span>exitCode <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>and when the program ends, Node.js will return that exit code.</p>\n<p>A program will gracefully exit when all the processing is done.</p>\n<p>Many times with Node.js we start servers, like this HTTP server:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server ready'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>Express is a framework that uses the http module under the hood, app.listen() returns an instance of http. You would use https.createServer if you needed to serve your app using HTTPS, as app.listen only uses the http module.</p>\n</blockquote>\n<p>This program is never going to end. If you call <code class=\"language-text\">process.exit()</code>, any currently pending or running request is going to be aborted. This is <em>not nice</em>.</p>\n<p>In this case you need to send the command a SIGTERM signal, and handle that with the process signal handler:</p>\n<blockquote>\n<p>Note: <code class=\"language-text\">process</code> does not require a \"require\", it's automatically available.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hi!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server ready'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nprocess<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SIGTERM'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    server<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Process terminated'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>What are signals? Signals are a POSIX intercommunication system: a notification sent to a process in order to notify it of an event that occurred.</p>\n</blockquote>\n<p><code class=\"language-text\">SIGKILL</code> is the signal that tells a process to immediately terminate, and would ideally act like <code class=\"language-text\">process.exit()</code>.</p>\n<p><code class=\"language-text\">SIGTERM</code> is the signal that tells a process to gracefully terminate. It is the signal that's sent from process managers like <code class=\"language-text\">upstart</code> or <code class=\"language-text\">supervisord</code> and many others.</p>\n<p>You can send this signal from inside the program, in another function:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span><span class=\"token function\">kill</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>pid<span class=\"token punctuation\">,</span> <span class=\"token string\">'SIGTERM'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or from another Node.js running program, or any other app running in your system that knows the PID of the process you want to terminate.</p>\n<h1>How to read environment variables from Node.js</h1>\n<p>description: 'Learn how to read and make use of environment variables in a Node.js program'</p>\n<p>The <code class=\"language-text\">process</code> core module of Node.js provides the <code class=\"language-text\">env</code> property which hosts all the environment variables that were set at the moment the process was started.</p>\n<p>The below code runs <code class=\"language-text\">app.js</code> and set <code class=\"language-text\">USER_ID</code> and <code class=\"language-text\">USER_KEY</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token number\">239482</span> <span class=\"token assign-left variable\">USER_KEY</span><span class=\"token operator\">=</span>foobar <span class=\"token function\">node</span> app.js</code></pre></div>\n<p>That will pass the user <code class=\"language-text\">USER_ID</code> as <strong>239482</strong> and the <code class=\"language-text\">USER_KEY</code> as <strong>foobar</strong>. This is suitable for testing, however for production, you will probably be configuring some bash scripts to export variables.</p>\n<blockquote>\n<p>Note: <code class=\"language-text\">process</code> does not require a \"require\", it's automatically available.</p>\n</blockquote>\n<p>Here is an example that accesses the <code class=\"language-text\">USER_ID</code> and <code class=\"language-text\">USER_KEY</code> environment variables, which we set in above code.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nprocess<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">USER_ID</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"239482\"</span>\n\nprocess<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">USER_KEY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"foobar\"</span></code></pre></div>\n<p>In the same way you can access any custom environment variable you set.</p>\n<p>If you have multiple environment variables in your node project, you can also create an <code class=\"language-text\">.env</code> file in the root directory of your project, and then use the <a href=\"https://www.npmjs.com/package/dotenv\">dotenv</a> package to load them during runtime.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .env file</span>\n\n<span class=\"token assign-left variable\">USER_ID</span><span class=\"token operator\">=</span><span class=\"token string\">\"239482\"</span>\n\n<span class=\"token assign-left variable\">USER_KEY</span><span class=\"token operator\">=</span><span class=\"token string\">\"foobar\"</span>\n\n<span class=\"token assign-left variable\">NODE_ENV</span><span class=\"token operator\">=</span><span class=\"token string\">\"development\"</span></code></pre></div>\n<p>In your js file</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dotenv'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nprocess<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">USER_ID</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"239482\"</span>\n\nprocess<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">USER_KEY</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"foobar\"</span>\n\nprocess<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"development\"</span></code></pre></div>\n<blockquote>\n<p>You can also run your js file with <code class=\"language-text\">node -r dotenv/config index.js</code> command if you don't want to import the package in your code.</p>\n</blockquote>\n<h1>'Node.js with WebAssembly'</h1>\n<p>description: 'Find out why WebAssembly is an awesome tool and learn to use it by yourself.'</p>\n<p>WebAssembly is a high-performance assembly-like language that can be compiled from a myriad of languages including C/C++, Rust, and AssemblyScript. As of right now, it is supported by Chrome, Firefox, Safari, Edge, and Node.js!</p>\n<p>The WebAssembly specification details two file formats, a binary format called a WebAssembly Module with a <code class=\"language-text\">.wasm</code> extension and corresponding text representation called WebAssembly Text format with a <code class=\"language-text\">.wat</code> extension.</p>\n<h2>Key Concepts</h2>\n<ul>\n<li>Module - A compiled WebAssembly binary, ie a <code class=\"language-text\">.wasm</code> file.</li>\n<li>-</li>\n<li>Memory - A resizable ArrayBuffer.</li>\n<li>-</li>\n<li>Table - A resizable typed array of references not stored in Memory.</li>\n<li>Instance - An instantiation of a Module with its Memory, Table, and variables.</li>\n</ul>\n<p>In order to use WebAssembly, you need a <code class=\"language-text\">.wasm</code> binary file and a set of APIs to communicate with WebAssembly. Node.js provides the necessary APIs via the global <code class=\"language-text\">WebAssembly</code> object.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>WebAssembly<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n\nObject [WebAssembly] {\n\n  compile: [Function: compile],\n\n  validate: [Function: validate],\n\n  instantiate: [Function: instantiate]\n\n}\n\n*/</span></code></pre></div>\n<h2>Generating WebAssembly Modules</h2>\n<p>There are multiple methods available to generate WebAssembly binary files including:</p>\n<ul>\n<li>Writing WebAssembly (<code class=\"language-text\">.wat</code>) by hand and converting to binary format using tools such as <a href=\"https://github.com/webassembly/wabt\">wabt</a></li>\n<li>-</li>\n<li>Using <a href=\"https://emscripten.org/\">emscripten</a> with a C/C++ application</li>\n<li>-</li>\n<li>Using <a href=\"https://rustwasm.github.io/wasm-pack/book/\">wasm-pack</a> with a Rust application</li>\n<li>Using <a href=\"https://www.assemblyscript.org/\">AssemblyScript</a> if you prefer a TypeScript-like experience</li>\n</ul>\n<blockquote>\n<p>Some of these tools generate not only the binary file, but the JavaScript \"glue\" code and corresponding HTML files to run in the browser.</p>\n</blockquote>\n<h2>How to use it</h2>\n<p>Once you have a WebAssembly module, you can use the Node.js <code class=\"language-text\">WebAssembly</code> object to instantiate it.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token comment\">// Assume add.wasm file exists that contains a single function adding 2 provided arguments</span>\n\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> wasmBuffer <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/path/to/add.wasm'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nWebAssembly<span class=\"token punctuation\">.</span><span class=\"token function\">instantiate</span><span class=\"token punctuation\">(</span>wasmBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">wasmModule</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Exported function live under instance.exports</span>\n\n    <span class=\"token keyword\">const</span> add <span class=\"token operator\">=</span> wasmModule<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">.</span>exports<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> sum <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Outputs: 11</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Interacting with the OS</h2>\n<p>WebAssembly modules cannot directly access OS functionality on its own. A third-party tool <a href=\"https://docs.wasmtime.dev/\">Wasmtime</a> can be used to access this functionality. <code class=\"language-text\">Wasmtime</code> utilizes the <a href=\"https://wasi.dev/\">WASI</a> API to access the OS functionality.</p>\n<h2>Resources</h2>\n<ul>\n<li><a href=\"https://webassembly.org/\">General WebAssembly Information</a></li>\n<li>-</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly\">MDN Docs</a></li>\n<li><a href=\"https://webassembly.github.io/spec/core/text/index.html\">Write WebAssembly by hand</a></li>\n</ul>"}