{"expireTime":9007200904306548000,"key":"transformer-remark-markdown-ast-bfeb8f980119bc94de8c9f7139941459--","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"Postgresql Cheat Sheet","position":{"start":{"line":3,"column":3,"offset":4},"end":{"line":3,"column":25,"offset":26},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":25,"offset":26},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"PostgreSQL commands","position":{"start":{"line":5,"column":1,"offset":28},"end":{"line":5,"column":20,"offset":47},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":28},"end":{"line":5,"column":20,"offset":47},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":7,"column":1,"offset":49},"end":{"line":7,"column":4,"offset":52},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"html","value":"<a href=\"http://medium.com/codex\" class=\"markup--anchor markup--h4-anchor\">","position":{"start":{"line":9,"column":6,"offset":59},"end":{"line":9,"column":81,"offset":134},"indent":[]}},{"type":"text","value":"CODEX","position":{"start":{"line":9,"column":81,"offset":134},"end":{"line":9,"column":86,"offset":139},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":9,"column":86,"offset":139},"end":{"line":9,"column":90,"offset":143},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":54},"end":{"line":9,"column":90,"offset":143},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"PostgreSQL Cheat Sheet","position":{"start":{"line":11,"column":5,"offset":149},"end":{"line":11,"column":27,"offset":171},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":145},"end":{"line":11,"column":27,"offset":171},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"strong","children":[{"type":"text","value":"Each table is made up of rows and columns. If you think of a table as a grid, the column go from left to right across the grid and each entry of data is listed down as a row.","position":{"start":{"line":13,"column":8,"offset":180},"end":{"line":13,"column":182,"offset":354},"indent":[]}}],"position":{"start":{"line":13,"column":6,"offset":178},"end":{"line":13,"column":184,"offset":356},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":173},"end":{"line":13,"column":184,"offset":356},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*ZLWhY1d1jdboZh_s.png\" class=\"graf-image\" /></figure><a href=\"https://bryanguner.medium.com/a-list-of-all-of-my-articles-to-link-to-future-posts-1f6f88ebdf5b\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://bryanguner.medium.com/a-list-of-all-of-my-articles-to-link-to-future-posts-1f6f88ebdf5b\"><strong>ALLOFMYOTHERARTICLES</strong><br />\nbryanguner.medium.com</a><a href=\"https://bryanguner.medium.com/a-list-of-all-of-my-articles-to-link-to-future-posts-1f6f88ebdf5b\" class=\"js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock\"></a>","position":{"start":{"line":15,"column":1,"offset":358},"end":{"line":16,"column":207,"offset":981},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Each row in a relational is uniquely identified by a primary key. This can be by one or more sets of column values. In most scenarios it is a single column, such as employeeID.","position":{"start":{"line":18,"column":1,"offset":983},"end":{"line":18,"column":177,"offset":1159},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":983},"end":{"line":18,"column":177,"offset":1159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Every relational table has one primary key. Its purpose is to uniquely identify each row in the database. No two rows can have the same primary key value. The practical result of this is that you can select every single row by just knowing its primary key.","position":{"start":{"line":20,"column":1,"offset":1161},"end":{"line":20,"column":257,"offset":1417},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1161},"end":{"line":20,"column":257,"offset":1417},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"SQL Server UNIQUE constraints allow you to ensure that the data stored in a column, or a group of columns, is unique among the rows in a table.","position":{"start":{"line":22,"column":1,"offset":1419},"end":{"line":22,"column":144,"offset":1562},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1419},"end":{"line":22,"column":144,"offset":1562},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Although both UNIQUE and ","position":{"start":{"line":24,"column":1,"offset":1564},"end":{"line":24,"column":26,"offset":1589},"indent":[]}},{"type":"html","value":"<a href=\"https://www.sqlservertutorial.net/sql-server-basics/sql-server-primary-key/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":24,"column":26,"offset":1589},"end":{"line":24,"column":152,"offset":1715},"indent":[]}},{"type":"text","value":"PRIMARY KEY","position":{"start":{"line":24,"column":152,"offset":1715},"end":{"line":24,"column":163,"offset":1726},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":24,"column":163,"offset":1726},"end":{"line":24,"column":167,"offset":1730},"indent":[]}},{"type":"text","value":" constraints enforce the uniqueness of data, you should use the UNIQUE constraint instead of PRIMARY KEY constraint when you want to enforce the uniqueness of a column, or a group of columns, that are not the primary key columns.","position":{"start":{"line":24,"column":167,"offset":1730},"end":{"line":24,"column":396,"offset":1959},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1564},"end":{"line":24,"column":396,"offset":1959},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Different from PRIMARY KEY constraints, UNIQUE constraints allow NULL. Moreover, UNIQUE constraints treat the NULL as a regular value, therefore, it only allows one NULL per column.","position":{"start":{"line":26,"column":1,"offset":1961},"end":{"line":26,"column":182,"offset":2142},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1961},"end":{"line":26,"column":182,"offset":2142},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/1*kgzq5NoL5ejBGvuZ4qLDaQ.png\" class=\"graf-image\" /></figure><figure><img src=\"https://cdn-images-1.medium.com/max/800/1*hr8DccnpiR2Uj5UI3iLsOQ.png\" class=\"graf-image\" /></figure><figure><img src=\"https://cdn-images-1.medium.com/max/800/1*RiWJpwpVMdge3Sqofn3srA.png\" class=\"graf-image\" /></figure><figure><img src=\"https://cdn-images-1.medium.com/max/800/1*GN5aSwENOvntpfk90rHYFg.png\" class=\"graf-image\" /></figure>Create a new <a href=\"https://www.postgresqltutorial.com/postgresql-roles/\" class=\"markup--anchor markup--p-anchor\">role</a>:","position":{"start":{"line":28,"column":1,"offset":2144},"end":{"line":28,"column":598,"offset":2741},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE ROLE role_name;","position":{"start":{"line":30,"column":1,"offset":2743},"end":{"line":30,"column":27,"offset":2769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Create a new role with a ","position":{"start":{"line":32,"column":1,"offset":2771},"end":{"line":32,"column":26,"offset":2796},"indent":[]}},{"type":"inlineCode","value":"username","position":{"start":{"line":32,"column":26,"offset":2796},"end":{"line":32,"column":36,"offset":2806},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":32,"column":36,"offset":2806},"end":{"line":32,"column":41,"offset":2811},"indent":[]}},{"type":"inlineCode","value":"password","position":{"start":{"line":32,"column":41,"offset":2811},"end":{"line":32,"column":51,"offset":2821},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":32,"column":51,"offset":2821},"end":{"line":32,"column":52,"offset":2822},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2771},"end":{"line":32,"column":52,"offset":2822},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE ROLE username NOINHERIT LOGIN PASSWORD password;","position":{"start":{"line":34,"column":1,"offset":2824},"end":{"line":34,"column":60,"offset":2883},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Change role for the current session to the ","position":{"start":{"line":36,"column":1,"offset":2885},"end":{"line":36,"column":44,"offset":2928},"indent":[]}},{"type":"inlineCode","value":"new_role","position":{"start":{"line":36,"column":44,"offset":2928},"end":{"line":36,"column":54,"offset":2938},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":36,"column":54,"offset":2938},"end":{"line":36,"column":55,"offset":2939},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2885},"end":{"line":36,"column":55,"offset":2939},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SET ROLE new_role;","position":{"start":{"line":38,"column":1,"offset":2941},"end":{"line":38,"column":23,"offset":2963},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Allow ","position":{"start":{"line":40,"column":1,"offset":2965},"end":{"line":40,"column":7,"offset":2971},"indent":[]}},{"type":"inlineCode","value":"role_1","position":{"start":{"line":40,"column":7,"offset":2971},"end":{"line":40,"column":15,"offset":2979},"indent":[]}},{"type":"text","value":" to set its role as ","position":{"start":{"line":40,"column":15,"offset":2979},"end":{"line":40,"column":35,"offset":2999},"indent":[]}},{"type":"inlineCode","value":"role_2:","position":{"start":{"line":40,"column":35,"offset":2999},"end":{"line":40,"column":44,"offset":3008},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2965},"end":{"line":40,"column":44,"offset":3008},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"GRANT role_2 TO role_1;","position":{"start":{"line":42,"column":1,"offset":3010},"end":{"line":42,"column":28,"offset":3037},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Managing databases","position":{"start":{"line":44,"column":5,"offset":3043},"end":{"line":44,"column":23,"offset":3061},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":3039},"end":{"line":44,"column":23,"offset":3061},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-create-database/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":46,"column":1,"offset":3063},"end":{"line":46,"column":114,"offset":3176},"indent":[]}},{"type":"text","value":"Create a new database","position":{"start":{"line":46,"column":114,"offset":3176},"end":{"line":46,"column":135,"offset":3197},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":46,"column":135,"offset":3197},"end":{"line":46,"column":139,"offset":3201},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":46,"column":139,"offset":3201},"end":{"line":46,"column":140,"offset":3202},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":3063},"end":{"line":46,"column":140,"offset":3202},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE DATABASE [IF NOT EXISTS] db_name;","position":{"start":{"line":48,"column":1,"offset":3204},"end":{"line":48,"column":45,"offset":3248},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-drop-database/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":50,"column":1,"offset":3250},"end":{"line":50,"column":112,"offset":3361},"indent":[]}},{"type":"text","value":"Delete a database permanently","position":{"start":{"line":50,"column":112,"offset":3361},"end":{"line":50,"column":141,"offset":3390},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":50,"column":141,"offset":3390},"end":{"line":50,"column":145,"offset":3394},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":50,"column":145,"offset":3394},"end":{"line":50,"column":146,"offset":3395},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":3250},"end":{"line":50,"column":146,"offset":3395},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP DATABASE [IF EXISTS] db_name;","position":{"start":{"line":52,"column":1,"offset":3397},"end":{"line":52,"column":39,"offset":3435},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Managing tables","position":{"start":{"line":54,"column":5,"offset":3441},"end":{"line":54,"column":20,"offset":3456},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":3437},"end":{"line":54,"column":20,"offset":3456},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-create-table/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":56,"column":1,"offset":3458},"end":{"line":56,"column":111,"offset":3568},"indent":[]}},{"type":"text","value":"Create a new table","position":{"start":{"line":56,"column":111,"offset":3568},"end":{"line":56,"column":129,"offset":3586},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":56,"column":129,"offset":3586},"end":{"line":56,"column":133,"offset":3590},"indent":[]}},{"type":"text","value":" or a ","position":{"start":{"line":56,"column":133,"offset":3590},"end":{"line":56,"column":139,"offset":3596},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-temporary-table/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":56,"column":139,"offset":3596},"end":{"line":56,"column":252,"offset":3709},"indent":[]}},{"type":"text","value":"temporary table","position":{"start":{"line":56,"column":252,"offset":3709},"end":{"line":56,"column":267,"offset":3724},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":56,"column":267,"offset":3724},"end":{"line":56,"column":271,"offset":3728},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3458},"end":{"line":56,"column":271,"offset":3728},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE [TEMP] TABLE [IF NOT EXISTS] table_name(\n       pk SERIAL PRIMARY KEY,\n   c1 type(size) NOT NULL,\n   c2 type(size) NULL,\n   ...\n);","position":{"start":{"line":58,"column":1,"offset":3730},"end":{"line":63,"column":7,"offset":3891},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-add-column/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":65,"column":1,"offset":3893},"end":{"line":65,"column":109,"offset":4001},"indent":[]}},{"type":"text","value":"Add a new column","position":{"start":{"line":65,"column":109,"offset":4001},"end":{"line":65,"column":125,"offset":4017},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":65,"column":125,"offset":4017},"end":{"line":65,"column":129,"offset":4021},"indent":[]}},{"type":"text","value":" to a table:","position":{"start":{"line":65,"column":129,"offset":4021},"end":{"line":65,"column":141,"offset":4033},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":3893},"end":{"line":65,"column":141,"offset":4033},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name ADD COLUMN new_column_name TYPE;","position":{"start":{"line":67,"column":1,"offset":4035},"end":{"line":67,"column":60,"offset":4094},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-drop-column/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":69,"column":1,"offset":4096},"end":{"line":69,"column":110,"offset":4205},"indent":[]}},{"type":"text","value":"Drop a column","position":{"start":{"line":69,"column":110,"offset":4205},"end":{"line":69,"column":123,"offset":4218},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":69,"column":123,"offset":4218},"end":{"line":69,"column":127,"offset":4222},"indent":[]}},{"type":"text","value":" in a table:","position":{"start":{"line":69,"column":127,"offset":4222},"end":{"line":69,"column":139,"offset":4234},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":4096},"end":{"line":69,"column":139,"offset":4234},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name DROP COLUMN column_name;","position":{"start":{"line":71,"column":1,"offset":4236},"end":{"line":71,"column":52,"offset":4287},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-rename-column/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":73,"column":1,"offset":4289},"end":{"line":73,"column":112,"offset":4400},"indent":[]}},{"type":"text","value":"Rename a column","position":{"start":{"line":73,"column":112,"offset":4400},"end":{"line":73,"column":127,"offset":4415},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":73,"column":127,"offset":4415},"end":{"line":73,"column":131,"offset":4419},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":73,"column":131,"offset":4419},"end":{"line":73,"column":132,"offset":4420},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":4289},"end":{"line":73,"column":132,"offset":4420},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name RENAME column_name TO new_column_name;","position":{"start":{"line":75,"column":1,"offset":4422},"end":{"line":75,"column":66,"offset":4487},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Set or remove a default value for a column:","position":{"start":{"line":77,"column":1,"offset":4489},"end":{"line":77,"column":44,"offset":4532},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":4489},"end":{"line":77,"column":44,"offset":4532},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name ALTER COLUMN [SET DEFAULT value | DROP DEFAULT]","position":{"start":{"line":79,"column":1,"offset":4534},"end":{"line":79,"column":75,"offset":4608},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Add a ","position":{"start":{"line":81,"column":1,"offset":4610},"end":{"line":81,"column":7,"offset":4616},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-primary-key/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":81,"column":7,"offset":4616},"end":{"line":81,"column":116,"offset":4725},"indent":[]}},{"type":"text","value":"primary key","position":{"start":{"line":81,"column":116,"offset":4725},"end":{"line":81,"column":127,"offset":4736},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":81,"column":127,"offset":4736},"end":{"line":81,"column":131,"offset":4740},"indent":[]}},{"type":"text","value":" to a table.","position":{"start":{"line":81,"column":131,"offset":4740},"end":{"line":81,"column":143,"offset":4752},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":4610},"end":{"line":81,"column":143,"offset":4752},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name ADD PRIMARY KEY (column,...);","position":{"start":{"line":83,"column":1,"offset":4754},"end":{"line":83,"column":57,"offset":4810},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Remove the primary key from a table.","position":{"start":{"line":85,"column":1,"offset":4812},"end":{"line":85,"column":37,"offset":4848},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":4812},"end":{"line":85,"column":37,"offset":4848},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name\nDROP CONSTRAINT primary_key_constraint_name;","position":{"start":{"line":87,"column":1,"offset":4850},"end":{"line":88,"column":49,"offset":4925},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-rename-table/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":90,"column":1,"offset":4927},"end":{"line":90,"column":111,"offset":5037},"indent":[]}},{"type":"text","value":"Rename a table","position":{"start":{"line":90,"column":111,"offset":5037},"end":{"line":90,"column":125,"offset":5051},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":90,"column":125,"offset":5051},"end":{"line":90,"column":129,"offset":5055},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":90,"column":129,"offset":5055},"end":{"line":90,"column":130,"offset":5056},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":4927},"end":{"line":90,"column":130,"offset":5056},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER TABLE table_name RENAME TO new_table_name;","position":{"start":{"line":92,"column":1,"offset":5058},"end":{"line":92,"column":53,"offset":5110},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-drop-table/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":94,"column":1,"offset":5112},"end":{"line":94,"column":109,"offset":5220},"indent":[]}},{"type":"text","value":"Drop a table","position":{"start":{"line":94,"column":109,"offset":5220},"end":{"line":94,"column":121,"offset":5232},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":94,"column":121,"offset":5232},"end":{"line":94,"column":125,"offset":5236},"indent":[]}},{"type":"text","value":" and its dependent objects:","position":{"start":{"line":94,"column":125,"offset":5236},"end":{"line":94,"column":152,"offset":5263},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":5112},"end":{"line":94,"column":152,"offset":5263},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP TABLE [IF EXISTS] table_name CASCADE;","position":{"start":{"line":96,"column":1,"offset":5265},"end":{"line":96,"column":47,"offset":5311},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Managing views","position":{"start":{"line":98,"column":5,"offset":5317},"end":{"line":98,"column":19,"offset":5331},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":5313},"end":{"line":98,"column":19,"offset":5331},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/managing-postgresql-views/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":100,"column":1,"offset":5333},"end":{"line":100,"column":113,"offset":5445},"indent":[]}},{"type":"text","value":"Create a view","position":{"start":{"line":100,"column":113,"offset":5445},"end":{"line":100,"column":126,"offset":5458},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":100,"column":126,"offset":5458},"end":{"line":100,"column":130,"offset":5462},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":100,"column":130,"offset":5462},"end":{"line":100,"column":131,"offset":5463},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":5333},"end":{"line":100,"column":131,"offset":5463},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE OR REPLACE view_name AS\nquery;","position":{"start":{"line":102,"column":1,"offset":5465},"end":{"line":103,"column":11,"offset":5510},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-recursive-view/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":105,"column":1,"offset":5512},"end":{"line":105,"column":113,"offset":5624},"indent":[]}},{"type":"text","value":"Create a recursive view","position":{"start":{"line":105,"column":113,"offset":5624},"end":{"line":105,"column":136,"offset":5647},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":105,"column":136,"offset":5647},"end":{"line":105,"column":140,"offset":5651},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":105,"column":140,"offset":5651},"end":{"line":105,"column":141,"offset":5652},"indent":[]}}],"position":{"start":{"line":105,"column":1,"offset":5512},"end":{"line":105,"column":141,"offset":5652},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE RECURSIVE VIEW view_name(column_list) AS\nSELECT column_list;","position":{"start":{"line":107,"column":1,"offset":5654},"end":{"line":108,"column":24,"offset":5729},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-materialized-views/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":110,"column":1,"offset":5731},"end":{"line":110,"column":117,"offset":5847},"indent":[]}},{"type":"text","value":"Create a materialized view","position":{"start":{"line":110,"column":117,"offset":5847},"end":{"line":110,"column":143,"offset":5873},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":110,"column":143,"offset":5873},"end":{"line":110,"column":147,"offset":5877},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":110,"column":147,"offset":5877},"end":{"line":110,"column":148,"offset":5878},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":5731},"end":{"line":110,"column":148,"offset":5878},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE MATERIALIZED VIEW view_name\nAS\nquery\nWITH [NO] DATA;","position":{"start":{"line":112,"column":1,"offset":5880},"end":{"line":115,"column":20,"offset":5955},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Refresh a materialized view:","position":{"start":{"line":117,"column":1,"offset":5957},"end":{"line":117,"column":29,"offset":5985},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":5957},"end":{"line":117,"column":29,"offset":5985},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"REFRESH MATERIALIZED VIEW CONCURRENTLY view_name;","position":{"start":{"line":119,"column":1,"offset":5987},"end":{"line":119,"column":54,"offset":6040},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Drop a view:","position":{"start":{"line":121,"column":1,"offset":6042},"end":{"line":121,"column":13,"offset":6054},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":6042},"end":{"line":121,"column":13,"offset":6054},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP VIEW [ IF EXISTS ] view_name;","position":{"start":{"line":123,"column":1,"offset":6056},"end":{"line":123,"column":39,"offset":6094},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Drop a materialized view:","position":{"start":{"line":125,"column":1,"offset":6096},"end":{"line":125,"column":26,"offset":6121},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":6096},"end":{"line":125,"column":26,"offset":6121},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP MATERIALIZED VIEW view_name;","position":{"start":{"line":127,"column":1,"offset":6123},"end":{"line":127,"column":38,"offset":6160},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Rename a view:","position":{"start":{"line":129,"column":1,"offset":6162},"end":{"line":129,"column":15,"offset":6176},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":6162},"end":{"line":129,"column":15,"offset":6176},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ALTER VIEW view_name RENAME TO new_name;","position":{"start":{"line":131,"column":1,"offset":6178},"end":{"line":131,"column":45,"offset":6222},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Managing indexes","position":{"start":{"line":133,"column":5,"offset":6228},"end":{"line":133,"column":21,"offset":6244},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":6224},"end":{"line":133,"column":21,"offset":6244},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Creating an index with the specified name on a table","position":{"start":{"line":135,"column":1,"offset":6246},"end":{"line":135,"column":53,"offset":6298},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":6246},"end":{"line":135,"column":53,"offset":6298},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE [UNIQUE] INDEX index_name\nON table (column,...)","position":{"start":{"line":137,"column":1,"offset":6300},"end":{"line":138,"column":26,"offset":6362},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Removing a specified index from a table","position":{"start":{"line":140,"column":1,"offset":6364},"end":{"line":140,"column":40,"offset":6403},"indent":[]}}],"position":{"start":{"line":140,"column":1,"offset":6364},"end":{"line":140,"column":40,"offset":6403},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP INDEX index_name;","position":{"start":{"line":142,"column":1,"offset":6405},"end":{"line":142,"column":27,"offset":6431},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Querying data from tables","position":{"start":{"line":144,"column":5,"offset":6437},"end":{"line":144,"column":30,"offset":6462},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":6433},"end":{"line":144,"column":30,"offset":6462},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Query all data from a table:","position":{"start":{"line":146,"column":1,"offset":6464},"end":{"line":146,"column":29,"offset":6492},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":6464},"end":{"line":146,"column":29,"offset":6492},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table_name;","position":{"start":{"line":148,"column":1,"offset":6494},"end":{"line":148,"column":30,"offset":6523},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Query data from specified columns of all rows in a table:","position":{"start":{"line":150,"column":1,"offset":6525},"end":{"line":150,"column":58,"offset":6582},"indent":[]}}],"position":{"start":{"line":150,"column":1,"offset":6525},"end":{"line":150,"column":58,"offset":6582},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT column_list\nFROM table;","position":{"start":{"line":152,"column":1,"offset":6584},"end":{"line":153,"column":16,"offset":6622},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data and select only unique rows:","position":{"start":{"line":155,"column":1,"offset":6624},"end":{"line":155,"column":40,"offset":6663},"indent":[]}}],"position":{"start":{"line":155,"column":1,"offset":6624},"end":{"line":155,"column":40,"offset":6663},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT DISTINCT (column)\nFROM table;","position":{"start":{"line":157,"column":1,"offset":6665},"end":{"line":158,"column":16,"offset":6709},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data from a table with a filter:","position":{"start":{"line":160,"column":1,"offset":6711},"end":{"line":160,"column":39,"offset":6749},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":6711},"end":{"line":160,"column":39,"offset":6749},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT *\nFROM table\nWHERE condition;","position":{"start":{"line":162,"column":1,"offset":6751},"end":{"line":164,"column":21,"offset":6799},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Assign an ","position":{"start":{"line":166,"column":1,"offset":6801},"end":{"line":166,"column":11,"offset":6811},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-alias/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":166,"column":11,"offset":6811},"end":{"line":166,"column":114,"offset":6914},"indent":[]}},{"type":"text","value":"alias","position":{"start":{"line":166,"column":114,"offset":6914},"end":{"line":166,"column":119,"offset":6919},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":166,"column":119,"offset":6919},"end":{"line":166,"column":123,"offset":6923},"indent":[]}},{"type":"text","value":" to a column in the result set:","position":{"start":{"line":166,"column":123,"offset":6923},"end":{"line":166,"column":154,"offset":6954},"indent":[]}}],"position":{"start":{"line":166,"column":1,"offset":6801},"end":{"line":166,"column":154,"offset":6954},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT column_1 AS new_column_1, ...\nFROM table;","position":{"start":{"line":168,"column":1,"offset":6956},"end":{"line":169,"column":16,"offset":7012},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data using the ","position":{"start":{"line":171,"column":1,"offset":7014},"end":{"line":171,"column":22,"offset":7035},"indent":[]}},{"type":"inlineCode","value":"LIKE","position":{"start":{"line":171,"column":22,"offset":7035},"end":{"line":171,"column":28,"offset":7041},"indent":[]}},{"type":"text","value":" operator:","position":{"start":{"line":171,"column":28,"offset":7041},"end":{"line":171,"column":38,"offset":7051},"indent":[]}}],"position":{"start":{"line":171,"column":1,"offset":7014},"end":{"line":171,"column":38,"offset":7051},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table_name\nWHERE column LIKE '%value%'","position":{"start":{"line":173,"column":1,"offset":7053},"end":{"line":174,"column":32,"offset":7113},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data using the ","position":{"start":{"line":176,"column":1,"offset":7115},"end":{"line":176,"column":22,"offset":7136},"indent":[]}},{"type":"inlineCode","value":"BETWEEN","position":{"start":{"line":176,"column":22,"offset":7136},"end":{"line":176,"column":32,"offset":7146},"indent":[]}},{"type":"text","value":"operator:","position":{"start":{"line":176,"column":32,"offset":7146},"end":{"line":176,"column":41,"offset":7155},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":7115},"end":{"line":176,"column":41,"offset":7155},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table_name\nWHERE column BETWEEN low AND high;","position":{"start":{"line":178,"column":1,"offset":7157},"end":{"line":179,"column":39,"offset":7224},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data using the ","position":{"start":{"line":181,"column":1,"offset":7226},"end":{"line":181,"column":22,"offset":7247},"indent":[]}},{"type":"inlineCode","value":"IN","position":{"start":{"line":181,"column":22,"offset":7247},"end":{"line":181,"column":27,"offset":7252},"indent":[]}},{"type":"text","value":"operator:","position":{"start":{"line":181,"column":27,"offset":7252},"end":{"line":181,"column":36,"offset":7261},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":7226},"end":{"line":181,"column":36,"offset":7261},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table_name\nWHERE column IN (value1, value2,...);","position":{"start":{"line":183,"column":1,"offset":7263},"end":{"line":184,"column":42,"offset":7333},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Constrain the returned rows with the ","position":{"start":{"line":186,"column":1,"offset":7335},"end":{"line":186,"column":38,"offset":7372},"indent":[]}},{"type":"inlineCode","value":"LIMIT","position":{"start":{"line":186,"column":38,"offset":7372},"end":{"line":186,"column":45,"offset":7379},"indent":[]}},{"type":"text","value":" clause:","position":{"start":{"line":186,"column":45,"offset":7379},"end":{"line":186,"column":53,"offset":7387},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":7335},"end":{"line":186,"column":53,"offset":7387},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table_name\nLIMIT limit OFFSET offset\nORDER BY column_name;","position":{"start":{"line":188,"column":1,"offset":7389},"end":{"line":190,"column":26,"offset":7473},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Query data from multiple using the ","position":{"start":{"line":192,"column":1,"offset":7475},"end":{"line":192,"column":36,"offset":7510},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-inner-join/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":192,"column":36,"offset":7510},"end":{"line":192,"column":144,"offset":7618},"indent":[]}},{"type":"text","value":"inner join","position":{"start":{"line":192,"column":144,"offset":7618},"end":{"line":192,"column":154,"offset":7628},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":192,"column":154,"offset":7628},"end":{"line":192,"column":158,"offset":7632},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":192,"column":158,"offset":7632},"end":{"line":192,"column":160,"offset":7634},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-left-join/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":192,"column":160,"offset":7634},"end":{"line":192,"column":267,"offset":7741},"indent":[]}},{"type":"text","value":"left join","position":{"start":{"line":192,"column":267,"offset":7741},"end":{"line":192,"column":276,"offset":7750},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":192,"column":276,"offset":7750},"end":{"line":192,"column":280,"offset":7754},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":192,"column":280,"offset":7754},"end":{"line":192,"column":282,"offset":7756},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-full-outer-join/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":192,"column":282,"offset":7756},"end":{"line":192,"column":395,"offset":7869},"indent":[]}},{"type":"text","value":"full outer join","position":{"start":{"line":192,"column":395,"offset":7869},"end":{"line":192,"column":410,"offset":7884},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":192,"column":410,"offset":7884},"end":{"line":192,"column":414,"offset":7888},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":192,"column":414,"offset":7888},"end":{"line":192,"column":416,"offset":7890},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-cross-join/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":192,"column":416,"offset":7890},"end":{"line":192,"column":524,"offset":7998},"indent":[]}},{"type":"text","value":"cross join","position":{"start":{"line":192,"column":524,"offset":7998},"end":{"line":192,"column":534,"offset":8008},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":192,"column":534,"offset":8008},"end":{"line":192,"column":538,"offset":8012},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":192,"column":538,"offset":8012},"end":{"line":192,"column":543,"offset":8017},"indent":[]}},{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-natural-join/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":192,"column":543,"offset":8017},"end":{"line":192,"column":653,"offset":8127},"indent":[]}},{"type":"text","value":"natural join","position":{"start":{"line":192,"column":653,"offset":8127},"end":{"line":192,"column":665,"offset":8139},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":192,"column":665,"offset":8139},"end":{"line":192,"column":669,"offset":8143},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":192,"column":669,"offset":8143},"end":{"line":192,"column":670,"offset":8144},"indent":[]}}],"position":{"start":{"line":192,"column":1,"offset":7475},"end":{"line":192,"column":670,"offset":8144},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT *\nFROM table1\nINNER JOIN table2 ON conditions\nSELECT *\nFROM table1\nLEFT JOIN table2 ON conditions\nSELECT *\nFROM table1\nFULL OUTER JOIN table2 ON conditions\nSELECT *\nFROM table1\nCROSS JOIN table2;\nSELECT *\nFROM table1\nNATURAL JOIN table2;","position":{"start":{"line":194,"column":1,"offset":8146},"end":{"line":208,"column":25,"offset":8450},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Return the number of rows of a table.","position":{"start":{"line":210,"column":1,"offset":8452},"end":{"line":210,"column":38,"offset":8489},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":8452},"end":{"line":210,"column":38,"offset":8489},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT COUNT (*)\nFROM table_name;","position":{"start":{"line":212,"column":1,"offset":8491},"end":{"line":213,"column":21,"offset":8532},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Sort rows in ascending or descending order:","position":{"start":{"line":215,"column":1,"offset":8534},"end":{"line":215,"column":44,"offset":8577},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":8534},"end":{"line":215,"column":44,"offset":8577},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT select_list\nFROM table\nORDER BY column ASC [DESC], column2 ASC [DESC],...;","position":{"start":{"line":217,"column":1,"offset":8579},"end":{"line":219,"column":56,"offset":8672},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Group rows using ","position":{"start":{"line":221,"column":1,"offset":8674},"end":{"line":221,"column":18,"offset":8691},"indent":[]}},{"type":"inlineCode","value":"GROUP BY","position":{"start":{"line":221,"column":18,"offset":8691},"end":{"line":221,"column":28,"offset":8701},"indent":[]}},{"type":"text","value":" clause.","position":{"start":{"line":221,"column":28,"offset":8701},"end":{"line":221,"column":36,"offset":8709},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":8674},"end":{"line":221,"column":36,"offset":8709},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT *\nFROM table\nGROUP BY column_1, column_2, ...;","position":{"start":{"line":223,"column":1,"offset":8711},"end":{"line":225,"column":38,"offset":8776},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Filter groups using the ","position":{"start":{"line":227,"column":1,"offset":8778},"end":{"line":227,"column":25,"offset":8802},"indent":[]}},{"type":"inlineCode","value":"HAVING","position":{"start":{"line":227,"column":25,"offset":8802},"end":{"line":227,"column":33,"offset":8810},"indent":[]}},{"type":"text","value":" clause.","position":{"start":{"line":227,"column":33,"offset":8810},"end":{"line":227,"column":41,"offset":8818},"indent":[]}}],"position":{"start":{"line":227,"column":1,"offset":8778},"end":{"line":227,"column":41,"offset":8818},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT *\nFROM table\nGROUP BY column_1\nHAVING condition;","position":{"start":{"line":229,"column":1,"offset":8820},"end":{"line":232,"column":22,"offset":8891},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Set operations","position":{"start":{"line":234,"column":5,"offset":8897},"end":{"line":234,"column":19,"offset":8911},"indent":[]}}],"position":{"start":{"line":234,"column":1,"offset":8893},"end":{"line":234,"column":19,"offset":8911},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Combine the result set of two or more queries with ","position":{"start":{"line":236,"column":1,"offset":8913},"end":{"line":236,"column":52,"offset":8964},"indent":[]}},{"type":"inlineCode","value":"UNION","position":{"start":{"line":236,"column":52,"offset":8964},"end":{"line":236,"column":59,"offset":8971},"indent":[]}},{"type":"text","value":" operator:","position":{"start":{"line":236,"column":59,"offset":8971},"end":{"line":236,"column":69,"offset":8981},"indent":[]}}],"position":{"start":{"line":236,"column":1,"offset":8913},"end":{"line":236,"column":69,"offset":8981},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table1\nUNION\nSELECT * FROM table2;","position":{"start":{"line":238,"column":1,"offset":8983},"end":{"line":240,"column":26,"offset":9043},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Minus a result set using ","position":{"start":{"line":242,"column":1,"offset":9045},"end":{"line":242,"column":26,"offset":9070},"indent":[]}},{"type":"inlineCode","value":"EXCEPT","position":{"start":{"line":242,"column":26,"offset":9070},"end":{"line":242,"column":34,"offset":9078},"indent":[]}},{"type":"text","value":" operator:","position":{"start":{"line":242,"column":34,"offset":9078},"end":{"line":242,"column":44,"offset":9088},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":9045},"end":{"line":242,"column":44,"offset":9088},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table1\nEXCEPT\nSELECT * FROM table2;","position":{"start":{"line":244,"column":1,"offset":9090},"end":{"line":246,"column":26,"offset":9151},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Get intersection of the result sets of two queries:","position":{"start":{"line":248,"column":1,"offset":9153},"end":{"line":248,"column":52,"offset":9204},"indent":[]}}],"position":{"start":{"line":248,"column":1,"offset":9153},"end":{"line":248,"column":52,"offset":9204},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM table1\nINTERSECT\nSELECT * FROM table2;","position":{"start":{"line":250,"column":1,"offset":9206},"end":{"line":252,"column":26,"offset":9270},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Modifying data","position":{"start":{"line":254,"column":5,"offset":9276},"end":{"line":254,"column":19,"offset":9290},"indent":[]}}],"position":{"start":{"line":254,"column":1,"offset":9272},"end":{"line":254,"column":19,"offset":9290},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-insert/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":256,"column":1,"offset":9292},"end":{"line":256,"column":105,"offset":9396},"indent":[]}},{"type":"text","value":"Insert a new row into a table","position":{"start":{"line":256,"column":105,"offset":9396},"end":{"line":256,"column":134,"offset":9425},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":256,"column":134,"offset":9425},"end":{"line":256,"column":138,"offset":9429},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":256,"column":138,"offset":9429},"end":{"line":256,"column":139,"offset":9430},"indent":[]}}],"position":{"start":{"line":256,"column":1,"offset":9292},"end":{"line":256,"column":139,"offset":9430},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"INSERT INTO table(column1,column2,...)\nVALUES(value_1,value_2,...);","position":{"start":{"line":258,"column":1,"offset":9432},"end":{"line":259,"column":33,"offset":9507},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Insert multiple rows into a table:","position":{"start":{"line":261,"column":1,"offset":9509},"end":{"line":261,"column":35,"offset":9543},"indent":[]}}],"position":{"start":{"line":261,"column":1,"offset":9509},"end":{"line":261,"column":35,"offset":9543},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"INSERT INTO table_name(column1,column2,...)\nVALUES(value_1,value_2,...),\n      (value_1,value_2,...),\n      (value_1,value_2,...)...","position":{"start":{"line":263,"column":1,"offset":9545},"end":{"line":266,"column":35,"offset":9693},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-update/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":268,"column":1,"offset":9695},"end":{"line":268,"column":105,"offset":9799},"indent":[]}},{"type":"text","value":"Update","position":{"start":{"line":268,"column":105,"offset":9799},"end":{"line":268,"column":111,"offset":9805},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":268,"column":111,"offset":9805},"end":{"line":268,"column":115,"offset":9809},"indent":[]}},{"type":"text","value":" data for all rows:","position":{"start":{"line":268,"column":115,"offset":9809},"end":{"line":268,"column":134,"offset":9828},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":9695},"end":{"line":268,"column":134,"offset":9828},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"UPDATE table_name\nSET column_1 = value_1,\n    ...;","position":{"start":{"line":270,"column":1,"offset":9830},"end":{"line":272,"column":13,"offset":9892},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Update data for a set of rows specified by a condition in the ","position":{"start":{"line":274,"column":1,"offset":9894},"end":{"line":274,"column":63,"offset":9956},"indent":[]}},{"type":"inlineCode","value":"WHERE","position":{"start":{"line":274,"column":63,"offset":9956},"end":{"line":274,"column":70,"offset":9963},"indent":[]}},{"type":"text","value":" clause.","position":{"start":{"line":274,"column":70,"offset":9963},"end":{"line":274,"column":78,"offset":9971},"indent":[]}}],"position":{"start":{"line":274,"column":1,"offset":9894},"end":{"line":274,"column":78,"offset":9971},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"UPDATE table\nSET column_1 = value_1,\n    ...\nWHERE condition;","position":{"start":{"line":276,"column":1,"offset":9973},"end":{"line":279,"column":21,"offset":10050},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://www.postgresqltutorial.com/postgresql-delete/\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":281,"column":1,"offset":10052},"end":{"line":281,"column":105,"offset":10156},"indent":[]}},{"type":"text","value":"Delete all rows","position":{"start":{"line":281,"column":105,"offset":10156},"end":{"line":281,"column":120,"offset":10171},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":281,"column":120,"offset":10171},"end":{"line":281,"column":124,"offset":10175},"indent":[]}},{"type":"text","value":" of a table:","position":{"start":{"line":281,"column":124,"offset":10175},"end":{"line":281,"column":136,"offset":10187},"indent":[]}}],"position":{"start":{"line":281,"column":1,"offset":10052},"end":{"line":281,"column":136,"offset":10187},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DELETE FROM table_name;","position":{"start":{"line":283,"column":1,"offset":10189},"end":{"line":283,"column":28,"offset":10216},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Delete specific rows based on a condition:","position":{"start":{"line":285,"column":1,"offset":10218},"end":{"line":285,"column":43,"offset":10260},"indent":[]}}],"position":{"start":{"line":285,"column":1,"offset":10218},"end":{"line":285,"column":43,"offset":10260},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DELETE FROM table_name\nWHERE condition;","position":{"start":{"line":287,"column":1,"offset":10262},"end":{"line":288,"column":21,"offset":10309},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Performance","position":{"start":{"line":290,"column":5,"offset":10315},"end":{"line":290,"column":16,"offset":10326},"indent":[]}}],"position":{"start":{"line":290,"column":1,"offset":10311},"end":{"line":290,"column":16,"offset":10326},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Show the query plan for a query:","position":{"start":{"line":292,"column":1,"offset":10328},"end":{"line":292,"column":33,"offset":10360},"indent":[]}}],"position":{"start":{"line":292,"column":1,"offset":10328},"end":{"line":292,"column":33,"offset":10360},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"EXPLAIN query;","position":{"start":{"line":294,"column":1,"offset":10362},"end":{"line":294,"column":19,"offset":10380},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Show and execute the query plan for a query:","position":{"start":{"line":296,"column":1,"offset":10382},"end":{"line":296,"column":45,"offset":10426},"indent":[]}}],"position":{"start":{"line":296,"column":1,"offset":10382},"end":{"line":296,"column":45,"offset":10426},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"EXPLAIN ANALYZE query;","position":{"start":{"line":298,"column":1,"offset":10428},"end":{"line":298,"column":27,"offset":10454},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Collect statistics:","position":{"start":{"line":300,"column":1,"offset":10456},"end":{"line":300,"column":20,"offset":10475},"indent":[]}}],"position":{"start":{"line":300,"column":1,"offset":10456},"end":{"line":300,"column":20,"offset":10475},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ANALYZE table_name;","position":{"start":{"line":302,"column":1,"offset":10477},"end":{"line":302,"column":24,"offset":10500},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":304,"column":1,"offset":10502},"end":{"line":304,"column":4,"offset":10505},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Postgres & JSON:","position":{"start":{"line":306,"column":5,"offset":10511},"end":{"line":306,"column":21,"offset":10527},"indent":[]}}],"position":{"start":{"line":306,"column":1,"offset":10507},"end":{"line":306,"column":21,"offset":10527},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Creating the DB and the Table","position":{"start":{"line":308,"column":5,"offset":10533},"end":{"line":308,"column":34,"offset":10562},"indent":[]}}],"position":{"start":{"line":308,"column":1,"offset":10529},"end":{"line":308,"column":34,"offset":10562},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"DROP DATABASE IF EXISTS books_db;\nCREATE DATABASE books_db WITH ENCODING='UTF8' TEMPLATE template0;\n\nDROP TABLE IF EXISTS books;\n\nCREATE TABLE books (\n  id SERIAL PRIMARY KEY,\n  client VARCHAR NOT NULL,\n  data JSONb NOT NULL\n);","position":{"start":{"line":310,"column":1,"offset":10564},"end":{"line":319,"column":7,"offset":10823},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Populating the DB","position":{"start":{"line":321,"column":5,"offset":10829},"end":{"line":321,"column":22,"offset":10846},"indent":[]}}],"position":{"start":{"line":321,"column":1,"offset":10825},"end":{"line":321,"column":22,"offset":10846},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"INSERT INTO books(client, data) values( 'Joe', '{ \"title\": \"Siddhartha\", \"author\": { \"first_name\": \"Herman\", \"last_name\": \"Hesse\" } }' ); INSERT INTO books(client, data) values('Jenny', '{ \"title\": \"Bryan Guner\", \"author\": { \"first_name\": \"Jack\", \"last_name\": \"Kerouac\" } }'); INSERT INTO books(client, data) values('Jenny', '{ \"title\": \"100 aos de soledad\", \"author\": { \"first_name\": \"Gabo\", \"last_name\": \"Marquz\" } }');","position":{"start":{"line":323,"column":1,"offset":10848},"end":{"line":323,"column":428,"offset":11275},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Lets see everything inside the table books:","position":{"start":{"line":325,"column":1,"offset":11277},"end":{"line":325,"column":44,"offset":11320},"indent":[]}}],"position":{"start":{"line":325,"column":1,"offset":11277},"end":{"line":325,"column":44,"offset":11320},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM books;","position":{"start":{"line":327,"column":1,"offset":11322},"end":{"line":327,"column":25,"offset":11346},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":329,"column":1,"offset":11348},"end":{"line":329,"column":8,"offset":11355},"indent":[]}}],"position":{"start":{"line":329,"column":1,"offset":11348},"end":{"line":329,"column":8,"offset":11355},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*GOQQ0qNGak2yIrtQ\" class=\"graf-image\" /></figure>### `->` operator returns values out of JSON columns","position":{"start":{"line":331,"column":1,"offset":11357},"end":{"line":331,"column":161,"offset":11517},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Selecting 1 column:","position":{"start":{"line":333,"column":1,"offset":11519},"end":{"line":333,"column":20,"offset":11538},"indent":[]}}],"position":{"start":{"line":333,"column":1,"offset":11519},"end":{"line":333,"column":20,"offset":11538},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT client,\n    data->'title' AS title\n    FROM books;","position":{"start":{"line":335,"column":1,"offset":11540},"end":{"line":337,"column":20,"offset":11609},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":339,"column":1,"offset":11611},"end":{"line":339,"column":8,"offset":11618},"indent":[]}}],"position":{"start":{"line":339,"column":1,"offset":11611},"end":{"line":339,"column":8,"offset":11618},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*OIVYOfYcbVh65Mt5\" class=\"graf-image\" /></figure>Selecting 2 columns:","position":{"start":{"line":341,"column":1,"offset":11620},"end":{"line":341,"column":129,"offset":11748},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT client,\n   data->'title' AS title, data->'author' AS author\n   FROM books;","position":{"start":{"line":343,"column":1,"offset":11750},"end":{"line":345,"column":19,"offset":11843},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":347,"column":1,"offset":11845},"end":{"line":347,"column":8,"offset":11852},"indent":[]}}],"position":{"start":{"line":347,"column":1,"offset":11845},"end":{"line":347,"column":8,"offset":11852},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*fEzPkSY8yGexKOk4\" class=\"graf-image\" /></figure>### `->` vs `->>`","position":{"start":{"line":349,"column":1,"offset":11854},"end":{"line":349,"column":126,"offset":11979},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":351,"column":1,"offset":11981},"end":{"line":351,"column":5,"offset":11985},"indent":[]}},{"type":"inlineCode","value":"->","position":{"start":{"line":351,"column":5,"offset":11985},"end":{"line":351,"column":9,"offset":11989},"indent":[]}},{"type":"text","value":" operator returns the original JSON type (which might be an object), whereas ","position":{"start":{"line":351,"column":9,"offset":11989},"end":{"line":351,"column":86,"offset":12066},"indent":[]}},{"type":"inlineCode","value":"->>","position":{"start":{"line":351,"column":86,"offset":12066},"end":{"line":351,"column":91,"offset":12071},"indent":[]}},{"type":"text","value":" returns text.","position":{"start":{"line":351,"column":91,"offset":12071},"end":{"line":351,"column":105,"offset":12085},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":11981},"end":{"line":351,"column":105,"offset":12085},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Return NESTED objects","position":{"start":{"line":353,"column":5,"offset":12091},"end":{"line":353,"column":26,"offset":12112},"indent":[]}}],"position":{"start":{"line":353,"column":1,"offset":12087},"end":{"line":353,"column":26,"offset":12112},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can use the ","position":{"start":{"line":355,"column":1,"offset":12114},"end":{"line":355,"column":17,"offset":12130},"indent":[]}},{"type":"inlineCode","value":"->","position":{"start":{"line":355,"column":17,"offset":12130},"end":{"line":355,"column":21,"offset":12134},"indent":[]}},{"type":"text","value":" to return a nested object and thus chain the operators:","position":{"start":{"line":355,"column":21,"offset":12134},"end":{"line":355,"column":77,"offset":12190},"indent":[]}}],"position":{"start":{"line":355,"column":1,"offset":12114},"end":{"line":355,"column":77,"offset":12190},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT client,\n   data->'author'->'last_name' AS author\n   FROM books;","position":{"start":{"line":357,"column":1,"offset":12192},"end":{"line":359,"column":19,"offset":12274},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":361,"column":1,"offset":12276},"end":{"line":361,"column":8,"offset":12283},"indent":[]}}],"position":{"start":{"line":361,"column":1,"offset":12276},"end":{"line":361,"column":8,"offset":12283},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*lwy8bR7igaroMXeb\" class=\"graf-image\" /></figure>### Filtering","position":{"start":{"line":363,"column":1,"offset":12285},"end":{"line":363,"column":122,"offset":12406},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Select rows based on a value inside your JSON:","position":{"start":{"line":365,"column":1,"offset":12408},"end":{"line":365,"column":47,"offset":12454},"indent":[]}}],"position":{"start":{"line":365,"column":1,"offset":12408},"end":{"line":365,"column":47,"offset":12454},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT\n client,\n data->'title' AS title\n FROM books\n  WHERE data->'title' = '\"Bryan Guner\"';","position":{"start":{"line":367,"column":1,"offset":12456},"end":{"line":371,"column":45,"offset":12568},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Notice WHERE uses ","position":{"start":{"line":373,"column":1,"offset":12570},"end":{"line":373,"column":19,"offset":12588},"indent":[]}},{"type":"inlineCode","value":"->","position":{"start":{"line":373,"column":19,"offset":12588},"end":{"line":373,"column":23,"offset":12592},"indent":[]}},{"type":"text","value":" so we must compare to JSON ","position":{"start":{"line":373,"column":23,"offset":12592},"end":{"line":373,"column":51,"offset":12620},"indent":[]}},{"type":"inlineCode","value":"'\"Bryan Guner\"'","position":{"start":{"line":373,"column":51,"offset":12620},"end":{"line":373,"column":68,"offset":12637},"indent":[]}}],"position":{"start":{"line":373,"column":1,"offset":12570},"end":{"line":373,"column":68,"offset":12637},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Or we could use ","position":{"start":{"line":375,"column":1,"offset":12639},"end":{"line":375,"column":17,"offset":12655},"indent":[]}},{"type":"inlineCode","value":"->>","position":{"start":{"line":375,"column":17,"offset":12655},"end":{"line":375,"column":22,"offset":12660},"indent":[]}},{"type":"text","value":" and compare to ","position":{"start":{"line":375,"column":22,"offset":12660},"end":{"line":375,"column":38,"offset":12676},"indent":[]}},{"type":"inlineCode","value":"'Bryan Guner'","position":{"start":{"line":375,"column":38,"offset":12676},"end":{"line":375,"column":53,"offset":12691},"indent":[]}}],"position":{"start":{"line":375,"column":1,"offset":12639},"end":{"line":375,"column":53,"offset":12691},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":377,"column":1,"offset":12693},"end":{"line":377,"column":8,"offset":12700},"indent":[]}}],"position":{"start":{"line":377,"column":1,"offset":12693},"end":{"line":377,"column":8,"offset":12700},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*poASndLoU71qlXqE\" class=\"graf-image\" /></figure>### Nested filtering","position":{"start":{"line":379,"column":1,"offset":12702},"end":{"line":379,"column":129,"offset":12830},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Find rows based on the value of a nested JSON object:","position":{"start":{"line":381,"column":1,"offset":12832},"end":{"line":381,"column":54,"offset":12885},"indent":[]}}],"position":{"start":{"line":381,"column":1,"offset":12832},"end":{"line":381,"column":54,"offset":12885},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT\n client,\n data->'title' AS title\n FROM books\n  WHERE data->'author'->>'last_name' = 'Kerouac';","position":{"start":{"line":383,"column":1,"offset":12887},"end":{"line":387,"column":54,"offset":13008},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":389,"column":1,"offset":13010},"end":{"line":389,"column":8,"offset":13017},"indent":[]}}],"position":{"start":{"line":389,"column":1,"offset":13010},"end":{"line":389,"column":8,"offset":13017},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*R1kOhDK19ntdUYkq\" class=\"graf-image\" /></figure>### A real world example","position":{"start":{"line":391,"column":1,"offset":13019},"end":{"line":391,"column":133,"offset":13151},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"CREATE TABLE events (\n  name varchar(200),\n  visitor_id varchar(200),\n  properties json,\n  browser json\n);","position":{"start":{"line":393,"column":1,"offset":13153},"end":{"line":398,"column":7,"offset":13283},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We're going to store events in this table, like pageviews. Each event has properties, which could be anything (e.g. current page) and also sends information about the browser (like OS, screen resolution, etc). Both of these are completely free form and could change over time (as we think of extra stuff to track).","position":{"start":{"line":400,"column":1,"offset":13285},"end":{"line":400,"column":315,"offset":13599},"indent":[]}}],"position":{"start":{"line":400,"column":1,"offset":13285},"end":{"line":400,"column":315,"offset":13599},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"INSERT INTO events VALUES (\n  'pageview', '1',\n  '{ \"page\": \"/\" }',\n  '{ \"name\": \"Chrome\", \"os\": \"Mac\", \"resolution\": { \"x\": 1440, \"y\": 900 } }'\n);\nINSERT INTO events VALUES (\n  'pageview', '2',\n  '{ \"page\": \"/\" }',\n  '{ \"name\": \"Firefox\", \"os\": \"Windows\", \"resolution\": { \"x\": 1920, \"y\": 1200 } }'\n);\nINSERT INTO events VALUES (\n  'pageview', '1',\n  '{ \"page\": \"/account\" }',\n  '{ \"name\": \"Chrome\", \"os\": \"Mac\", \"resolution\": { \"x\": 1440, \"y\": 900 } }'\n);\nINSERT INTO events VALUES (\n  'purchase', '5',\n  '{ \"amount\": 10 }',\n  '{ \"name\": \"Firefox\", \"os\": \"Windows\", \"resolution\": { \"x\": 1024, \"y\": 768 } }'\n);\nINSERT INTO events VALUES (\n  'purchase', '15',\n  '{ \"amount\": 200 }',\n  '{ \"name\": \"Firefox\", \"os\": \"Windows\", \"resolution\": { \"x\": 1280, \"y\": 800 } }'\n);\nINSERT INTO events VALUES (\n  'purchase', '15',\n  '{ \"amount\": 500 }',\n  '{ \"name\": \"Firefox\", \"os\": \"Windows\", \"resolution\": { \"x\": 1280, \"y\": 800 } }'\n);","position":{"start":{"line":402,"column":1,"offset":13601},"end":{"line":431,"column":7,"offset":14643},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Now lets select everything:","position":{"start":{"line":433,"column":1,"offset":14645},"end":{"line":433,"column":28,"offset":14672},"indent":[]}}],"position":{"start":{"line":433,"column":1,"offset":14645},"end":{"line":433,"column":28,"offset":14672},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"SELECT * FROM events;","position":{"start":{"line":435,"column":1,"offset":14674},"end":{"line":435,"column":26,"offset":14699},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":437,"column":1,"offset":14701},"end":{"line":437,"column":8,"offset":14708},"indent":[]}}],"position":{"start":{"line":437,"column":1,"offset":14701},"end":{"line":437,"column":8,"offset":14708},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*ZPHfB4FxjSIlAVxL\" class=\"graf-image\" /></figure>### JSON operators + PostgreSQL aggregate functions","position":{"start":{"line":439,"column":1,"offset":14710},"end":{"line":439,"column":160,"offset":14869},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Using the JSON operators, combined with traditional PostgreSQL aggregate functions, we can pull out whatever we want. You have the full might of an RDBMS at your disposal.","position":{"start":{"line":441,"column":1,"offset":14871},"end":{"line":441,"column":172,"offset":15042},"indent":[]}}],"position":{"start":{"line":441,"column":1,"offset":14871},"end":{"line":441,"column":172,"offset":15042},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<span id=\"4ffd\">","position":{"start":{"line":443,"column":5,"offset":15048},"end":{"line":443,"column":21,"offset":15064},"indent":[]}},{"type":"text","value":"Lets see browser usage:","position":{"start":{"line":443,"column":21,"offset":15064},"end":{"line":443,"column":44,"offset":15087},"indent":[]}},{"type":"html","value":"</span>","position":{"start":{"line":443,"column":44,"offset":15087},"end":{"line":443,"column":51,"offset":15094},"indent":[]}}],"position":{"start":{"line":443,"column":5,"offset":15048},"end":{"line":443,"column":51,"offset":15094},"indent":[]}}],"position":{"start":{"line":443,"column":1,"offset":15044},"end":{"line":443,"column":51,"offset":15094},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<span id=\"261c\">","position":{"start":{"line":444,"column":5,"offset":15099},"end":{"line":444,"column":21,"offset":15115},"indent":[]}},{"type":"inlineCode","value":"SELECT browser->>'name' AS browser, count(browser) FROM events GROUP BY browser->>'name';","position":{"start":{"line":444,"column":21,"offset":15115},"end":{"line":444,"column":112,"offset":15206},"indent":[]}},{"type":"html","value":"</span>","position":{"start":{"line":444,"column":112,"offset":15206},"end":{"line":444,"column":119,"offset":15213},"indent":[]}}],"position":{"start":{"line":444,"column":5,"offset":15099},"end":{"line":444,"column":119,"offset":15213},"indent":[]}}],"position":{"start":{"line":444,"column":1,"offset":15095},"end":{"line":444,"column":119,"offset":15213},"indent":[]}}],"position":{"start":{"line":443,"column":1,"offset":15044},"end":{"line":444,"column":119,"offset":15213},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":446,"column":1,"offset":15215},"end":{"line":446,"column":8,"offset":15222},"indent":[]}}],"position":{"start":{"line":446,"column":1,"offset":15215},"end":{"line":446,"column":8,"offset":15222},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*4lEv2DgUk33FeUgo\" class=\"graf-image\" /></figure>- <span id=\"946c\">Total revenue per visitor:</span>","position":{"start":{"line":448,"column":1,"offset":15224},"end":{"line":448,"column":160,"offset":15383},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"SELECT visitor_id, SUM(CAST(properties->>'amount' AS integer)) AS total FROM events WHERE CAST(properties->>'amount' AS integer) > 0 GROUP BY visitor_id;","position":{"start":{"line":450,"column":1,"offset":15385},"end":{"line":450,"column":156,"offset":15540},"indent":[]}}],"position":{"start":{"line":450,"column":1,"offset":15385},"end":{"line":450,"column":156,"offset":15540},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":452,"column":1,"offset":15542},"end":{"line":452,"column":8,"offset":15549},"indent":[]}}],"position":{"start":{"line":452,"column":1,"offset":15542},"end":{"line":452,"column":8,"offset":15549},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*HxOS3CgwXBJ6A2FP\" class=\"graf-image\" /></figure>- <span id=\"9850\">Average screen resolution</span>\n- <span id=\"132f\">`SELECT AVG(CAST(browser->'resolution'->>'x' AS integer)) AS width, AVG(CAST(browser->'resolution'->>'y' AS integer)) AS height FROM events;`</span>","position":{"start":{"line":454,"column":1,"offset":15551},"end":{"line":455,"column":167,"offset":15876},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Output:","position":{"start":{"line":457,"column":1,"offset":15878},"end":{"line":457,"column":8,"offset":15885},"indent":[]}}],"position":{"start":{"line":457,"column":1,"offset":15878},"end":{"line":457,"column":8,"offset":15885},"indent":[]}},{"type":"html","value":"<figure><img src=\"https://cdn-images-1.medium.com/max/800/0*iyv4Iv4Rc8M8mwt1\" class=\"graf-image\" /></figure>#### If you found this guide helpful feel free to checkout my github/gists where I host similar content:","position":{"start":{"line":459,"column":1,"offset":15887},"end":{"line":459,"column":213,"offset":16099},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://gist.github.com/bgoonz\" class=\"markup--anchor markup--p-anchor\">","position":{"start":{"line":461,"column":1,"offset":16101},"end":{"line":461,"column":82,"offset":16182},"indent":[]}},{"type":"text","value":"bgoonz's gists  GitHub","position":{"start":{"line":461,"column":82,"offset":16182},"end":{"line":461,"column":105,"offset":16205},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":461,"column":105,"offset":16205},"end":{"line":461,"column":109,"offset":16209},"indent":[]}}],"position":{"start":{"line":461,"column":1,"offset":16101},"end":{"line":461,"column":109,"offset":16209},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://github.com/bgoonz\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://github.com/bgoonz\">","position":{"start":{"line":463,"column":1,"offset":16211},"end":{"line":463,"column":122,"offset":16332},"indent":[]}},{"type":"html","value":"<strong>","position":{"start":{"line":463,"column":122,"offset":16332},"end":{"line":463,"column":130,"offset":16340},"indent":[]}},{"type":"text","value":"bgoonzOverview","position":{"start":{"line":463,"column":130,"offset":16340},"end":{"line":463,"column":147,"offset":16357},"indent":[]}},{"type":"html","value":"</strong>","position":{"start":{"line":463,"column":147,"offset":16357},"end":{"line":463,"column":156,"offset":16366},"indent":[]}},{"type":"html","value":"<br />","position":{"start":{"line":463,"column":156,"offset":16366},"end":{"line":463,"column":162,"offset":16372},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":463,"column":162,"offset":16372},"end":{"line":464,"column":1,"offset":16373},"indent":[1]}},{"type":"html","value":"<em>","position":{"start":{"line":464,"column":1,"offset":16373},"end":{"line":464,"column":5,"offset":16377},"indent":[]}},{"type":"text","value":"Web Developer, Electrical Engineer JavaScript | CSS | Bootstrap | Python | React | Node.js | Express | Sequelize","position":{"start":{"line":464,"column":5,"offset":16377},"end":{"line":464,"column":118,"offset":16490},"indent":[]}},{"type":"html","value":"</em>","position":{"start":{"line":464,"column":118,"offset":16490},"end":{"line":464,"column":123,"offset":16495},"indent":[]}},{"type":"text","value":"github.com","position":{"start":{"line":464,"column":123,"offset":16495},"end":{"line":464,"column":133,"offset":16505},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":464,"column":133,"offset":16505},"end":{"line":464,"column":137,"offset":16509},"indent":[]}},{"type":"html","value":"<a href=\"https://github.com/bgoonz\" class=\"js-mixtapeImage mixtapeImage u-ignoreBlock\">","position":{"start":{"line":464,"column":137,"offset":16509},"end":{"line":464,"column":224,"offset":16596},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":464,"column":224,"offset":16596},"end":{"line":464,"column":228,"offset":16600},"indent":[]}}],"position":{"start":{"line":463,"column":1,"offset":16211},"end":{"line":464,"column":228,"offset":16600},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Or Checkout my personal Resource Site:","position":{"start":{"line":466,"column":1,"offset":16602},"end":{"line":466,"column":39,"offset":16640},"indent":[]}}],"position":{"start":{"line":466,"column":1,"offset":16602},"end":{"line":466,"column":39,"offset":16640},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://goofy-euclid-1cd736.netlify.app/\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://goofy-euclid-1cd736.netlify.app/\">","position":{"start":{"line":468,"column":1,"offset":16642},"end":{"line":468,"column":152,"offset":16793},"indent":[]}},{"type":"html","value":"<strong>","position":{"start":{"line":468,"column":152,"offset":16793},"end":{"line":468,"column":160,"offset":16801},"indent":[]}},{"type":"text","value":"a/A-Student-Resources","position":{"start":{"line":468,"column":160,"offset":16801},"end":{"line":468,"column":181,"offset":16822},"indent":[]}},{"type":"html","value":"</strong>","position":{"start":{"line":468,"column":181,"offset":16822},"end":{"line":468,"column":190,"offset":16831},"indent":[]}},{"type":"html","value":"<br />","position":{"start":{"line":468,"column":190,"offset":16831},"end":{"line":468,"column":196,"offset":16837},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":468,"column":196,"offset":16837},"end":{"line":469,"column":1,"offset":16838},"indent":[1]}},{"type":"html","value":"<em>","position":{"start":{"line":469,"column":1,"offset":16838},"end":{"line":469,"column":5,"offset":16842},"indent":[]}},{"type":"text","value":"Edit description","position":{"start":{"line":469,"column":5,"offset":16842},"end":{"line":469,"column":21,"offset":16858},"indent":[]}},{"type":"html","value":"</em>","position":{"start":{"line":469,"column":21,"offset":16858},"end":{"line":469,"column":26,"offset":16863},"indent":[]}},{"type":"text","value":"goofy-euclid-1cd736.netlify.app","position":{"start":{"line":469,"column":26,"offset":16863},"end":{"line":469,"column":57,"offset":16894},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":469,"column":57,"offset":16894},"end":{"line":469,"column":61,"offset":16898},"indent":[]}},{"type":"html","value":"<a href=\"https://goofy-euclid-1cd736.netlify.app/\" class=\"js-mixtapeImage mixtapeImage u-ignoreBlock\">","position":{"start":{"line":469,"column":61,"offset":16898},"end":{"line":469,"column":163,"offset":17000},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":469,"column":163,"offset":17000},"end":{"line":469,"column":167,"offset":17004},"indent":[]}}],"position":{"start":{"line":468,"column":1,"offset":16642},"end":{"line":469,"column":167,"offset":17004},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"If you found this guide helpful feel free to checkout my GitHub/gists where I host similar content:","position":{"start":{"line":471,"column":5,"offset":17010},"end":{"line":471,"column":104,"offset":17109},"indent":[]}}],"position":{"start":{"line":471,"column":1,"offset":17006},"end":{"line":471,"column":104,"offset":17109},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://gist.github.com/bgoonz\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://gist.github.com/bgoonz\">","position":{"start":{"line":473,"column":1,"offset":17111},"end":{"line":473,"column":132,"offset":17242},"indent":[]}},{"type":"html","value":"<strong>","position":{"start":{"line":473,"column":132,"offset":17242},"end":{"line":473,"column":140,"offset":17250},"indent":[]}},{"type":"text","value":"bgoonz's gists","position":{"start":{"line":473,"column":140,"offset":17250},"end":{"line":473,"column":154,"offset":17264},"indent":[]}},{"type":"html","value":"</strong>","position":{"start":{"line":473,"column":154,"offset":17264},"end":{"line":473,"column":163,"offset":17273},"indent":[]}},{"type":"html","value":"<br />","position":{"start":{"line":473,"column":163,"offset":17273},"end":{"line":473,"column":169,"offset":17279},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":473,"column":169,"offset":17279},"end":{"line":474,"column":1,"offset":17280},"indent":[1]}},{"type":"html","value":"<em>","position":{"start":{"line":474,"column":1,"offset":17280},"end":{"line":474,"column":5,"offset":17284},"indent":[]}},{"type":"text","value":"Instantly share code, notes, and snippets. Web Developer, Electrical Engineer JavaScript | CSS | Bootstrap | Python |","position":{"start":{"line":474,"column":5,"offset":17284},"end":{"line":474,"column":123,"offset":17402},"indent":[]}},{"type":"html","value":"</em>","position":{"start":{"line":474,"column":123,"offset":17402},"end":{"line":474,"column":128,"offset":17407},"indent":[]}},{"type":"text","value":"gist.github.com","position":{"start":{"line":474,"column":128,"offset":17407},"end":{"line":474,"column":143,"offset":17422},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":474,"column":143,"offset":17422},"end":{"line":474,"column":147,"offset":17426},"indent":[]}},{"type":"html","value":"<a href=\"https://gist.github.com/bgoonz\" class=\"js-mixtapeImage mixtapeImage u-ignoreBlock\">","position":{"start":{"line":474,"column":147,"offset":17426},"end":{"line":474,"column":239,"offset":17518},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":474,"column":239,"offset":17518},"end":{"line":474,"column":243,"offset":17522},"indent":[]}}],"position":{"start":{"line":473,"column":1,"offset":17111},"end":{"line":474,"column":243,"offset":17522},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","value":"<a href=\"https://github.com/bgoonz\" class=\"markup--anchor markup--mixtapeEmbed-anchor\" title=\"https://github.com/bgoonz\">","position":{"start":{"line":476,"column":1,"offset":17524},"end":{"line":476,"column":122,"offset":17645},"indent":[]}},{"type":"html","value":"<strong>","position":{"start":{"line":476,"column":122,"offset":17645},"end":{"line":476,"column":130,"offset":17653},"indent":[]}},{"type":"text","value":"bgoonzOverview","position":{"start":{"line":476,"column":130,"offset":17653},"end":{"line":476,"column":147,"offset":17670},"indent":[]}},{"type":"html","value":"</strong>","position":{"start":{"line":476,"column":147,"offset":17670},"end":{"line":476,"column":156,"offset":17679},"indent":[]}},{"type":"html","value":"<br />","position":{"start":{"line":476,"column":156,"offset":17679},"end":{"line":476,"column":162,"offset":17685},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":476,"column":162,"offset":17685},"end":{"line":477,"column":1,"offset":17686},"indent":[1]}},{"type":"html","value":"<em>","position":{"start":{"line":477,"column":1,"offset":17686},"end":{"line":477,"column":5,"offset":17690},"indent":[]}},{"type":"text","value":"Web Developer, Electrical Engineer JavaScript | CSS | Bootstrap | Python | React | Node.js | Express | Sequelize","position":{"start":{"line":477,"column":5,"offset":17690},"end":{"line":477,"column":118,"offset":17803},"indent":[]}},{"type":"html","value":"</em>","position":{"start":{"line":477,"column":118,"offset":17803},"end":{"line":477,"column":123,"offset":17808},"indent":[]}},{"type":"text","value":"github.com","position":{"start":{"line":477,"column":123,"offset":17808},"end":{"line":477,"column":133,"offset":17818},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":477,"column":133,"offset":17818},"end":{"line":477,"column":137,"offset":17822},"indent":[]}},{"type":"html","value":"<a href=\"https://github.com/bgoonz\" class=\"js-mixtapeImage mixtapeImage u-ignoreBlock\">","position":{"start":{"line":477,"column":137,"offset":17822},"end":{"line":477,"column":224,"offset":17909},"indent":[]}},{"type":"html","value":"</a>","position":{"start":{"line":477,"column":224,"offset":17909},"end":{"line":477,"column":228,"offset":17913},"indent":[]}}],"position":{"start":{"line":476,"column":1,"offset":17524},"end":{"line":477,"column":228,"offset":17913},"indent":[1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Or Checkout my personal Resource Site:","position":{"start":{"line":479,"column":5,"offset":17919},"end":{"line":479,"column":43,"offset":17957},"indent":[]}}],"position":{"start":{"line":479,"column":1,"offset":17915},"end":{"line":479,"column":43,"offset":17957},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":480,"column":1,"offset":17958}}}}