{"expireTime":9007200908525413000,"key":"transformer-remark-markdown-html-ast-079dbe49a8d52c306d148bea09f2b992--","val":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"AJAX and APIs - React","position":{"start":{"line":3,"column":3,"offset":4},"end":{"line":3,"column":24,"offset":25}}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":24,"offset":25}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Excerpt","position":{"start":{"line":5,"column":6,"offset":32},"end":{"line":5,"column":13,"offset":39}}}],"position":{"start":{"line":5,"column":3,"offset":29},"end":{"line":5,"column":13,"offset":39}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A JavaScript library for building user interfaces","position":{"start":{"line":7,"column":3,"offset":44},"end":{"line":7,"column":52,"offset":93}}}],"position":{"start":{"line":7,"column":3,"offset":44},"end":{"line":7,"column":52,"offset":93}}},{"type":"text","value":"\n"}],"position":{"start":{"line":5,"column":1,"offset":27},"end":{"line":7,"column":52,"offset":93}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":9,"column":1,"offset":95},"end":{"line":9,"column":4,"offset":98}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#how-can-i-make-an-ajax-call"},"children":[],"position":{"start":{"line":11,"column":5,"offset":104},"end":{"line":11,"column":81,"offset":180}}},{"type":"text","value":"How can I make an AJAX call?","position":{"start":{"line":11,"column":81,"offset":180},"end":{"line":11,"column":109,"offset":208}}}],"position":{"start":{"line":11,"column":1,"offset":100},"end":{"line":11,"column":109,"offset":208}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can use any AJAX library you like with React. Some popular ones are ","position":{"start":{"line":13,"column":1,"offset":210},"end":{"line":13,"column":73,"offset":282}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/axios/axios"},"children":[{"type":"text","value":"Axios","position":{"start":{"line":13,"column":74,"offset":283},"end":{"line":13,"column":79,"offset":288}}}],"position":{"start":{"line":13,"column":73,"offset":282},"end":{"line":13,"column":112,"offset":321}}},{"type":"text","value":", ","position":{"start":{"line":13,"column":112,"offset":321},"end":{"line":13,"column":114,"offset":323}}},{"type":"element","tagName":"a","properties":{"href":"https://api.jquery.com/jQuery.ajax/"},"children":[{"type":"text","value":"jQuery AJAX","position":{"start":{"line":13,"column":115,"offset":324},"end":{"line":13,"column":126,"offset":335}}}],"position":{"start":{"line":13,"column":114,"offset":323},"end":{"line":13,"column":164,"offset":373}}},{"type":"text","value":", and the browser built-in ","position":{"start":{"line":13,"column":164,"offset":373},"end":{"line":13,"column":191,"offset":400}}},{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"},"children":[{"type":"text","value":"window.fetch","position":{"start":{"line":13,"column":192,"offset":401},"end":{"line":13,"column":204,"offset":413}}}],"position":{"start":{"line":13,"column":191,"offset":400},"end":{"line":13,"column":265,"offset":474}}},{"type":"text","value":".","position":{"start":{"line":13,"column":265,"offset":474},"end":{"line":13,"column":266,"offset":475}}}],"position":{"start":{"line":13,"column":1,"offset":210},"end":{"line":13,"column":266,"offset":475}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#where-in-the-component-lifecycle-should-i-make-an-ajax-call"},"children":[],"position":{"start":{"line":15,"column":5,"offset":481},"end":{"line":15,"column":113,"offset":589}}},{"type":"text","value":"Where in the component lifecycle should I make an AJAX call?","position":{"start":{"line":15,"column":113,"offset":589},"end":{"line":15,"column":173,"offset":649}}}],"position":{"start":{"line":15,"column":1,"offset":477},"end":{"line":15,"column":173,"offset":649}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You should populate data with AJAX calls in the ","position":{"start":{"line":17,"column":1,"offset":651},"end":{"line":17,"column":49,"offset":699}}},{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/react-component.html#mounting"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"componentDidMount"}],"position":{"start":{"line":17,"column":50,"offset":700},"end":{"line":17,"column":69,"offset":719}}}],"position":{"start":{"line":17,"column":49,"offset":699},"end":{"line":17,"column":126,"offset":776}}},{"type":"text","value":" lifecycle method. This is so you can use ","position":{"start":{"line":17,"column":126,"offset":776},"end":{"line":17,"column":168,"offset":818}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"setState"}],"position":{"start":{"line":17,"column":168,"offset":818},"end":{"line":17,"column":178,"offset":828}}},{"type":"text","value":" to update your component when the data is retrieved.","position":{"start":{"line":17,"column":178,"offset":828},"end":{"line":17,"column":231,"offset":881}}}],"position":{"start":{"line":17,"column":1,"offset":651},"end":{"line":17,"column":231,"offset":881}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/lists-and-keys.html#example-using-ajax-results-to-set-local-state"},"children":[],"position":{"start":{"line":19,"column":5,"offset":887},"end":{"line":19,"column":99,"offset":981}}},{"type":"text","value":"Example: Using AJAX results to set local state","position":{"start":{"line":19,"column":99,"offset":981},"end":{"line":19,"column":145,"offset":1027}}}],"position":{"start":{"line":19,"column":1,"offset":883},"end":{"line":19,"column":145,"offset":1027}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The component below demonstrates how to make an AJAX call in ","position":{"start":{"line":21,"column":1,"offset":1029},"end":{"line":21,"column":62,"offset":1090}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"componentDidMount"}],"position":{"start":{"line":21,"column":62,"offset":1090},"end":{"line":21,"column":81,"offset":1109}}},{"type":"text","value":" to populate local component state.","position":{"start":{"line":21,"column":81,"offset":1109},"end":{"line":21,"column":116,"offset":1144}}}],"position":{"start":{"line":21,"column":1,"offset":1029},"end":{"line":21,"column":116,"offset":1144}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The example API returns a JSON object like this:","position":{"start":{"line":23,"column":1,"offset":1146},"end":{"line":23,"column":49,"offset":1194}}}],"position":{"start":{"line":23,"column":1,"offset":1146},"end":{"line":23,"column":49,"offset":1194}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"{\n  \"items\": [\n    { \"id\": 1, \"name\": \"Apples\",  \"price\": \"$2\" },\n    { \"id\": 2, \"name\": \"Peaches\", \"price\": \"$5\" }\n  ]\n}\n"}],"position":{"start":{"line":25,"column":1,"offset":1196},"end":{"line":32,"column":4,"offset":1327}}}],"position":{"start":{"line":25,"column":1,"offset":1196},"end":{"line":32,"column":4,"offset":1327}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"class MyComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            items: []\n        };\n    }\n\n    componentDidMount() {\n        fetch('https://api.example.com/items')\n            .then((res) => res.json())\n            .then(\n                (result) => {\n                    this.setState({\n                        isLoaded: true,\n                        items: result.items\n                    });\n                },\n\n                (error) => {\n                    this.setState({\n                        isLoaded: true,\n                        error\n                    });\n                }\n            );\n    }\n\n    render() {\n        const { error, isLoaded, items } = this.state;\n        if (error) {\n            return <div>Error: {error.message}</div>;\n        } else if (!isLoaded) {\n            return <div>Loading...</div>;\n        } else {\n            return (\n                <ul>\n                    {items.map((item) => (\n                        <li key={item.id}>\n                            {item.name} {item.price}\n                        </li>\n                    ))}\n                </ul>\n            );\n        }\n    }\n}\n"}],"position":{"start":{"line":34,"column":1,"offset":1329},"end":{"line":84,"column":4,"offset":2596}}}],"position":{"start":{"line":34,"column":1,"offset":1329},"end":{"line":84,"column":4,"offset":2596}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here is the equivalent with ","position":{"start":{"line":86,"column":1,"offset":2598},"end":{"line":86,"column":29,"offset":2626}}},{"type":"element","tagName":"a","properties":{"href":"https://reactjs.org/docs/hooks-intro.html"},"children":[{"type":"text","value":"Hooks","position":{"start":{"line":86,"column":30,"offset":2627},"end":{"line":86,"column":35,"offset":2632}}}],"position":{"start":{"line":86,"column":29,"offset":2626},"end":{"line":86,"column":79,"offset":2676}}},{"type":"text","value":":","position":{"start":{"line":86,"column":79,"offset":2676},"end":{"line":86,"column":80,"offset":2677}}}],"position":{"start":{"line":86,"column":1,"offset":2598},"end":{"line":86,"column":80,"offset":2677}}},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[],"position":{"start":{"line":88,"column":1,"offset":2679},"end":{"line":88,"column":4,"offset":2682}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"function MyComponent() {\n    const [error, setError] = useState(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [items, setItems] = useState([]);\n\n    useEffect(() => {\n        fetch('https://api.example.com/items')\n            .then((res) => res.json())\n            .then(\n                (result) => {\n                    setIsLoaded(true);\n                    setItems(result);\n                },\n\n                (error) => {\n                    setIsLoaded(true);\n                    setError(error);\n                }\n            );\n    }, []);\n\n    if (error) {\n        return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n        return <div>Loading...</div>;\n    } else {\n        return (\n            <ul>\n                {items.map((item) => (\n                    <li key={item.id}>\n                        {item.name} {item.price}\n                    </li>\n                ))}\n            </ul>\n        );\n    }\n}\n"}],"position":{"start":{"line":91,"column":1,"offset":2685},"end":{"line":131,"column":4,"offset":3660}}}],"position":{"start":{"line":91,"column":1,"offset":2685},"end":{"line":131,"column":4,"offset":3660}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":132,"column":1,"offset":3661}}}}