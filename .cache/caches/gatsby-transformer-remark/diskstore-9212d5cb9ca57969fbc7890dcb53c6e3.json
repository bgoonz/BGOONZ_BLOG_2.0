{"expireTime":9007200911206588000,"key":"transformer-remark-markdown-html-c76df918abaa7b00729ffb98a3647fa9-gatsby-remark-prismjs-","val":"<h3>Question: How to get the file extension?</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">var</span> file1 <span class=\"token operator\">=</span> <span class=\"token string\">'50.xsl'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> file2 <span class=\"token operator\">=</span> <span class=\"token string\">'30.doc'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">getFileExtension</span><span class=\"token punctuation\">(</span>file1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//returs xsl</span>\n<span class=\"token function\">getFileExtension</span><span class=\"token punctuation\">(</span>file2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//returs doc</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFileExtension</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/*TODO*/</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Solution 1: Regular Expression</h3>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFileExtension1</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[.]</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[^.]+$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Solution 2: String <code class=\"language-text\">split</code> method</h3>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFileExtension2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> filename<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Those two solutions couldnot handle some edge cases, here is another more robust solution.</p>\n<h3>Solution3: String <code class=\"language-text\">slice</code>, <code class=\"language-text\">lastIndexOf</code> methods</h3>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> filename<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">.</span><span class=\"token function\">lastIndexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ''</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token string\">'filename'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ''</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token string\">'filename.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'txt'</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.hiddenfile'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ''</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFileExtension3</span><span class=\"token punctuation\">(</span><span class=\"token string\">'filename.with.many.dots.ext'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'ext'</span></code></pre></div>\n<p><em>How does it works?</em></p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf\">String.lastIndexOf()</a> method returns the last occurrence of the specified value (<code class=\"language-text\">'.'</code> in this case). Returns <code class=\"language-text\">-1</code> if the value is not found.</li>\n<li>The return values of <code class=\"language-text\">lastIndexOf</code> for parameter <code class=\"language-text\">'filename'</code> and <code class=\"language-text\">'.hiddenfile'</code> are <code class=\"language-text\">-1</code> and <code class=\"language-text\">0</code> respectively. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#%3E%3E%3E_%28Zero-fill_right_shift%29\">Zero-fill right shift operator (>>>)</a> will transform <code class=\"language-text\">-1</code> to <code class=\"language-text\">4294967295</code> and <code class=\"language-text\">-2</code> to <code class=\"language-text\">4294967294</code>, here is one trick to insure the filename unchanged in those edge cases.</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice\">String.prototype.slice()</a> extracts file extension from the index that was calculated above. If the index is more than the length of the filename, the result is <code class=\"language-text\">\"\"</code>.</li>\n</ul>\n<h3>Comparison</h3>\n<table>\n<thead>\n<tr>\n<th>Solution</th>\n<th align=\"center\">Paramters</th>\n<th align=\"center\">Results</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Solution 1: Regular Expression</td>\n<td align=\"center\">''<br> 'filename' <br> 'filename.txt' <br> '.hiddenfile' <br> 'filename.with.many.dots.ext'</td>\n<td align=\"center\">undefined <br> undefined <br> 'txt' <br> 'hiddenfile' <br> 'ext' <br></td>\n</tr>\n<tr>\n<td>Solution 2: String <code class=\"language-text\">split</code></td>\n<td align=\"center\">''<br> 'filename' <br> 'filename.txt' <br> '.hiddenfile' <br> 'filename.with.many.dots.ext'</td>\n<td align=\"center\">'' <br> 'filename' <br> 'txt' <br> 'hiddenfile' <br> 'ext' <br></td>\n</tr>\n<tr>\n<td>Solution 3: String <code class=\"language-text\">slice</code>, <code class=\"language-text\">lastIndexOf</code></td>\n<td align=\"center\">''<br> 'filename' <br> 'filename.txt' <br> '.hiddenfile' <br> 'filename.with.many.dots.ext'</td>\n<td align=\"center\">'' <br> '' <br> 'txt' <br> '' <br> 'ext' <br></td>\n</tr>\n</tbody>\n</table>\n<h3>Live Demo and Performance</h3>\n<p><a href=\"https://jsbin.com/tipofu/edit?js,console\">Here</a> is the live demo of the above codes.</p>\n<p><a href=\"http://jsperf.com/extract-file-extension\">Here</a> is the performance test of those 3 solutions.</p>"}