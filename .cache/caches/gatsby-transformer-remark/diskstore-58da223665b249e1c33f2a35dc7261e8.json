{"expireTime":9007200911206589000,"key":"transformer-remark-markdown-html-dc607ccbd172ebdc49d713e1d96d2355-gatsby-remark-prismjs-","val":"<h1>Comprehensive Guide To ReactJS</h1>\n<h4>Table of Contents</h4>\n<p><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#an-introduction-to-the-react-view-library\">An introduction to React</a><br>\n<a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#how-to-use-create-react-app\">How to use create-react-app</a></p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#variables\">Variables</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#arrow-functions\">Arrow functions</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#rest-and-spread\">Rest and spread</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#object-and-array-destructuring\">Object and array destructuring</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#template-literals\">Template literals</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#classes\">Classes</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#callbacks\">Callbacks</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#promises\">Promises</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#async-await\">Async/Await</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#es-modules\">ES Modules</a></li>\n</ul>\n<p>*<strong>*SECTION 2**</strong>: REACT CONCEPTS</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#single-page-applications\">Single Page Applications</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#declarative\">Declarative</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#immutability\">Immutability</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#purity\">Purity</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#composition\">Composition</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#the-virtual-dom\">The Virtual DOM</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#unidirectional-data-flow\">Unidirectional Data Flow</a></li>\n</ul>\n<p>*<strong>*SECTION 3**</strong>: IN-DEPTH REACT</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#jsx\">JSX</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#components\">Components</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#state\">State</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#props\">Props</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#presentational-vs-container-components\">Presentational vs container components</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#state-vs-props\">State vs props</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#proptypes\">PropTypes</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#react-fragment\">React Fragment</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#events\">Events</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#lifecycle-events\">Lifecycle Events</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#forms-in-react\">Forms in React</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#reference-a-dom-element\">Reference a DOM element</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#server-side-rendering\">Server side rendering</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#the-context-api\">The Context API</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#higher-order-components\">Higher order components</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#render-props\">Render Props</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#hooks\">Hooks</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#code-splitting\">Code splitting</a></li>\n</ul>\n<p>*<strong>*SECTION 4**</strong>: PRACTICAL EXAMPLES</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#build-a-simple-counter\">Build a simple counter</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#fetch-and-display-github-users-information-via-api\">Fetch and display GitHub users information via API</a></li>\n</ul>\n<p>*<strong>*SECTION 5**</strong>: STYLING</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#css-in-react\">CSS in React</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#sass-in-react\">SASS in React</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#styled-components\">Styled Components</a></li>\n</ul>\n<p>*<strong>*SECTION 6**</strong>: TOOLING</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#babel\">Babel</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#webpack\">Webpack</a></li>\n</ul>\n<p>*<strong>*SECTION 7**</strong>: TESTING</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#jest\">Jest</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#testing-react-components\">Testing React components</a></li>\n</ul>\n<p>*<strong>*SECTION 8**</strong>: THE REACT ECOSYSTEM</p>\n<ul>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#react-router\">React Router</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#redux\">Redux</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#next-js\">Next.js</a></li>\n<li><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#gatsby\">Gatsby</a></li>\n</ul>\n<p><a href=\"https://www.freecodecamp.org/news/the-react-handbook-b71c27b0a795/#wrapping-up\">Wrapping up</a></p>\n<h3>An introduction to the React view library</h3>\n<h4>What is React?</h4>\n<p>React is a JavaScript library that aims to simplify development of visual interfaces.</p>\n<p>Developed at Facebook and released to the world in 2013, it drives some of the most widely used apps, powering Facebook and Instagram among countless other applications.</p>\n<p>Its primary goal is to make it easy to reason about an interface and its state at any point in time, by dividing the UI into a collection of components.</p>\n<h4>Why is React so popular?</h4>\n<p>React has taken the frontend web development world by storm. Why?</p>\n<h4>Less complex than the other alternatives</h4>\n<p>At the time when React was announced, Ember.js and Angular 1.x were the predominant choices as a framework. Both these imposed so many conventions on the code that porting an existing app was not convenient at all.</p>\n<p>React made a choice to be very easy to integrate into an existing project, because that's how they had to do it at Facebook in order to introduce it to the existing codebase. Also, those 2 frameworks brought too much to the table, while React only chose to implement the View layer instead of the full MVC stack.</p>\n<h4>Perfect timing</h4>\n<p>At the time, Angular 2.x was announced by Google, along with the backwards incompatibility and major changes it was going to bring. Moving from Angular 1 to 2 was like moving to a different framework, so this, along with execution speed improvements that React promised, made it something developers were eager to try.</p>\n<h4>Backed by Facebook</h4>\n<p>Being backed by Facebook is, of course, going to benefit a project if it turns out to be successful.</p>\n<p>Facebook currently has a strong interest in React, sees the value of it being Open Source, and this is a huge plus for all the developers using it in their own projects.</p>\n<h4>Is React simple to learn?</h4>\n<p>Even though I said that React is simpler than alternative frameworks, diving into React is still complicated, but mostly because of the corollary technologies that can be integrated with React, like Redux and GraphQL.</p>\n<p>React in itself has a very small API, and you basically need to understand 4 concepts to get started:</p>\n<ul>\n<li>Components</li>\n<li>JSX</li>\n<li>State</li>\n<li>Props</li>\n</ul>\n<p>All these (and more) are explained in this handbook.</p>\n<h4>How to install React on your development computer</h4>\n<p>How do you install React?</p>\n<p>React is a library, so saying <em>install</em> might sound a bit weird. Maybe <em>setup</em> is a better word, but you get the concept.</p>\n<p>There are various ways to setup React so that it can be used on your app or site.</p>\n<h4>Load React directly in the web page</h4>\n<p>The simplest one is to add the React JavaScript file into the page directly. This is best when your React app will interact with the elements present on a single page, and not actually controls the whole navigation aspect.</p>\n<p>In this case, you add 2 script tags to the end of the <code class=\"language-text\">body</code> tag:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;html>\n  ...\n  &lt;body>\n    ...\n    &lt;script\n      src=\"https://cdnjs.cloudflare.com/ajax/libs/react/16.8.3/umd/react.development.js\"\n      crossorigin\n    >\n&lt;/script>\n    &lt;script\n      src=\"https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.3/umd/react-dom.production.min.js\"\n      crossorigin\n    >\n&lt;/script>\n  &lt;/body>\n&lt;/html></code></pre></div>\n<blockquote>\n<p><em>Please change the version number to the latest version of React available.</em></p>\n</blockquote>\n<p>Here we loaded both React and React DOM. Why 2 libraries? Because React is 100% independent from the browser and can be used outside it (for example on Mobile devices with React Native). Hence the need for React DOM, to add the wrappers for the browser.</p>\n<p>After those tags you can load your JavaScript files that use React, or even inline JavaScript in a <code class=\"language-text\">script</code> tag:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script src=\"app.js\">\n&lt;/script>\n\n&lt;!-- or -->\n\n&lt;script>\n  //my app\n&lt;/script></code></pre></div>\n<p>To use JSX you need an extra step: load Babel</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script src=\"https://unpkg.com/babel-standalone@6/babel.min.js\">\n&lt;/script></code></pre></div>\n<p>and load your scripts with the special <code class=\"language-text\">text/babel</code> MIME type:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script src=\"app.js\" type=\"text/babel\">\n&lt;;/script></code></pre></div>\n<p>Now you can add JSX in your app.js file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  return &lt;button>Click me!&lt;/button>\n}\n\nReactDOM.render(&lt;Button />, document.getElementById('root'))</code></pre></div>\n<p>Check out this simple Glitch example: <a href=\"https://glitch.com/edit/#!/react-example-inline-jsx?path=script.js\">https://glitch.com/edit/#!/react-example-inline-jsx?path=script.js</a></p>\n<p>Starting in this way with script tags is good for building prototypes and enables a quick start without having to set up a complex workflow.</p>\n<h3>How to use create-react-app</h3>\n<p><code class=\"language-text\">create-react-app</code> is a project aimed at getting you up to speed with React in no time, and any React app that needs to outgrow a single page will find that <code class=\"language-text\">create-react-app</code> meets that need.</p>\n<p>You start by using <code class=\"language-text\">[npx](https://flaviocopes.com/npx/)</code>, which is an easy way to download and execute Node.js commands without installing them. <code class=\"language-text\">npx</code> comes with <code class=\"language-text\">npm</code> (since version 5.2) and if you don't have npm installed already, do it now from <a href=\"https://nodejs.org/\">https://nodejs.org</a> (npm is installed with Node).</p>\n<p>If you are unsure which version of npm you have, run <code class=\"language-text\">npm -v</code> to check if you need to update.</p>\n<blockquote>\n<p><em>Tip: check out my <a href=\"https://flaviocopes.com/macos-terminal/\">OSX terminal tutorial</a> if you're unfamiliar with using the terminal, applies to Linux as well â€” I'm sorry but I don't have a tutorial for Windows at the moment, but Google is your friend.</em></p>\n</blockquote>\n<p>When you run <code class=\"language-text\">npx create-react-app &lt;app-name></code>, <code class=\"language-text\">npx</code> is going to <em>download</em> the most recent <code class=\"language-text\">create-react-app</code> release, run it, and then remove it from your system. This is great because you will never have an outdated version on your system, and every time you run it, you're getting the latest and greatest code available.</p>\n<p>Let's start then:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx create-react-app todolist</code></pre></div>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/bZgizsJA2eDZwRUPT9KmAuqaWq2z-i5JYO49\" alt=\"bZgizsJA2eDZwRUPT9KmAuqaWq2z-i5JYO49\"></p>\n<p>This is when it finished running:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/yJPelCCT4muE3FcEci5CIDm4GEyy5rvdh6R5\" alt=\"yJPelCCT4muE3FcEci5CIDm4GEyy5rvdh6R5\"></p>\n<p><code class=\"language-text\">create-react-app</code> created a files structure in the folder you told (<code class=\"language-text\">todolist</code> in this case), and initialized a <a href=\"https://flaviocopes.com/git/\">Git</a> repository.</p>\n<p>It also added a few commands in the <code class=\"language-text\">package.json</code> file, so you can immediately start the app by going into the folder and run <code class=\"language-text\">npm start</code>.</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/bIcUqq3FBoasmTjSSeYJ1LA4yMndxfNF12nu\" alt=\"bIcUqq3FBoasmTjSSeYJ1LA4yMndxfNF12nu\"></p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/bD33lX4Yp0WYlgDNGCwr3Otftsstxvx1HvTQ\" alt=\"bD33lX4Yp0WYlgDNGCwr3Otftsstxvx1HvTQ\"></p>\n<p>In addition to <code class=\"language-text\">npm start</code>, <code class=\"language-text\">create-react-app</code> added a few other commands:</p>\n<ul>\n<li><code class=\"language-text\">npm run build</code>: to build the React application files in the <code class=\"language-text\">build</code> folder, ready to be deployed to a server</li>\n<li><code class=\"language-text\">npm test</code>: to run the testing suite using <a href=\"https://flaviocopes.com/jest/\">Jest</a></li>\n<li><code class=\"language-text\">npm eject</code>: to eject from <code class=\"language-text\">create-react-app</code></li>\n</ul>\n<p>Ejecting is the act of deciding that <code class=\"language-text\">create-react-app</code> has done enough for you, but you want to do more than what it allows.</p>\n<p>Since <code class=\"language-text\">create-react-app</code> is a set of common denominator conventions and a limited amount of options, it's probable that at some point your needs will demand something unique that outgrows the capabilities of <code class=\"language-text\">create-react-app</code>.</p>\n<p>When you eject, you lose the ability of automatic updates but you gain more flexibility in the <a href=\"https://flaviocopes.com/babel/\">Babel</a> and <a href=\"https://flaviocopes.com/webpack/\">Webpack</a> configuration.</p>\n<p>When you eject the action is irreversible. You will get 2 new folders in your application directory, <code class=\"language-text\">config</code> and <code class=\"language-text\">scripts</code>. Those contain the configurations - and now you can start editing them.</p>\n<blockquote>\n<p><em>If you already have a React app installed using an older version of React, first check the version by adding <code class=\"language-text\">console.log(React.version)</code> in your app, then you can update by running <code class=\"language-text\">yarn add react@16.7</code>, and yarn will prompt you to update (choose the latest version available). Repeat for <code class=\"language-text\">yarn add react-dom@16.7</code> (change \"16.7\" with whatever is the newest version of React at the moment)</em></p>\n</blockquote>\n<h4>CodeSandbox</h4>\n<p>An easy way to have the <code class=\"language-text\">create-react-app</code> structure, without installing it, is to go to <a href=\"https://codesandbox.io/s\">https://codesandbox.io/s</a> and choose \"React\".</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/DQRfUlIow3Z-icJy6XcMwTWh7gd8ZCwac02l\" alt=\"DQRfUlIow3Z-icJy6XcMwTWh7gd8ZCwac02l\"></p>\n<p>CodeSandbox is a great way to start a React project without having to install it locally.</p>\n<h4>Codepen</h4>\n<p>Another great solution is <a href=\"https://codepen.io/\">Codepen</a>.</p>\n<p>You can use this Codepen starter project which already comes pre-configured with React, with support for Hooks: <a href=\"https://codepen.io/flaviocopes/pen/VqeaxB\">https://codepen.io/flaviocopes/pen/VqeaxB</a></p>\n<p>Codepen \"pens\" are great for quick projects with one JavaScript file, while \"projects\" are great for projects with multiple files, like the ones we'll use the most when building React apps.</p>\n<p>One thing to note is that in Codepen, due to how it works internally, you don't use the regular ES Modules <code class=\"language-text\">import</code> syntax, but rather to import for example <code class=\"language-text\">useState</code>, you use</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { useState } = React</code></pre></div>\n<p>and not</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { useState } from 'react'</code></pre></div>\n<h3>SECTION 1: MODERN JAVASCRIPT CORE CONCEPTS YOU NEED TO KNOW TO USE REACT</h3>\n<h4>Find out if you have to learn something before diving into learning React</h4>\n<p>If you are willing to learn React, you first need to have a few things under your belt. There are some prerequisite technologies you have to be familiar with, in particular related to some of the more recent JavaScript features you'll use over and over in React.</p>\n<p>Sometimes people think one particular feature is provided by React, but instead it's just modern JavaScript syntax.</p>\n<p>There is no point in being an expert in those topics right away, but the more you dive into React, the more you'll need to master those.</p>\n<p>I will mention a list of things to get you up to speed quickly.</p>\n<h3>Variables</h3>\n<p>A variable is a literal assigned to an identifier, so you can reference and use it later in the program.</p>\n<p>Variables in JavaScript do not have any type attached. Once you assign a specific literal type to a variable, you can later reassign the variable to host any other type, without type errors or any issue.</p>\n<p>This is why JavaScript is sometimes referred to as \"untyped\".</p>\n<p>A variable must be declared before you can use it. There are 3 ways to do this, using <code class=\"language-text\">var</code>, <code class=\"language-text\">let</code> or <code class=\"language-text\">const</code>, and those 3 ways differ in how you can interact with the variable later on.</p>\n<h4>Using <code class=\"language-text\">var</code></h4>\n<p>Until ES2015, <code class=\"language-text\">var</code> was the only construct available for defining variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = 0</code></pre></div>\n<p>If you forget to add <code class=\"language-text\">var</code> you will be assigning a value to an undeclared variable, and the results might vary.</p>\n<p>In modern environments, with strict mode enabled, you will get an error. In older environments (or with strict mode disabled) this will simply initialize the variable and assign it to the global object.</p>\n<p>If you don't initialize the variable when you declare it, it will have the <code class=\"language-text\">undefined</code> value until you assign a value to it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a //typeof a === 'undefined'</code></pre></div>\n<p>You can redeclare the variable many times, overriding it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = 1\nvar a = 2</code></pre></div>\n<p>You can also declare multiple variables at once in the same statement:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = 1, b = 2jsx</code></pre></div>\n<p>The <strong>scope</strong> is the portion of code where the variable is visible.</p>\n<p>A variable initialized with <code class=\"language-text\">var</code> outside of any function is assigned to the global object, has a global scope and is visible everywhere. A variable initialized with <code class=\"language-text\">var</code> inside a function is assigned to that function, it's local and is visible only inside it, just like a function parameter.</p>\n<p>Any variable defined in a function with the same name as a global variable takes precedence over the global variable, shadowing it.</p>\n<p>It's important to understand that a block (identified by a pair of curly braces) does not define a new scope. A new scope is only created when a function is created, because <code class=\"language-text\">var</code> does not have block scope, but function scope.</p>\n<p>Inside a function, any variable defined in it is visible throughout all the function code, even if the variable is declared at the end of the function it can still be referenced in the beginning, because JavaScript before executing the code actually <em>moves all variables on top</em> (something that is called <strong>hoisting</strong>). To avoid confusion, always declare variables at the beginning of a function.</p>\n<h4>Using <code class=\"language-text\">let</code></h4>\n<p><code class=\"language-text\">let</code> is a new feature introduced in ES2015 and it's essentially a block scoped version of <code class=\"language-text\">var</code>. Its scope is limited to the block, statement or expression where it's defined, and all the contained inner blocks.</p>\n<p>Modern JavaScript developers might choose to only use <code class=\"language-text\">let</code> and completely discard the use of <code class=\"language-text\">var</code>.</p>\n<blockquote>\n<p><em>If <code class=\"language-text\">let</code> seems an obscure term, just read <code class=\"language-text\">let color = 'red'</code> as</em> let the color be red <em>and it all makes much more sense</em></p>\n</blockquote>\n<p>Defining <code class=\"language-text\">let</code> outside of any function - contrary to <code class=\"language-text\">var</code> - does not create a global variable.</p>\n<h4>Using <code class=\"language-text\">const</code></h4>\n<p>Variables declared with <code class=\"language-text\">var</code> or <code class=\"language-text\">let</code> can be changed later on in the program, and reassigned. Once a <code class=\"language-text\">const</code> is initialized, its value can never be changed again, and it can't be reassigned to a different value.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a = 'test'</code></pre></div>\n<p>We can't assign a different literal to the <code class=\"language-text\">a</code> const. We can however mutate <code class=\"language-text\">a</code> if it's an object that provides methods that mutate its contents.</p>\n<p><code class=\"language-text\">const</code> does not provide immutability, just makes sure that the reference can't be changed.</p>\n<p><code class=\"language-text\">const</code> has block scope, same as <code class=\"language-text\">let</code>.</p>\n<p>Modern JavaScript developers might choose to always use <code class=\"language-text\">const</code> for variables that don't need to be reassigned later in the program.</p>\n<p>Why? Because we should always use the simplest construct available to avoid making errors down the road.</p>\n<h3>Arrow functions</h3>\n<p>Arrow functions were introduced in ES6 / ECMAScript 2015, and since their introduction they changed forever how JavaScript code looks (and works).</p>\n<p>In my opinion this change was so welcoming that you now rarely see the usage of the <code class=\"language-text\">function</code> keyword in modern codebases.</p>\n<p>Visually, it's a simple and welcome change, which allows you to write functions with a shorter syntax, from:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = function() {\n  //...\n}</code></pre></div>\n<p>to</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = () => {\n  //...\n}</code></pre></div>\n<p>If the function body contains just a single statement, you can omit the brackets and write all on a single line:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = () => doSomething()</code></pre></div>\n<p>Parameters are passed in the parentheses:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = (param1, param2) => doSomething(param1, param2)</code></pre></div>\n<p>If you have one (and just one) parameter, you could omit the parentheses completely:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = param => doSomething(param)</code></pre></div>\n<p>Thanks to this short syntax, arrow functions <strong>encourage the use of small functions</strong>.</p>\n<h3>Implicit return</h3>\n<p>Arrow functions allow you to have an implicit return: values are returned without having to use the <code class=\"language-text\">return</code> keyword.</p>\n<p>It works when there is a one-line statement in the function body:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = () => 'test'\n\nmyFunction() //'test'</code></pre></div>\n<p>Another example, when returning an object, remember to wrap the curly brackets in parentheses to avoid it being considered the wrapping function body brackets:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myFunction = () => ({ value: 'test' })\n\nmyFunction() //{value: 'test'}</code></pre></div>\n<h3>How this works in arrow functions</h3>\n<p><code class=\"language-text\">this</code> is a concept that can be complicated to grasp, as it varies a lot depending on the context and also varies depending on the mode of JavaScript (<em>strict mode</em> or not).</p>\n<p>It's important to clarify this concept because arrow functions behave very differently compared to regular functions.</p>\n<p>When defined as a method of an object, in a regular function <code class=\"language-text\">this</code> refers to the object, so you can do:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const car = {\n  model: 'Fiesta',\n  manufacturer: 'Ford',\n  fullName: function() {\n    return `${this.manufacturer} ${this.model}`\n  }\n}</code></pre></div>\n<p>calling <code class=\"language-text\">car.fullName()</code> will return <code class=\"language-text\">\"Ford Fiesta\"</code>.</p>\n<p>The <code class=\"language-text\">this</code> scope with arrow functions is <strong>inherited</strong> from the execution context. An arrow function does not bind <code class=\"language-text\">this</code> at all, so its value will be looked up in the call stack, so in this code <code class=\"language-text\">car.fullName()</code> will not work, and will return the string <code class=\"language-text\">\"undefined undefined\"</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const car = {\n  model: 'Fiesta',\n  manufacturer: 'Ford',\n  fullName: () => {\n    return `${this.manufacturer} ${this.model}`\n  }\n}</code></pre></div>\n<p>Due to this, arrow functions are not suited as object methods.</p>\n<p>Arrow functions cannot be used as constructors either, when instantiating an object will raise a <code class=\"language-text\">TypeError</code>.</p>\n<p>This is where regular functions should be used instead, <strong>when dynamic context is not needed</strong>.</p>\n<p>This is also a problem when handling events. DOM Event listeners set <code class=\"language-text\">this</code> to be the target element, and if you rely on <code class=\"language-text\">this</code> in an event handler, a regular function is necessary:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const link = document.querySelector('#link')\nlink.addEventListener('click', () => {\n  // this === window\n})\n\nconst link = document.querySelector('#link')\nlink.addEventListener('click', function() {\n  // this === link\n})</code></pre></div>\n<h3>Rest and spread</h3>\n<p>You can expand an array, an object or a string using the spread operator <code class=\"language-text\">...</code>.</p>\n<p>Let's start with an array example. Given</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a = [1, 2, 3]</code></pre></div>\n<p>you can create a new array using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const b = [...a, 4, 5, 6]</code></pre></div>\n<p>You can also create a copy of an array using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const c = [...a]</code></pre></div>\n<p>This works for objects as well. Clone an object with:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const newObj = { ...oldObj }</code></pre></div>\n<p>Using strings, the spread operator creates an array with each char in the string:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const hey = 'hey'\nconst arrayized = [...hey] // ['h', 'e', 'y']</code></pre></div>\n<p>This operator has some pretty useful applications. The most important one is the ability to use an array as function argument in a very simple way:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const f = (foo, bar) => {}\nconst a = [1, 2]\nf(...a)</code></pre></div>\n<p>(in the past you could do this using <code class=\"language-text\">f.apply(null, a)</code> but that's not as nice and readable)</p>\n<p>The <strong>rest element</strong> is useful when working with <strong>array destructuring</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const numbers = [1, 2, 3, 4, 5]\n[first, second, ...others] = numbers</code></pre></div>\n<p>and <strong>spread elements</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const numbers = [1, 2, 3, 4, 5]\nconst sum = (a, b, c, d, e) => a + b + c + d + e\nconst sumOfNumbers = sum(...numbers)</code></pre></div>\n<p>ES2018 introduces rest properties, which are the same but for objects.</p>\n<p><strong>Rest properties</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { first, second, ...others } = {\n  first: 1,\n  second: 2,\n  third: 3,\n  fourth: 4,\n  fifth: 5\n}\n\nfirst // 1\nsecond // 2\nothers // { third: 3, fourth: 4, fifth: 5 }</code></pre></div>\n<p><strong>Spread properties</strong> allow to create a new object by combining the properties of the object passed after the spread operator:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const items = { first, second, ...others }\nitems //{ first: 1, second: 2, third: 3, fourth: 4, fifth: 5 }</code></pre></div>\n<h3>Object and array destructuring</h3>\n<p>Given an object, using the destructuring syntax you can extract just some values and put them into named variables:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const person = {\n  firstName: 'Tom',\n  lastName: 'Cruise',\n  actor: true,\n  age: 54 //made up\n}\n\nconst { firstName: name, age } = person //name: Tom, age: 54</code></pre></div>\n<p><code class=\"language-text\">name</code> and <code class=\"language-text\">age</code> contain the desired values.</p>\n<p>The syntax also works on arrays:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a = [1, 2, 3, 4, 5]\nconst [first, second] = a</code></pre></div>\n<p>This statement creates 3 new variables by getting the items with index 0, 1, 4 from the array <code class=\"language-text\">a</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const [first, second, , , fifth] = a</code></pre></div>\n<h3>Template literals</h3>\n<p>Template Literals are a new ES2015 / ES6 feature that allows you to work with strings in a novel way compared to ES5 and below.</p>\n<p>The syntax at a first glance is very simple, just use backticks instead of single or double quotes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a_string = `something`</code></pre></div>\n<p>They are unique because they provide a lot of features that normal strings built with quotes do not, in particular:</p>\n<ul>\n<li>they offer a great syntax to define multiline strings</li>\n<li>they provide an easy way to interpolate variables and expressions in strings</li>\n<li>they allow you to create DSLs with template tags (DSL means domain specific language, and it's for example used in React by Styled Components, to define CSS for a component)</li>\n</ul>\n<p>Let's dive into each of these in detail.</p>\n<h4>Multiline strings</h4>\n<p>Pre-ES6, to create a string spanning over two lines you had to use the <code class=\"language-text\">\\</code> character at the end of a line:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string =\n  'first part \\\nsecond part'</code></pre></div>\n<p>This allows to create a string on 2 lines, but it's rendered on just one line:</p>\n<p><code class=\"language-text\">first part second part</code></p>\n<p>To render the string on multiple lines as well, you explicitly need to add <code class=\"language-text\">\\n</code> at the end of each line, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string =\n  'first line\\n \\\nsecond line'</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string = 'first line\\n' + 'second line'</code></pre></div>\n<p>Template literals make multiline strings much simpler.</p>\n<p>Once a template literal is opened with the backtick, you just press enter to create a new line, with no special characters, and it's rendered as-is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string = `Hey\nthis\nstring\nis awesome!`</code></pre></div>\n<p>Keep in mind that space is meaningful, so doing this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string = `First\n                Second`</code></pre></div>\n<p>is going to create a string like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">First\n                Second</code></pre></div>\n<p>an easy way to fix this problem is by having an empty first line, and appending the trim() method right after the closing backtick, which will eliminate any space before the first character:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string = `\nFirst\nSecond`.trim()</code></pre></div>\n<h4>Interpolation</h4>\n<p>Template literals provide an easy way to interpolate variables and expressions into strings.</p>\n<p>You do so by using the <code class=\"language-text\">${...}</code> syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myVariable = 'test'\nconst string = `something ${myVariable}` //something test</code></pre></div>\n<p>inside the <code class=\"language-text\">${}</code> you can add anything, even expressions:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const string = `something ${1 + 2 + 3}`\nconst string2 = `something ${foo() ? 'x' : 'y'}`</code></pre></div>\n<h3>Classes</h3>\n<p>In 2015 the ECMAScript 6 (ES6) standard introduced classes.</p>\n<p>JavaScript has a quite uncommon way to implement inheritance: prototypical inheritance. <a href=\"https://flaviocopes.com/javascript-prototypal-inheritance/\">Prototypal inheritance</a>, while in my opinion great, is unlike most other popular programming language's implementation of inheritance, which is class-based.</p>\n<p>People coming from Java or Python or other languages had a hard time understanding the intricacies of prototypal inheritance, so the ECMAScript committee decided to sprinkle syntactic sugar on top of prototypical inheritance so that it resembles how class-based inheritance works in other popular implementations.</p>\n<p>This is important: JavaScript under the hood is still the same, and you can access an object prototype in the usual way.</p>\n<h4>A class definition</h4>\n<p>This is how a class looks.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name\n  }\n  \n  hello() {\n    return 'Hello, I am ' + this.name + '.'\n  }\n}</code></pre></div>\n<p>A class has an identifier, which we can use to create new objects using <code class=\"language-text\">new ClassIdentifier()</code>.</p>\n<p>When the object is initialized, the <code class=\"language-text\">constructor</code> method is called, with any parameters passed.</p>\n<p>A class also has as many methods as it needs. In this case <code class=\"language-text\">hello</code> is a method and can be called on all objects derived from this class:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const flavio = new Person('Flavio')\nflavio.hello()</code></pre></div>\n<h4>Class inheritance</h4>\n<p>A class can extend another class, and objects initialized using that class inherit all the methods of both classes.</p>\n<p>If the inherited class has a method with the same name as one of the classes higher in the hierarchy, the closest method takes precedence:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Programmer extends Person {\n  hello() {\n    return super.hello() + ' I am a programmer.'\n  }\n}\n\nconst flavio = new Programmer('Flavio')\nflavio.hello()</code></pre></div>\n<p>(the above program prints \"<em>Hello, I am Flavio. I am a programmer.</em>\")</p>\n<p>Classes do not have explicit class variable declarations, but you must initialize any variable in the constructor.</p>\n<p>Inside a class, you can reference the parent class calling <code class=\"language-text\">super()</code>.</p>\n<h4>Static methods</h4>\n<p>Normally methods are defined on the instance, not on the class.</p>\n<p>Static methods are executed on the class instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Person {\n  static genericHello() {\n    return 'Hello'\n  }\n}\n\nPerson.genericHello() //Hello</code></pre></div>\n<h4>Private methods</h4>\n<p>JavaScript does not have a built-in way to define private or protected methods.</p>\n<p>There are workarounds, but I won't describe them here.</p>\n<h4>Getters and setters</h4>\n<p>You can add methods prefixed with <code class=\"language-text\">get</code> or <code class=\"language-text\">set</code> to create a getter and setter, which are two different pieces of code that are executed based on what you are doing: accessing the variable, or modifying its value.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name\n  }\n  \n  set name(value) {\n    this.name = value\n  }\n  \n  get name() {\n    return this.name\n  }\n}</code></pre></div>\n<p>If you only have a getter, the property cannot be set, and any attempt at doing so will be ignored:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name\n  }\n  \n  get name() {\n    return this.name\n  }\n}</code></pre></div>\n<p>If you only have a setter, you can change the value but not access it from the outside:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name\n  }\n  \n  set name(value) {\n    this.name = value\n  }\n}</code></pre></div>\n<h3>Callbacks</h3>\n<p>Computers are asynchronous by design.</p>\n<p>Asynchronous means that things can happen independently of the main program flow.</p>\n<p>In the current consumer computers, every program runs for a specific time slot, and then it stops its execution to let another program continue its execution. This thing runs in a cycle so fast that's impossible to notice, and we think our computers run many programs simultaneously, but this is an illusion (except on multiprocessor machines).</p>\n<p>Programs internally use <em>interrupts</em>, a signal that's emitted to the processor to gain the attention of the system.</p>\n<p>I won't go into the internals of this, but just keep in mind that it's normal for programs to be asynchronous, and halt their execution until they need attention, and the computer can execute other things in the meantime. When a program is waiting for a response from the network, it cannot halt the processor until the request finishes.</p>\n<p>Normally, programming languages are synchronous, and some provide a way to manage asynchronicity, in the language or through libraries. C, Java, C#, PHP, Go, Ruby, Swift, Python, they are all synchronous by default. Some of them handle async by using threads, spawning a new process.</p>\n<p>JavaScript is <strong>synchronous</strong> by default and is single threaded. This means that code cannot create new threads and run in parallel.</p>\n<p>Lines of code are executed in series, one after another, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a = 1\nconst b = 2\nconst c = a * b\nconsole.log(c)\ndoSomething()</code></pre></div>\n<p>But JavaScript was born inside the browser, its main job, in the beginning, was to respond to user actions, like <code class=\"language-text\">onClick</code>, <code class=\"language-text\">onMouseOver</code>, <code class=\"language-text\">onChange</code>, <code class=\"language-text\">onSubmit</code> and so on. How could it do this with a synchronous programming model?</p>\n<p>The answer was in its environment. The <strong>browser</strong> provides a way to do it by providing a set of APIs that can handle this kind of functionality.</p>\n<p>More recently, Node.js introduced a non-blocking I/O environment to extend this concept to file access, network calls and so on.</p>\n<p>You can't know when a user is going to click a button, so what you do is, you <strong>define an event handler for the click event</strong>. This event handler accepts a function, which will be called when the event is triggered:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">document.getElementById('button').addEventListener('click', () => {\n  //item clicked\n})</code></pre></div>\n<p>This is the so-called <strong>callback</strong>.</p>\n<p>A callback is a simple function that's passed as a value to another function, and will only be executed when the event happens. We can do this because JavaScript has first-class functions, which can be assigned to variables and passed around to other functions (called <strong>higher-order functions</strong>)</p>\n<p>It's common to wrap all your client code in a <code class=\"language-text\">load</code> event listener on the <code class=\"language-text\">window</code>object, which runs the callback function only when the page is ready:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">window.addEventListener('load', () => {\n  //window loaded\n  //do what you want\n})</code></pre></div>\n<p>Callbacks are used everywhere, not just in DOM events.</p>\n<p>One common example is by using timers:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">setTimeout(() => {\n  // runs after 2 seconds\n}, 2000)</code></pre></div>\n<p>XHR requests also accept a callback, in this example by assigning a function to a property that will be called when a particular event occurs (in this case, the state of the request changes):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const xhr = new XMLHttpRequest()\nxhr.onreadystatechange = () => {\n  if (xhr.readyState === 4) {\n    xhr.status === 200 ? console.log(xhr.responseText) : console.error('error')\n  }\n}\nxhr.open('GET', 'https://yoursite.com')\nxhr.send()</code></pre></div>\n<h4>Handling errors in callbacks</h4>\n<p>How do you handle errors with callbacks? One very common strategy is to use what Node.js adopted: the first parameter in any callback function is the error object: <strong>error-first callbacks</strong></p>\n<p>If there is no error, the object is <code class=\"language-text\">null</code>. If there is an error, it contains some description of the error and other information.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fs.readFile('/file.json', (err, data) => {\n  if (err !== null) {\n    //handle error\n    console.log(err)\n    return\n  }\n  \n  //no errors, process data\n  console.log(data)\n})</code></pre></div>\n<h4>The problem with callbacks</h4>\n<p>Callbacks are great for simple cases!</p>\n<p>However every callback adds a level of nesting, and when you have lots of callbacks, the code starts to be complicated very quickly:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">window.addEventListener('load', () => {\n  document.getElementById('button').addEventListener('click', () => {\n    setTimeout(() => {\n      items.forEach(item => {\n        //your code here\n      })\n    }, 2000)\n  })\n})</code></pre></div>\n<p>This is just a simple 4-levels code, but I've seen much more levels of nesting and it's not fun.</p>\n<p>How do we solve this?</p>\n<h3>ALTERNATIVES TO CALLBACKS</h3>\n<p>Starting with ES6, JavaScript introduced several features that help us with asynchronous code that do not involve using callbacks:</p>\n<ul>\n<li>Promises (ES6)</li>\n<li>Async/Await (ES8)</li>\n</ul>\n<h3>Promises</h3>\n<p>Promises are one way to deal with asynchronous code, without writing too many callbacks in your code.</p>\n<p>Although they've been around for years, they were standardized and introduced in ES2015, and now they have been superseded in ES2017 by async functions.</p>\n<p><strong>Async functions</strong> use the promises API as their building block, so understanding them is fundamental even if in newer code you'll likely use async functions instead of promises.</p>\n<h4>How promises work, in brief</h4>\n<p>Once a promise has been called, it will start in <strong>pending state</strong>. This means that the caller function continues the execution, while it waits for the promise to do its own processing, and give the caller function some feedback.</p>\n<p>At this point, the caller function waits for it to either return the promise in a <strong>resolved state</strong>, or in a <strong>rejected state</strong>, but as you know JavaScript is asynchronous, so <em>the function continues its execution while the promise does it work</em>.</p>\n<h4>Which JS API use promises?</h4>\n<p>In addition to your own code and library code, promises are used by standard modern Web APIs like <a href=\"https://flaviocopes.com/fetch-api/\">Fetch</a> or <a href=\"https://flaviocopes.com/service-workers/\">Service Workers</a>.</p>\n<p>It's unlikely that in modern JavaScript you'll find yourself <em>not</em> using promises, so let's start diving right into them.</p>\n<h4>Creating a promise</h4>\n<p>The Promise API exposes a Promise constructor, which you initialize using <code class=\"language-text\">new Promise()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let done = true\n\nconst isItDoneYet = new Promise((resolve, reject) => {\n  if (done) {\n    const workDone = 'Here is the thing I built'\n    resolve(workDone)\n  } else {\n    const why = 'Still working on something else'\n    reject(why)\n  }\n})</code></pre></div>\n<p>As you can see the promise checks the <code class=\"language-text\">done</code> global constant, and if that's true, we return a resolved promise, otherwise a rejected promise.</p>\n<p>Using <code class=\"language-text\">resolve</code> and <code class=\"language-text\">reject</code> we can communicate back a value, in the above case we just return a string, but it could be an object as well.</p>\n<h4>Consuming a promise</h4>\n<p>In the last section, we introduced how a promise is created.</p>\n<p>Now let's see how the promise can be <em>consumed</em> or used.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const isItDoneYet = new Promise()\n//...\n\nconst checkIfItsDone = () => {\n  isItDoneYet\n    .then(ok => {\n      console.log(ok)\n    })\n    .catch(err => {\n      console.error(err)\n    })\n}</code></pre></div>\n<p>Running <code class=\"language-text\">checkIfItsDone()</code> will execute the <code class=\"language-text\">isItDoneYet()</code> promise and will wait for it to resolve, using the <code class=\"language-text\">then</code> callback, and if there is an error, it will handle it in the <code class=\"language-text\">catch</code> callback.</p>\n<h4>Chaining promises</h4>\n<p>A promise can be returned to another promise, creating a chain of promises.</p>\n<p>A great example of chaining promises is given by the <a href=\"https://flaviocopes.com/fetch-api/\">Fetch API</a>, a layer on top of the XMLHttpRequest API, which we can use to get a resource and queue a chain of promises to execute when the resource is fetched.</p>\n<p>The Fetch API is a promise-based mechanism, and calling <code class=\"language-text\">fetch()</code> is equivalent to defining our own promise using <code class=\"language-text\">new Promise()</code>.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const status = response => {\n  if (response.status >= 200 &amp;&amp; response.status &lt; 300) {\n    return Promise.resolve(response)\n  }\n  return Promise.reject(new Error(response.statusText))\n}\n\nconst json = response => response.json()\n\nfetch('/todos.json')\n  .then(status)\n  .then(json)\n  .then(data => {\n    console.log('Request succeeded with JSON response', data)\n  })\n  .catch(error => {\n    console.log('Request failed', error)\n  })</code></pre></div>\n<p>In this example, we call <code class=\"language-text\">fetch()</code> to get a list of TODO items from the <code class=\"language-text\">todos.json</code> file found in the domain root, and we create a chain of promises.</p>\n<p>Running <code class=\"language-text\">fetch()</code> returns a <a href=\"https://fetch.spec.whatwg.org/#concept-response\">response</a>, which has many properties, and within those we reference:</p>\n<ul>\n<li><code class=\"language-text\">status</code>, a numeric value representing the HTTP status code</li>\n<li><code class=\"language-text\">statusText</code>, a status message, which is <code class=\"language-text\">OK</code> if the request succeeded</li>\n</ul>\n<p><code class=\"language-text\">response</code> also has a <code class=\"language-text\">json()</code> method, which returns a promise that will resolve with the content of the body processed and transformed into JSON.</p>\n<p>So given those premises, this is what happens: the first promise in the chain is a function that we defined, called <code class=\"language-text\">status()</code>, that checks the response status and if it's not a success response (between 200 and 299), it rejects the promise.</p>\n<p>This operation will cause the promise chain to skip all the chained promises listed and will skip directly to the <code class=\"language-text\">catch()</code> statement at the bottom, logging the <code class=\"language-text\">Request failed</code> text along with the error message.</p>\n<p>If that succeeds instead, it calls the json() function we defined. Since the previous promise, when successful, returned the <code class=\"language-text\">response</code> object, we get it as an input to the second promise.</p>\n<p>In this case, we return the data JSON processed, so the third promise receives the JSON directly:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.then((data) => {\n  console.log('Request succeeded with JSON response', data)\n})</code></pre></div>\n<p>and we simply log it to the console.</p>\n<h4>Handling errors</h4>\n<p>In the above example, in the previous section, we had a <code class=\"language-text\">catch</code> that was appended to the chain of promises.</p>\n<p>When anything in the chain of promises fails and raises an error or rejects the promise, the control goes to the nearest <code class=\"language-text\">catch()</code> statement down the chain.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">new Promise((resolve, reject) => {\n  throw new Error('Error')\n}).catch(err => {\n  console.error(err)\n})\n\n// or\n\nnew Promise((resolve, reject) => {\n  reject('Error')\n}).catch(err => {\n  console.error(err)\n})</code></pre></div>\n<h4>Cascading errors</h4>\n<p>If inside the <code class=\"language-text\">catch()</code> you raise an error, you can append a second <code class=\"language-text\">catch()</code> to handle it, and so on.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">new Promise((resolve, reject) => {\n  throw new Error('Error')\n})\n  .catch(err => {\n    throw new Error('Error')\n  })\n  .catch(err => {\n    console.error(err)\n  })</code></pre></div>\n<h4>Orchestrating promises with <code class=\"language-text\">Promise.all()</code></h4>\n<p>If you need to synchronize different promises, <code class=\"language-text\">Promise.all()</code> helps you define a list of promises, and execute something when they are all resolved.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const f1 = fetch('/something.json')\nconst f2 = fetch('/something2.json')\n\nPromise.all([f1, f2])\n  .then(res => {\n    console.log('Array of results', res)\n  })\n  .catch(err => {\n    console.error(err)\n  })</code></pre></div>\n<p>The ES2015 destructuring assignment syntax allows you to also do</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Promise.all([f1, f2]).then(([res1, res2]) => {\n  console.log('Results', res1, res2)\n})</code></pre></div>\n<p>You are not limited to using <code class=\"language-text\">fetch</code> of course, <strong>any promise is good to go</strong>.</p>\n<h4>Orchestrating promises with <code class=\"language-text\">Promise.race()</code></h4>\n<p><code class=\"language-text\">Promise.race()</code> runs as soon as one of the promises you pass to it resolves, and it runs the attached callback just once with the result of the first promise resolved.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const promiseOne = new Promise((resolve, reject) => {\n  setTimeout(resolve, 500, 'one')\n})\nconst promiseTwo = new Promise((resolve, reject) => {\n  setTimeout(resolve, 100, 'two')\n})\n\nPromise.race([promiseOne, promiseTwo]).then(result => {\n  console.log(result) // 'two'\n})</code></pre></div>\n<h3>Async/Await</h3>\n<p>JavaScript evolved in a very short time from callbacks to promises (ES2015), and since ES2017 asynchronous JavaScript is even simpler with the async/await syntax.</p>\n<p>Async functions are a combination of promises and generators, and basically, they are a higher level abstraction over promises. Let me repeat: <strong>async/await is built on promises</strong>.</p>\n<h4>Why were async/await introduced?</h4>\n<p>They reduce the boilerplate around promises, and the \"don't break the chain\" limitation of chaining promises.</p>\n<p>When Promises were introduced in ES2015, they were meant to solve a problem with asynchronous code, and they did, but over the 2 years that separated ES2015 and ES2017, it was clear that <em>promises could not be the final solution</em>.</p>\n<p>Promises were introduced to solve the famous <em>callback hell</em> problem, but they introduced complexity on their own, and syntax complexity.</p>\n<p>They were good primitives around which a better syntax could be exposed to developers, so when the time was right we got <strong>async functions</strong>.</p>\n<p>They make the code look like it's synchronous, but it's asynchronous and non-blocking behind the scenes.</p>\n<h4>How it works</h4>\n<p>An async function returns a promise, like in this example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const doSomethingAsync = () => {\n  return new Promise(resolve => {\n    setTimeout(() => resolve('I did something'), 3000)\n  })\n}</code></pre></div>\n<p>When you want to <strong>call</strong> this function you prepend <code class=\"language-text\">await</code>, and <strong>the calling code will stop until the promise is resolved or rejected</strong>. One caveat: the client function must be defined as <code class=\"language-text\">async</code>. Here's an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const doSomething = async () => {\n  console.log(await doSomethingAsync())\n}</code></pre></div>\n<h4>A quick example</h4>\n<p>This is a simple example of async/await used to run a function asynchronously:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const doSomethingAsync = () => {\n  return new Promise(resolve => {\n    setTimeout(() => resolve('I did something'), 3000)\n  })\n}\n\nconst doSomething = async () => {\n  console.log(await doSomethingAsync())\n}\n\nconsole.log('Before')\ndoSomething()\nconsole.log('After')</code></pre></div>\n<p>The above code will print the following to the browser console:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Before\nAfter\nI did something //after 3s</code></pre></div>\n<h4>Promise all the things</h4>\n<p>Prepending the <code class=\"language-text\">async</code> keyword to any function means that the function will return a promise.</p>\n<p>Even if it's not doing so explicitly, it will internally make it return a promise.</p>\n<p>This is why this code is valid:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const aFunction = async () => {\n  return 'test'\n}\n\naFunction().then(alert) // This will alert 'test'</code></pre></div>\n<p>and it's the same as:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const aFunction = async () => {\n  return Promise.resolve('test')\n}\n\naFunction().then(alert) // This will alert 'test'</code></pre></div>\n<h4>The code is much simpler to read</h4>\n<p>As you can see in the example above, our code looks very simple. Compare it to code using plain promises, with chaining and callback functions.</p>\n<p>And this is a very simple example, the major benefits will arise when the code is much more complex.</p>\n<p>For example here's how you would get a JSON resource, and parse it, using promises:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const getFirstUserData = () => {\n  return fetch('/users.json') // get users list\n    .then(response => response.json()) // parse JSON\n    .then(users => users[0]) // pick first user\n    .then(user => fetch(`/users/${user.name}`)) // get user data\n    .then(userResponse => userResponse.json()) // parse JSON\n}\n\ngetFirstUserData()</code></pre></div>\n<p>And here is the same functionality provided using await/async:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const getFirstUserData = async () => {\n  const response = await fetch('/users.json') // get users list\n  const users = await response.json() // parse JSON\n  const user = users[0] // pick first user\n  const userResponse = await fetch(`/users/${user.name}`) // get user data\n  const userData = await userResponse.json() // parse JSON\n  return userData\n}\n\ngetFirstUserData()</code></pre></div>\n<h4>Multiple async functions in series</h4>\n<p>Async functions can be chained very easily, and the syntax is much more readable than with plain promises:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const promiseToDoSomething = () => {\n  return new Promise(resolve => {\n    setTimeout(() => resolve('I did something'), 10000)\n  })\n}\n\nconst watchOverSomeoneDoingSomething = async () => {\n  const something = await promiseToDoSomething()\n  return something + ' and I watched'\n}\n\nconst watchOverSomeoneWatchingSomeoneDoingSomething = async () => {\n  const something = await watchOverSomeoneDoingSomething()\n  return something + ' and I watched as well'\n}\n\nwatchOverSomeoneWatchingSomeoneDoingSomething().then(res => {\n  console.log(res)\n})</code></pre></div>\n<p>Will print:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">I did something and I watched and I watched as well</code></pre></div>\n<h4>Easier debugging</h4>\n<p>Debugging promises is hard because the debugger will not step over asynchronous code.</p>\n<p>Async/await makes this very easy because to the compiler it's just like synchronous code.</p>\n<h3>ES Modules</h3>\n<p>ES Modules is the ECMAScript standard for working with modules.</p>\n<p>While Node.js has been using the CommonJS standard for years, the browser never had a module system, as every major decision such as a module system must be first standardized by ECMAScript and then implemented by the browser.</p>\n<p>This standardization process completed with ES6 and browsers started implementing this standard trying to keep everything well aligned, working all in the same way, and now ES Modules are supported in Chrome, Safari, Edge and Firefox (since version 60).</p>\n<p>Modules are very cool, because they let you encapsulate all sorts of functionality, and expose this functionality to other JavaScript files, as libraries.</p>\n<h4>The ES Modules Syntax</h4>\n<p>The syntax to import a module is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import package from 'module-name'</code></pre></div>\n<p>while CommonJS uses</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const package = require('module-name')</code></pre></div>\n<p>A module is a JavaScript file that <strong>exports</strong> one or more values (objects, functions or variables), using the <code class=\"language-text\">export</code> keyword. For example, this module exports a function that returns a string uppercase:</p>\n<blockquote>\n<p><em>uppercase.js</em></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default str => str.toUpperCase()</code></pre></div>\n<p>In this example, the module defines a single, <strong>default export</strong>, so it can be an anonymous function. Otherwise it would need a name to distinguish it from other exports.</p>\n<p>Now, <strong>any other JavaScript module</strong> can import the functionality offered by uppercase.js by importing it.</p>\n<p>An HTML page can add a module by using a <code class=\"language-text\">&lt;scri</code>pt> tag with the sp<code class=\"language-text\">ecial type=\"m</code>odule\" attribute:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script type=\"module\" src=\"index.js\">\n&lt;;/script></code></pre></div>\n<blockquote>\n<p><em>Note: this module import behaves like a <code class=\"language-text\">defer</code> script load. See <a href=\"https://flaviocopes.com/javascript-async-defer/\">efficiently load JavaScript with defer and async</a></em></p>\n</blockquote>\n<p>It's important to note that any script loaded with <code class=\"language-text\">type=\"module\"</code> is loaded in <a href=\"https://flaviocopes.com/javascript-strict-mode/\">strict mode</a>.</p>\n<p>In this example, the <code class=\"language-text\">uppercase.js</code> module defines a <strong>default export</strong>, so when we import it, we can assign it a name we prefer:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import toUpperCase from './uppercase.js'</code></pre></div>\n<p>and we can use it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">toUpperCase('test') //'TEST'</code></pre></div>\n<p>You can also use an absolute path for the module import, to reference modules defined on another domain:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import toUpperCase from 'https://flavio-es-modules-example.glitch.me/uppercase.js'</code></pre></div>\n<p>This is also valid import syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { foo } from '/uppercase.js'import { foo } from '../uppercase.js'</code></pre></div>\n<p>This is not:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { foo } from 'uppercase.js'\nimport { foo } from 'utils/uppercase.js'</code></pre></div>\n<p>It's either absolute, or has a <code class=\"language-text\">./</code> or <code class=\"language-text\">/</code> before the name.</p>\n<h3>Other import/export options</h3>\n<p>We saw this example above:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default str => str.toUpperCase()</code></pre></div>\n<p>This creates one default export. In a file however you can export more than one thing, by using this syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const a = 1\nconst b = 2\nconst c = 3\n\nexport { a, b, c }</code></pre></div>\n<p>Another module can import all those exports using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import * from 'module'</code></pre></div>\n<p>You can import just a few of those exports, using the destructuring assignment:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { a } from 'module'\nimport { a, b } from 'module'</code></pre></div>\n<p>You can rename any import, for convenience, using <code class=\"language-text\">as</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { a, b as two } from 'module'</code></pre></div>\n<p>You can import the default export, and any non-default export by name, like in this common React import:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { Component } from 'react'</code></pre></div>\n<p>You can see an ES Modules example here: <a href=\"https://glitch.com/edit/#!/flavio-es-modules-example?path=index.html\">https://glitch.com/edit/#!/flavio-es-modules-example?path=index.html</a></p>\n<h4>CORS</h4>\n<p>Modules are fetched using <a href=\"https://flaviocopes.com/cors/\">CORS</a>. This means that if you reference scripts from other domains, they must have a valid CORS header that allows cross-site loading (like <code class=\"language-text\">Access-Control-Allow-Origin: *</code>)</p>\n<h4>What about browsers that do not support modules?</h4>\n<p>Use a combination of <code class=\"language-text\">type=\"module\"</code> and <code class=\"language-text\">nomodule</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script type=\"module\" src=\"module.js\">\n&lt;/script>\n&lt;script nomodule src=\"fallback.js\">\n&lt;/script></code></pre></div>\n<p>ES Modules are one of the biggest features introduced in modern browsers. They are part of ES6 but the road to implement them has been long.</p>\n<p>We can now use them! But we must also remember that having more than a few modules is going to have a performance hit on our pages, as it's one more step that the browser must perform at runtime.</p>\n<p>Webpack is probably going to still be a huge player even if ES Modules land in the browser, but having such a feature directly built in the language is huge for a unification of how modules work client-side and on Node.js as well.</p>\n<h3>SECTION 2: REACT CONCEPTS</h3>\n<h3>Single Page Applications</h3>\n<p>React Applications are also called Single Page Applications. What does this mean?</p>\n<p>In the past, when browsers were much less capable than today, and JavaScript performance was poor, every page was coming from a server. Every time you clicked something, a new request was made to the server and the browser subsequently loaded the new page.</p>\n<p>Only very innovative products worked differently, and experimented with new approaches.</p>\n<p>Today, popularized by modern frontend JavaScript frameworks like React, an app is usually built as a single page application: you only load the application code (HTML, <a href=\"https://flaviocopes.com/css/\">CSS</a>, <a href=\"https://flaviocopes.com/javascript/\">JavaScript</a>) once, and when you interact with the application, what generally happens is that JavaScript intercepts the browser events and instead of making a new request to the server that then returns a new document, the client requests some JSON or performs an action on the server but the page that the user sees is never completely wiped away, and behaves more like a desktop application.</p>\n<p>Single page applications are built in JavaScript (or at least compiled to JavaScript) and work in the browser.</p>\n<p>The technology is always the same, but the philosophy and some key components of how the application works are different.</p>\n<h4>Examples of Single Page Applications</h4>\n<p>Some notable examples:</p>\n<ul>\n<li>Gmail</li>\n<li>Google Maps</li>\n<li>Facebook</li>\n<li>Twitter</li>\n<li>Google Drive</li>\n</ul>\n<h4>Pros and cons of SPAs</h4>\n<p>An SPA feels much faster to the user, because instead of waiting for the client-server communication to happen, and wait for the browser to re-render the page, you can now have instant feedback. This is the responsibility of the application maker, but you can have transitions and spinners and any kind of UX improvement that is certainly better than the traditional workflow.</p>\n<p>In addition to making the experience faster to the user, the server will consume less resources because you can focus on providing an efficient API instead of building the layouts server-side.</p>\n<p>This makes it ideal if you also build a mobile app on top of the API, as you can completely reuse your existing server-side code.</p>\n<p>Single Page Applications are easy to transform into Progressive Web Apps, which in turn enables you to provide local caching and to support offline experiences for your services (or simply a better error message if your users need to be online).</p>\n<p>SPAs are best used when there is no need for SEO (search engine optimization). For example for apps that work behind a login.</p>\n<p>Search engines, while improving every day, still have trouble indexing sites built with an SPA approach rather than the traditional server-rendered pages. This is the case for blogs. If you are going to rely on search engines, don't even bother with creating a single page application without having a server rendered part as well.</p>\n<p>When coding an SPA, you are going to write a great deal of JavaScript. Since the app can be long-running, you are going to need to pay a lot more attention to possible memory leaks â€” if in the past your page had a lifespan that was counted in minutes, now an SPA might stay open for hours at a time and if there is any memory issue that's going to increase the browser memory usage by a lot more and it's going to cause an unpleasantly slow experience if you don't take care of it.</p>\n<p>SPAs are great when working in teams. Backend developers can just focus on the API, and frontend developers can focus on creating the best user experience, making use of the API built in the backend.</p>\n<p>As a con, Single Page Apps rely heavily on JavaScript. This might make using an application running on low power devices a poor experience in terms of speed. Also, some of your visitors might just have JavaScript disabled, and you also need to consider accessibility for anything you build.</p>\n<h4>Overriding the navigation</h4>\n<p>Since you get rid of the default browser navigation, URLs must be managed manually.</p>\n<p>This part of an application is called the router. Some frameworks already take care of them for you (like Ember), others require libraries that will do this job (like <a href=\"https://flaviocopes.com/react-router/\">React Router</a>).</p>\n<p>What's the problem? In the beginning, this was an afterthought for developers building Single Page Applications. This caused the common \"broken back button\" issue: when navigating inside the application the URL didn't change (since the browser default navigation was hijacked) and hitting the back button, a common operation that users do to go to the previous screen, might move to a website you visited a long time ago.</p>\n<p>This problem can now be solved using the <a href=\"https://flaviocopes.com/history-api/\">History API</a> offered by browsers, but most of the time you'll use a library that internally uses that API, like <strong>React Router</strong>.</p>\n<h3>Declarative</h3>\n<p>What does it mean when you read that React is declarative? You'll run across articles describing React as a <strong>declarative approach to building UIs</strong>.</p>\n<p>React made its \"declarative approach\" quite popular and upfront so it permeated the frontend world along with React.</p>\n<p>It's really not a new concept, but React took building UIs a lot more declaratively than with HTML templates:</p>\n<ul>\n<li>you can build Web interfaces without even touching the DOM directly</li>\n<li>you can have an event system without having to interact with the actual DOM Events.</li>\n</ul>\n<p>The opposite of declarative is <strong>imperative</strong>. A common example of an imperative approach is looking up elements in the DOM using jQuery or DOM events. You tell the browser exactly what to do, instead of telling it what you need.</p>\n<p>The React declarative approach abstracts that for us. We just tell React we want a component to be rendered in a specific way, and we never have to interact with the DOM to reference it later.</p>\n<h3>Immutability</h3>\n<p>One concept you will likely meet when programming in React is immutability (and its opposite, mutability).</p>\n<p>It's a controversial topic, but whatever you might think about the concept of immutability, React and most of its ecosystem kind of forces this, so you need to at least have a grasp of why it's so important and the implications of it.</p>\n<p>In programming, a variable is immutable when its value cannot change after it's created.</p>\n<p>You are already using immutable variables without knowing it when you manipulate a string. Strings are immutable by default, when you change them in reality you create a new string and assign it to the same variable name.</p>\n<p>An immutable variable can never be changed. To update its value, you create a new variable.</p>\n<p>The same applies to objects and arrays.</p>\n<p>Instead of changing an array, to add a new item you create a new array by concatenating the old array, plus the new item.</p>\n<p>An object is never updated, but copied before changing it.</p>\n<p>This applies to React in many places.</p>\n<p>For example, you should never mutate the <code class=\"language-text\">state</code> property of a component directly, but only through the <code class=\"language-text\">setState()</code> method.</p>\n<p>In Redux, you never mutate the state directly, but only through reducers, which are functions.</p>\n<p>The question is, why?</p>\n<p>There are various reasons, the most important of which are:</p>\n<ul>\n<li>Mutations can be centralized, like in the case of Redux, which improves your debugging capabilities and reduces sources of errors.</li>\n<li>Code looks cleaner and simpler to understand. You never expect a function to change some value without you knowing, which gives you <strong>predictability</strong>. When a function does not mutate objects but just returns a new object, it's called a pure function.</li>\n<li>The library can optimize the code because for example JavaScript is faster when swapping an old object reference for an entirely new object, rather than mutating an existing object. This gives you <strong>performance</strong>.</li>\n</ul>\n<h3>Purity</h3>\n<p>In JavaScript, when a function does not mutate objects but just returns a new object, it's called a pure function.</p>\n<p>A function, or a method, in order to be called <em>pure</em> should not cause side effects and should return the same output when called multiple times with the same input.</p>\n<p>A pure function takes an input and returns an output without changing the input nor anything else.</p>\n<p>Its output is only determined by the arguments. You could call this function 1M times, and given the same set of arguments, the output will always be the same.</p>\n<p>React applies this concept to components. A React component is a pure component when its output is only dependant on its props.</p>\n<p>All functional components are pure components:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = props => {\n  return &lt;button>{props.message}&lt;/button>\n}</code></pre></div>\n<p>Class components can be pure if their output only depends on the props:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Button extends React.Component {\n  render() {\n    return &lt;button>{this.props.message}&lt;/button>\n  }\n}</code></pre></div>\n<h3>Composition</h3>\n<p>In programming, composition allows you to build more complex functionality by combining small and focused functions.</p>\n<p>For example, think about using <code class=\"language-text\">map()</code> to create a new array from an initial set, and then filtering the result using <code class=\"language-text\">filter()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const list = ['Apple', 'Orange', 'Egg']\nlist.map(item => item[0]).filter(item => item === 'A') //'A'</code></pre></div>\n<p>In React, composition allows you to have some pretty cool advantages.</p>\n<p>You create small and lean components and use them to <em>compose</em> more functionality on top of them. How?</p>\n<h4>Create specialized version of a component</h4>\n<p>Use an outer component to expand and specialize a more generic component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = props => {\n  return &lt;button>{props.text}&lt;/button>\n}\n\nconst SubmitButton = () => {\n  return &lt;Button text=\"Submit\" />\n}\n\nconst LoginButton = () => {\n  return &lt;Button text=\"Login\" />\n}</code></pre></div>\n<h4>Pass methods as props</h4>\n<p>A component can focus on tracking a click event, for example, and what actually happens when the click event happens is up to the container component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = props => {\n  return &lt;button onClick={props.onClickHandler}>{props.text}&lt;/button>\n}\n\nconst LoginButton = props => {\n  return &lt;Button text=\"Login\" onClickHandler={props.onClickHandler} />\n}\n\nconst Container = () => {\n  const onClickHandler = () => {\n    alert('clicked')\n  }\n  \n  return &lt;LoginButton onClickHandler={onClickHandler} />\n}</code></pre></div>\n<h4>Using children</h4>\n<p>The <code class=\"language-text\">props.children</code> property allows you to inject components inside other components.</p>\n<p>The component needs to output <code class=\"language-text\">props.children</code> in its JSX:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Sidebar = props => {\n  return &lt;aside>{props.children}&lt;/aside>\n}</code></pre></div>\n<p>and you embed more components into it in a transparent way:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Sidebar>\n  &lt;Link title=\"First link\" />\n  &lt;Link title=\"Second link\" />\n&lt;/Sidebar></code></pre></div>\n<h4>Higher order components</h4>\n<p>When a component receives a component as a prop and returns a component, it's called higher order component.</p>\n<p>We'll see them in a little while.</p>\n<h3>The Virtual DOM</h3>\n<p>Many existing frameworks, before React came on the scene, were directly manipulating the DOM on every change.</p>\n<p>First, what is the DOM?</p>\n<p>The DOM (<em>Document Object Model</em>) is a Tree representation of the page, starting from the <code class=\"language-text\">&lt;ht</code>ml> tag, going down into every child, which are called nodes.</p>\n<p>It's kept in the browser memory, and directly linked to what you see in a page. The DOM has an API that you can use to traverse it, access every single node, filter them, modify them.</p>\n<p>The API is the familiar syntax you have likely seen many times, if you were not using the abstract API provided by jQuery and friends:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">document.getElementById(id)\ndocument.getElementsByTagName(name)\ndocument.createElement(name)\nparentNode.appendChild(node)\nelement.innerHTML\nelement.style.left\nelement.setAttribute()\nelement.getAttribute()\nelement.addEventListener()\nwindow.content\nwindow.onload\nwindow.dump()\nwindow.scrollTo()</code></pre></div>\n<p>React keeps a copy of the DOM representation, for what concerns the React rendering: the Virtual DOM</p>\n<h4>The Virtual DOM Explained</h4>\n<p>Every time the DOM changes, the browser has to do two intensive operations: repaint (visual or content changes to an element that do not affect the layout and positioning relative to other elements) and reflow (recalculate the layout of a portion of the page â€” or the whole page layout).</p>\n<p>React uses a Virtual DOM to help the browser use less resources when changes need to be done on a page.</p>\n<p>When you call <code class=\"language-text\">setState()</code> on a Component, specifying a state different than the previous one, React marks that Component as <strong>dirty</strong>. This is key: React only updates when a Component changes the state explicitly.</p>\n<p>What happens next is:</p>\n<ul>\n<li>React updates the Virtual DOM relative to the components marked as dirty (with some additional checks, like triggering <code class=\"language-text\">shouldComponentUpdate()</code>)</li>\n<li>Runs the diffing algorithm to reconcile the changes</li>\n<li>Updates the real DOM</li>\n</ul>\n<h4>Why is the Virtual DOM helpful: batching</h4>\n<p>The key thing is that React batches much of the changes and performs a unique update to the real DOM, by changing all the elements that need to be changed at the same time, so the repaint and reflow the browser must perform to render the changes are executed just once.</p>\n<h3>Unidirectional Data Flow</h3>\n<p>Working with React you might encounter the term Unidirectional Data Flow. What does it mean? Unidirectional Data Flow is not a concept unique to React, but as a JavaScript developer this might be the first time you hear it.</p>\n<p>In general this concept means that data has one, and only one, way to be transferred to other parts of the application.</p>\n<p>In React this means that:</p>\n<ul>\n<li>state is passed to the view and to child components</li>\n<li>actions are triggered by the view</li>\n<li>actions can update the state</li>\n<li>the state change is passed to the view and to child components</li>\n</ul>\n<p>The view is a result of the application state. State can only change when actions happen. When actions happen, the state is updated.</p>\n<p>Thanks to one-way bindings, data cannot flow in the opposite way (as would happen with two-way bindings, for example), and this has some key advantages:</p>\n<ul>\n<li>it's less error prone, as you have more control over your data</li>\n<li>it's easier to debug, as you know <em>what</em> is coming from <em>where</em></li>\n<li>it's more efficient, as the library already knows what the boundaries are of each part of the system</li>\n</ul>\n<p>A state is always owned by one Component. Any data that's affected by this state can only affect Components below it: its children.</p>\n<p>Changing state on a Component will never affect its parent, or its siblings, or any other Component in the application: just its children.</p>\n<p>This is the reason that the state is often moved up in the Component tree, so that it can be shared between components that need to access it.</p>\n<h3>SECTION 3: IN-DEPTH REACT</h3>\n<h3>JSX</h3>\n<p>JSX is a technology that was introduced by React.</p>\n<p>Although React can work completely fine without using JSX, it's an ideal technology to work with components, so React benefits a lot from JSX.</p>\n<p>At first, you might think that using JSX is like mixing HTML and <a href=\"https://flaviocopes.com/javascript/\">JavaScript</a> (and as you'll see CSS).</p>\n<p>But this is not true, because what you are really doing when using JSX syntax is writing a declarative syntax of what a component UI should be.</p>\n<p>And you're describing that UI not using strings, but instead using JavaScript, which allows you to do many nice things.</p>\n<h4>A JSX primer</h4>\n<p>Here is how you define a h1 tag containing a string:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const element = &lt;h1>Hello, world!&lt;/h1></code></pre></div>\n<p>It looks like a strange mix of JavaScript and HTML, but in reality it's all JavaScript.</p>\n<p>What looks like HTML, is actually syntactic sugar for defining components and their positioning inside the markup.</p>\n<p>Inside a JSX expression, attributes can be inserted very easily:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const myId = 'test'\nconst element = &lt;h1 id={myId}>Hello, world!&lt;/h1></code></pre></div>\n<p>You just need to pay attention when an attribute has a dash (<code class=\"language-text\">-</code>) which is converted to camelCase syntax instead, and these 2 special cases:</p>\n<ul>\n<li><code class=\"language-text\">class</code> becomes <code class=\"language-text\">className</code></li>\n<li><code class=\"language-text\">for</code> becomes <code class=\"language-text\">htmlFor</code></li>\n</ul>\n<p>because they are reserved words in JavaScript.</p>\n<p>Here's a JSX snippet that wraps two components into a <code class=\"language-text\">div</code> tag:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div>\n  &lt;BlogPostsList />\n  &lt;Sidebar />\n&lt;/div></code></pre></div>\n<p>A tag always needs to be closed, because this is more XML than HTML (if you remember the XHTML days, this will be familiar, but since then the HTML5 loose syntax won). In this case a self-closing tag is used.</p>\n<p>Notice how I wrapped the 2 components into a <code class=\"language-text\">div</code>. Why? Because <strong>the render() function can only return a single node</strong>, so in case you want to return 2 siblings, just add a parent. It can be any tag, not just <code class=\"language-text\">div</code>.</p>\n<h4>Transpiling JSX</h4>\n<p>A browser cannot execute JavaScript files containing JSX code. They must be first transformed to regular JS.</p>\n<p>How? By doing a process called <strong>transpiling</strong>.</p>\n<p>We already said that JSX is optional, because to every JSX line, a corresponding plain JavaScript alternative is available, and that's what JSX is transpiled to.</p>\n<p>For example the following two constructs are equivalent:</p>\n<blockquote>\n<p><em>Plain JS</em></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.render(\n  React.DOM.div(\n    { id: 'test' },\n    React.DOM.h1(null, 'A title'),\n    React.DOM.p(null, 'A paragraph')\n  ),\n  document.getElementById('myapp')\n)</code></pre></div>\n<blockquote>\n<p><em>JSX</em></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.render(\n  &lt;div id=\"test\">\n    &lt;h1>A title&lt;/h1>\n    &lt;p>A paragraph&lt;/p>\n  &lt;/div>,\n  document.getElementById('myapp')\n)</code></pre></div>\n<p>This very basic example is just the starting point, but you can already see how more complicated the plain JS syntax is compared to using JSX.</p>\n<p>At the time of writing the most popular way to perform the <strong>transpilation</strong> is to use <strong>Babel</strong>, which is the default option when running <code class=\"language-text\">create-react-app</code>, so if you use it you don't have to worry, everything happens under the hood for you.</p>\n<p>If you don't use <code class=\"language-text\">create-react-app</code> you need to setup Babel yourself.</p>\n<h4>JS in JSX</h4>\n<p>JSX accepts any kind of JavaScript mixed into it.</p>\n<p>Whenever you need to add some JS, just put it inside curly braces <code class=\"language-text\">{}</code>. For example here's how to use a constant value defined elsewhere:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const paragraph = 'A paragraph'\nReactDOM.render(\n  &lt;div id=\"test\">\n    &lt;h1>A title&lt;/h1>\n    &lt;p>{paragraph}&lt;/p>\n  &lt;/div>,\n  document.getElementById('myapp')\n)</code></pre></div>\n<p>This is a basic example. Curly braces accept <em>any</em> JS code:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const paragraph = 'A paragraph'\nReactDOM.render(\n  &lt;table>\n    {rows.map((row, i) => {\n      return &lt;tr>{row.text}&lt;/tr>\n    })}\n  &lt;/table>,\n  document.getElementById('myapp')\n)</code></pre></div>\n<p>As you can see <em>we nested JavaScript inside JSX defined inside JavaScript nested in JSX</em>. You can go as deep as you need.</p>\n<h4>HTML in JSX</h4>\n<p>JSX resembles HTML a lot, but it's actually XML syntax.</p>\n<p>In the end you render HTML, so you need to know a few differences between how you would define some things in HTML, and how you define them in JSX.</p>\n<h4>You need to close all tags</h4>\n<p>Just like in XHTML, if you have ever used it, you need to close all tags: no more <code class=\"language-text\">&lt;br></code> but instead use the self-closing tag: <code class=\"language-text\">&lt;br /></code> (the same goes for other tags)</p>\n<h4>camelCase is the new standard</h4>\n<p>In HTML you'll find attributes without any case (e.g. <code class=\"language-text\">onchange</code>). In JSX, they are renamed to their camelCase equivalent:</p>\n<ul>\n<li><code class=\"language-text\">onchange</code> => <code class=\"language-text\">onChange</code></li>\n<li><code class=\"language-text\">onclick</code> => <code class=\"language-text\">onClick</code></li>\n<li><code class=\"language-text\">onsubmit</code> => <code class=\"language-text\">onSubmit</code></li>\n</ul>\n<h4><code class=\"language-text\">class</code> becomes <code class=\"language-text\">className</code></h4>\n<p>Due to the fact that JSX is JavaScript, and <code class=\"language-text\">class</code> is a reserved word, you can't write</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p class=\"description\"></code></pre></div>\n<p>but you need to use</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p className=\"description\"></code></pre></div>\n<p><strong>The same applies to <code class=\"language-text\">for</code></strong> which is translated to <code class=\"language-text\">htmlFor</code>.</p>\n<h4>CSS in React</h4>\n<p>JSX provides a cool way to define CSS.</p>\n<p>If you have a little experience with HTML inline styles, at first glance you'll find yourself pushed back 10 or 15 years, to a world where inline CSS was completely normal (nowadays it's demonized and usually just a \"quick fix\" go-to solution).</p>\n<p>JSX style is not the same thing: first of all, instead of accepting a string containing CSS properties, the JSX <code class=\"language-text\">style</code> attribute only accepts an object. This means you define properties in an object:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var divStyle = {\n  color: 'white'\n}\n\nReactDOM.render(&lt;div style={divStyle}>Hello World!&lt;/div>, mountNode)</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.render(&lt;div style={{ color: 'white' }}>Hello World!&lt;/div>, mountNode)</code></pre></div>\n<p>The CSS values you write in JSX are slightly different from plain CSS:</p>\n<ul>\n<li>the keys property names are camelCased</li>\n<li>values are just strings</li>\n<li>you separate each tuple with a comma</li>\n</ul>\n<h4>Why is this preferred over plain CSS / SASS / LESS?</h4>\n<p>CSS is an <strong>unsolved problem</strong>. Since its inception, dozens of tools around it rose and then fell. The main problem with JS is that there is no scoping and it's easy to write CSS that is not enforced in any way, thus a \"quick fix\" can impact elements that should not be touched.</p>\n<p>JSX allows components (defined in React for example) to completely encapsulate their style.</p>\n<h4>Is this the go-to solution?</h4>\n<p>Inline styles in JSX are good until you need to</p>\n<ol>\n<li>write media queries</li>\n<li>style animations</li>\n<li>reference pseudo classes (e.g. <code class=\"language-text\">:hover</code>)</li>\n<li>reference pseudo elements (e.g. <code class=\"language-text\">::first-letter</code>)</li>\n</ol>\n<p>In short, they cover the basics, but it's not the final solution.</p>\n<h4>Forms in JSX</h4>\n<p>JSX adds some changes to how HTML forms work, with the goal of making things easier for the developer.</p>\n<h4><code class=\"language-text\">value</code> and <code class=\"language-text\">defaultValue</code></h4>\n<p>The <code class=\"language-text\">value</code> attribute always holds the current value of the field.</p>\n<p>The <code class=\"language-text\">defaultValue</code> attribute holds the default value that was set when the field was created.</p>\n<p><em>This helps solve some weird behavior of regular <a href=\"https://flaviocopes.com/dom/\">DOM</a> interaction when inspecting <code class=\"language-text\">input.value</code> and <code class=\"language-text\">input.getAttribute('value')</code> returning one the current value and one the original default value.</em></p>\n<p>This also applies to the <code class=\"language-text\">textarea</code> field, e.g.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;textarea>Some text&lt;/textarea></code></pre></div>\n<p>but instead</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;textarea defaultValue={'Some text'} /></code></pre></div>\n<p>For <code class=\"language-text\">select</code> fields, instead of using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;select>\n  &lt;option value=\"x\" selected>\n    ...\n  &lt;/option>\n&lt;/select></code></pre></div>\n<p>use</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;select defaultValue=\"x\">\n  &lt;option value=\"x\">...&lt;/option>\n&lt;/select></code></pre></div>\n<h4>A more consistent onChange</h4>\n<p>Passing a function to the <code class=\"language-text\">onChange</code> attribute you can subscribe to events on form fields.</p>\n<p>It works consistently across fields, even <code class=\"language-text\">radio</code>, <code class=\"language-text\">select</code> and <code class=\"language-text\">checkbox</code> input fields fire a <code class=\"language-text\">onChange</code> event.</p>\n<p><code class=\"language-text\">onChange</code> also fires when typing a character into an <code class=\"language-text\">input</code> or <code class=\"language-text\">textarea</code> field.</p>\n<h4>JSX auto escapes</h4>\n<p>To mitigate the ever present risk of XSS exploits, JSX forces automatic escaping in expressions.</p>\n<p>This means that you might run into issues when using an HTML entity in a string expression.</p>\n<p>You expect the following to print <code class=\"language-text\">Â© 2017</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>{'Â© 2017'}&lt;/p></code></pre></div>\n<p>But it's not, it's printing <code class=\"language-text\">Â© 2017</code> because the string is escaped.</p>\n<p>To fix this you can either move the entities outside the expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>Â© 2017&lt;/p></code></pre></div>\n<p>or by using a constant that prints the Unicode representation corresponding to the HTML entity you need to print:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>{'\\u00A9 2017'}&lt;/p></code></pre></div>\n<h4>White space in JSX</h4>\n<p>To add white space in JSX there are 2 rules:</p>\n<p><strong>Rule 1: Horizontal white space is trimmed to 1</strong></p>\n<p>If you have white space between elements in the same line, it's all trimmed to 1 white space.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>Something       becomes               this&lt;/p></code></pre></div>\n<p>becomes</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>Something becomes this&lt;/p></code></pre></div>\n<p><strong>Rule 2: Vertical white space is eliminated</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>\n  Something\n  becomes\n  this\n&lt;/p></code></pre></div>\n<p>becomes</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>Somethingbecomesthis&lt;/p></code></pre></div>\n<p>To fix this problem you need to explicitly add white space, by adding a space expression like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>\n  Something\n  {' '}becomes\n  {' '}this\n&lt;/p></code></pre></div>\n<p>or by embedding the string in a space expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>\n  Something\n  {' becomes '}\n  this\n&lt;/p></code></pre></div>\n<p>You can add comments to JSX by using the normal JavaScript comments inside an expression:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p>\n  {/* a comment */}\n  {\n    //another comment\n  }\n&lt;/p></code></pre></div>\n<h4>Spread attributes</h4>\n<p>In JSX a common operation is assigning values to attributes.</p>\n<p>Instead of doing it manually, e.g.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div>\n  &lt;BlogPost title={data.title} date={data.date} />\n&lt;/div></code></pre></div>\n<p>you can pass</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;div>\n  &lt;BlogPost {...data} />\n&lt;/div></code></pre></div>\n<p>and the properties of the <code class=\"language-text\">data</code> object will be used as attributes automatically, thanks to the <em>ES6 spread operator</em>.</p>\n<h4>How to loop in JSX</h4>\n<p>If you have a set of elements you need to loop upon to generate a JSX partial, you can create a loop, and then add JSX to an array:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const elements = [] //..some array\n\nconst items = []\n\nfor (const [index, value] of elements.entries()) {\n  items.push(&lt;Element key={index} />)\n}</code></pre></div>\n<p>Now when rendering the JSX you can embed the <code class=\"language-text\">items</code> array simply by wrapping it in curly braces:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const elements = ['one', 'two', 'three'];\n\nconst items = []\n\nfor (const [index, value] of elements.entries()) {\n  items.push(&lt;li key={index}>{value}&lt;/li>)\n}\n\nreturn (\n  &lt;div>\n    {items}\n  &lt;/div>\n)</code></pre></div>\n<p>You can do the same directly in the JSX, using <code class=\"language-text\">map</code> instead of a for-of loop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const elements = ['one', 'two', 'three'];\nreturn (\n  &lt;ul>\n    {elements.map((value, index) => {\n      return &lt;li key={index}>{value}&lt;/li>\n    })}\n  &lt;/ul>\n)</code></pre></div>\n<h3>Components</h3>\n<p>A component is one isolated piece of interface. For example in a typical blog homepage you might find the Sidebar component, and the Blog Posts List component. They are in turn composed of components themselves, so you could have a list of Blog post components, each for every blog post, and each with its own peculiar properties.</p>\n<p>React makes it very simple: everything is a component.</p>\n<p>Even plain HTML tags are component on their own, and they are added by default.</p>\n<p>The next 2 lines are equivalent, they do the same thing. One with *<strong>*JSX**</strong>, one without, by injecting <code class=\"language-text\">&lt;h1>Hello World!&lt;/h1></code> into an element with id <code class=\"language-text\">app</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport ReactDOM from 'react-dom'\n\nReactDOM.render(&lt;h1>Hello World!&lt;/h1>, document.getElementById('app'))\n\nReactDOM.render(\n  React.DOM.h1(null, 'Hello World!'),\n  document.getElementById('app')\n)</code></pre></div>\n<p>See, <code class=\"language-text\">React.DOM</code> exposed us an <code class=\"language-text\">h1</code> component. Which other HTML tags are available? All of them! You can inspect what <code class=\"language-text\">React.DOM</code> offers by typing it in the Browser Console:</p>\n<p>(the list is longer)</p>\n<p>The built-in components are nice, but you'll quickly outgrow them. What React excels in is letting us compose a UI by composing custom components.</p>\n<h4>Custom components</h4>\n<p>There are 2 ways to define a component in React.</p>\n<p>A function component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const BlogPostExcerpt = () => {\n  return (\n    &lt;div>\n      &lt;h1>Title&lt;/h1>\n      &lt;p>Description&lt;/p>\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>A class component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { Component } from 'react'\n\nclass BlogPostExcerpt extends Component {\n  render() {\n    return (\n      &lt;div>\n        &lt;h1>Title&lt;/h1>\n        &lt;p>Description&lt;/p>\n      &lt;/div>\n    )\n  }\n}</code></pre></div>\n<p>Up until recently, class components were the only way to define a component that had its own state, and could access the lifecycle methods so you could do things when the component was first rendered, updated or removed.</p>\n<p>React Hooks changed this, so our function components are now much more powerful than ever and I believe we'll see fewer and fewer class components in the future, although it will still be perfectly valid way to create components.</p>\n<p>There is also a third syntax which uses the <code class=\"language-text\">ES5</code> syntax, without the classes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nReact.createClass({\n  render() {\n    return (\n      &lt;div>\n        &lt;h1>Title&lt;/h1>\n        &lt;p>Description&lt;/p>\n      &lt;/div>\n    )\n  }\n})</code></pre></div>\n<p>You'll rarely see this in modern, <code class=\"language-text\">> ES6</code> codebases.</p>\n<h3>State</h3>\n<h4>Setting the default state of a component</h4>\n<p>In the Component constructor, initialize <code class=\"language-text\">this.state</code>. For example the BlogPostExcerpt component might have a <code class=\"language-text\">clicked</code> state:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class BlogPostExcerpt extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { clicked: false }\n  }\n  \n  render() {\n    return (\n      &lt;div>\n        &lt;h1>Title&lt;/h1>\n        &lt;p>Description&lt;/p>\n      &lt;/div>\n    )\n  }\n}</code></pre></div>\n<h4>Accessing the state</h4>\n<p>The <em>clicked</em> state can be accessed by referencing <code class=\"language-text\">this.state.clicked</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class BlogPostExcerpt extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { clicked: false }\n  }\n  \n  render() {\n    return (\n      &lt;div>\n        &lt;h1>Title&lt;/h1>\n        &lt;p>Description&lt;/p>\n        &lt;p>Clicked: {this.state.clicked}&lt;/p>\n      &lt;/div>\n    )\n  }\n}</code></pre></div>\n<h4>Mutating the state</h4>\n<p>A state should never be mutated by using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">this.state.clicked = true</code></pre></div>\n<p>Instead, you should always use <code class=\"language-text\">setState()</code> instead, passing it an object:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">this.setState({ clicked: true })</code></pre></div>\n<p>The object can contain a subset, or a superset, of the state. Only the properties you pass will be mutated, the ones omitted will be left in their current state.</p>\n<h4>Why you should always use <code class=\"language-text\">setState()</code></h4>\n<p>The reason is that using this method, React knows that the state has changed. It will then start the series of events that will lead to the Component being re-rendered, along with any <a href=\"https://flaviocopes.com/dom/\">DOM</a> update.</p>\n<h4>Unidirectional Data Flow</h4>\n<p>A state is always owned by one Component. Any data that's affected by this state can only affect Components below it: its children.</p>\n<p>Changing the state on a Component will never affect its parent, or its siblings, or any other Component in the application: just its children.</p>\n<p>This is the reason the state is often moved up in the Component tree.</p>\n<h4>Moving the State Up in the Tree</h4>\n<p>Because of the Unidirectional Data Flow rule, if two components need to share state, the state needs to be moved up to a common ancestor.</p>\n<p>Many times the closest ancestor is the best place to manage the state, but it's not a mandatory rule.</p>\n<p>The state is passed down to the components that need that value via props:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Converter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { currency: 'â‚¬' }\n  }\n  \n  render() {\n    return (\n      &lt;div>\n        &lt;Display currency={this.state.currency} />\n        &lt;CurrencySwitcher currency={this.state.currency} />\n      &lt;/div>\n    )\n  }\n}</code></pre></div>\n<p>The state can be mutated by a child component by passing a mutating function down as a prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Converter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { currency: 'â‚¬' }\n  }\n  \n  handleChangeCurrency = event => {\n    this.setState({ currency: this.state.currency === 'â‚¬' ? '$' : 'â‚¬' })\n  }\n  \n  render() {\n    return (\n      &lt;div>\n        &lt;Display currency={this.state.currency} />\n        &lt;CurrencySwitcher\n          currency={this.state.currency}\n          handleChangeCurrency={this.handleChangeCurrency}\n        />\n      &lt;/div>\n    )\n  }\n}\n\nconst CurrencySwitcher = props => {\n  return (\n    &lt;button onClick={props.handleChangeCurrency}>\n      Current currency is {props.currency}. Change it!\n    &lt;/button>\n  )\n}\n\nconst Display = props => {\n  return &lt;p>Current currency is {props.currency}.&lt;/p>\n}</code></pre></div>\n<h3>Props</h3>\n<p>Props is how Components get their properties. Starting from the top component, every child component gets its props from the parent. In a function component, props is all it gets passed, and they are available by adding <code class=\"language-text\">props</code> as the function argument:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const BlogPostExcerpt = props => {\n  return (\n    &lt;div>\n      &lt;h1>{props.title}&lt;/h1>\n      &lt;p>{props.description}&lt;/p>\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>In a class component, props are passed by default. There is no need to add anything special, and they are accessible as <code class=\"language-text\">this.props</code> in a Component instance.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { Component } from 'react'\n\nclass BlogPostExcerpt extends Component {\n  render() {\n    return (\n      &lt;div>\n        &lt;h1>{this.props.title}&lt;/h1>\n        &lt;p>{this.props.description}&lt;/p>\n      &lt;/div>\n    )\n  }\n}</code></pre></div>\n<p>Passing props down to child components is a great way to pass values around in your application. A component either holds data (has state) or receives data through its props.</p>\n<p>It gets complicated when:</p>\n<ul>\n<li>you need to access the state of a component from a child that's several levels down (all the previous children need to act as a pass-through, even if they do not need to know the state, complicating things)</li>\n<li>you need to access the state of a component from a completely unrelated component.</li>\n</ul>\n<h4>Default values for props</h4>\n<p>If any value is not required we need to specify a default value for it if it's missing when the Component is initialized.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">BlogPostExcerpt.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nBlogPostExcerpt.defaultProps = {\n  title: '',\n  description: ''\n}</code></pre></div>\n<p>Some tooling like <a href=\"https://flaviocopes.com/eslint/\">ESLint</a> have the ability to enforce defining the defaultProps for a Component with some propTypes not explicitly required.</p>\n<h4>How props are passed</h4>\n<p>When initializing a component, pass the props in a way similar to HTML attributes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const desc = 'A description'\n//...\n&lt;BlogPostExcerpt title=\"A blog post\" description={desc} /></code></pre></div>\n<p>We passed the title as a plain string (something we can <em>only</em> do with strings!), and description as a variable.</p>\n<h4>Children</h4>\n<p>A special prop is <code class=\"language-text\">children</code>. That contains the value of anything that is passed in the <code class=\"language-text\">body</code> of the component, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;BlogPostExcerpt title=\"A blog post\" description=\"{desc}\">\n  Something\n&lt;/BlogPostExcerpt></code></pre></div>\n<p>In this case, inside <code class=\"language-text\">BlogPostExcerpt</code> we could access \"Something\" by looking up <code class=\"language-text\">this.props.children</code>.</p>\n<p>While Props allow a Component to receive properties from its parent, to be \"instructed\" to print some data for example, state allows a component to take on life itself, and be independent of the surrounding environment.</p>\n<h3>Presentational vs container components</h3>\n<p>In React, components are often divided into 2 big buckets: <strong>presentational components</strong> and <strong>container components</strong>.</p>\n<p>Each of those have their unique characteristics.</p>\n<p>Presentational components are mostly concerned with generating some markup to be outputted.</p>\n<p>They don't manage any kind of state, except for state related the the presentation</p>\n<p>Container components are mostly concerned with the \"backend\" operations.</p>\n<p>They might handle the state of various sub-components. They might wrap several presentational components. They might interface with Redux.</p>\n<p>As a way to simplify the distinction, we can say <strong>presentational components are concerned with the look</strong>, <strong>container components are concerned with making things work</strong>.</p>\n<p>For example, this is a presentational component. It gets data from its props, and just focuses on showing an element:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Users = props => (\n  &lt;ul>\n    {props.users.map(user => (\n      &lt;li>{user}&lt;/li>\n    ))}\n  &lt;/ul>\n)</code></pre></div>\n<p>On the other hand this is a container component. It manages and stores its own data, and uses the presentational component to display it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class UsersContainer extends React.Component {\n  constructor() {\n    this.state = {\n      users: []\n    }\n  }\n  \n  componentDidMount() {\n    axios.get('/users').then(users =>\n      this.setState({ users: users }))\n    )\n  }\n  \n  render() {\n    return &lt;Users users={this.state.users} />\n  }\n}</code></pre></div>\n<h3>State vs props</h3>\n<p>In a React component, <strong>props</strong> are variables passed to it by its parent component. <strong>State</strong> on the other hand is still variables, but directly initialized and managed by the component.</p>\n<p>The state can be initialized by props.</p>\n<p>For example, a parent component might include a child component by calling</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;ChildComponent /></code></pre></div>\n<p>The parent can pass a prop by using this syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;ChildComponent color=green /></code></pre></div>\n<p>Inside the ChildComponent constructor we could access the prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class ChildComponent extends React.Component {\n  constructor(props) {\n    super(props)\n    console.log(props.color)\n  }\n}</code></pre></div>\n<p>and any other method in this class can reference the props using <code class=\"language-text\">this.props</code>.</p>\n<p>Props can be used to set the internal state based on a prop value in the constructor, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class ChildComponent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state.colorName = props.color\n  }\n}</code></pre></div>\n<p>Of course a component can also initialize the state without looking at props.</p>\n<p>In this case there's nothing useful going on, but imagine doing something different based on the prop value, probably setting a state value is best.</p>\n<p>Props should never be changed in a child component, so if there's something going on that alters some variable, that variable should belong to the component state.</p>\n<p>Props are also used to allow child components to access methods defined in the parent component. This is a good way to centralize managing the state in the parent component, and avoid children having the need to have their own state.</p>\n<p>Most of your components will just display some kind of information based on the props they received, and stay <strong>stateless</strong>.</p>\n<h3>PropTypes</h3>\n<p>Since JavaScript is a dynamically typed language, we don't really have a way to enforce the type of a variable at compile time, and if we pass invalid types, they will fail at runtime or give weird results if the types are compatible but not what we expect.</p>\n<p>Flow and TypeScript help a lot, but React has a way to directly help with props types, and even before running the code, our tools (editors, linters) can detect when we are passing the wrong values:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import PropTypes from 'prop-types'\nimport React from 'react'\n\nclass BlogPostExcerpt extends Component {\n  render() {\n    return (\n      &lt;div>\n        &lt;h1>{this.props.title}&lt;/h1>\n        &lt;p>{this.props.description}&lt;/p>\n      &lt;/div>\n    )\n  }\n}\n\nBlogPostExcerpt.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nexport default BlogPostExcerpt</code></pre></div>\n<h4>Which types can we use</h4>\n<p>These are the fundamental types we can accept:</p>\n<ul>\n<li>PropTypes.array</li>\n<li>PropTypes.bool</li>\n<li>PropTypes.func</li>\n<li>PropTypes.number</li>\n<li>PropTypes.object</li>\n<li>PropTypes.string</li>\n<li>PropTypes.symbol</li>\n</ul>\n<p>We can accept one of two types:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number\n]),</code></pre></div>\n<p>We can accept one of many values:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.oneOf(['Test1', 'Test2']),</code></pre></div>\n<p>We can accept an instance of a class:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.instanceOf(Something)</code></pre></div>\n<p>We can accept any React node:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.node</code></pre></div>\n<p>or even any type at all:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.any</code></pre></div>\n<p>Arrays have a special syntax that we can use to accept an array of a particular type:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.arrayOf(PropTypes.string)</code></pre></div>\n<p>We can compose object properties by using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.shape({\n  color: PropTypes.string,\n  fontSize: PropTypes.number\n})</code></pre></div>\n<h4>Requiring properties</h4>\n<p>Appending <code class=\"language-text\">isRequired</code> to any PropTypes option will cause React to return an error if that property is missing:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PropTypes.arrayOf(PropTypes.string).isRequired,\nPropTypes.string.isRequired,</code></pre></div>\n<h3>React Fragment</h3>\n<p>Notice how I wrap return values in a <code class=\"language-text\">div</code>. This is because a component can only return one single element, and if you want more than one, you need to wrap it with another container tag.</p>\n<p>This, however, causes an unnecessary <code class=\"language-text\">div</code> in the output. You can avoid this by using <code class=\"language-text\">React.Fragment</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { Component } from 'react'\n\nclass BlogPostExcerpt extends Component {\n  render() {\n    return (\n      &lt;React.Fragment>\n        &lt;h1>{this.props.title}&lt;/h1>\n        &lt;p>{this.props.description}&lt;/p>\n      &lt;/React.Fragment>\n    )\n  }\n}</code></pre></div>\n<p>which also has a very nice shorthand syntax <code class=\"language-text\">&lt;>\n&lt;/></code> that is supported only in recent releases (and Babel 7+):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { Component } from 'react'\n\nclass BlogPostExcerpt extends Component {\n  render() {\n    return (\n      &lt;>\n        &lt;h1>{this.props.title}&lt;/h1>\n        &lt;p>{this.props.description}&lt;/p>\n      &lt;/>\n    )\n  }\n}</code></pre></div>\n<h3>Events</h3>\n<p>React provides an easy way to manage events. Prepare to say goodbye to <code class=\"language-text\">addEventListener</code>.</p>\n<p>In the previous article about the State you saw this example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const CurrencySwitcher = props => {\n  return (\n    &lt;button onClick={props.handleChangeCurrency}>\n      Current currency is {props.currency}. Change it!\n    &lt;/button>\n  )\n}</code></pre></div>\n<p>If you've been using JavaScript for a while, this is just like plain old <a href=\"https://flaviocopes.com/javascript-events/\">JavaScript event handlers</a>, except that this time you're defining everything in JavaScript, not in your HTML, and you're passing a function, not a string.</p>\n<p>The actual event names are a little bit different because in React you use camelCase for everything, so <code class=\"language-text\">onclick</code> becomes <code class=\"language-text\">onClick</code>, <code class=\"language-text\">onsubmit</code> becomes <code class=\"language-text\">onSubmit</code>.</p>\n<p>For reference, this is old school HTML with JavaScript events mixed in:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;button onclick=\"handleChangeCurrency()\">...&lt;;/button></code></pre></div>\n<h4>Event handlers</h4>\n<p>It's a convention to have event handlers defined as methods on the Component class:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Converter extends React.Component {\n  handleChangeCurrency = event => {\n    this.setState({ currency: this.state.currency === 'â‚¬' ? '$' : 'â‚¬' })\n  }\n}</code></pre></div>\n<p>All handlers receive an event object that adheres, cross-browser, to the <a href=\"https://www.w3.org/TR/DOM-Level-3-Events/\">W3C UI Events spec</a>.</p>\n<h4>Bind <code class=\"language-text\">this</code> in methods</h4>\n<p>If you use class components, don't forget to bind methods. The methods of ES6 classes by default are not bound. What this means is that <code class=\"language-text\">this</code> is not defined unless you define methods as arrow functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Converter extends React.Component {\n  handleClick = e => {\n    /* ... */\n  }\n  //...\n}</code></pre></div>\n<p>when using the the property initializer syntax with Babel (enabled by default in <code class=\"language-text\">create-react-app</code>), otherwise you need to bind it manually in the constructor:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Converter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleClick = this.handleClick.bind(this)\n  }\n  handleClick(e) {}\n}</code></pre></div>\n<h3>The events reference</h3>\n<p>There are lots of events supported, here's a summary list.</p>\n<h4>Clipboard</h4>\n<ul>\n<li>onCopy</li>\n<li>onCut</li>\n<li>onPaste</li>\n</ul>\n<h4>Composition</h4>\n<ul>\n<li>onCompositionEnd</li>\n<li>onCompositionStart</li>\n<li>onCompositionUpdate</li>\n</ul>\n<h4>Keyboard</h4>\n<ul>\n<li>onKeyDown</li>\n<li>onKeyPress</li>\n<li>onKeyUp</li>\n</ul>\n<h4>Focus</h4>\n<ul>\n<li>onFocus</li>\n<li>onBlur</li>\n</ul>\n<h4>Form</h4>\n<ul>\n<li>onChange</li>\n<li>onInput</li>\n<li>onSubmit</li>\n</ul>\n<h4>Mouse</h4>\n<ul>\n<li>onClick</li>\n<li>onContextMenu</li>\n<li>onDoubleClick</li>\n<li>onDrag</li>\n<li>onDragEnd</li>\n<li>onDragEnter</li>\n<li>onDragExit</li>\n<li>onDragLeave</li>\n<li>onDragOver</li>\n<li>onDragStart</li>\n<li>onDrop</li>\n<li>onMouseDown</li>\n<li>onMouseEnter</li>\n<li>onMouseLeave</li>\n<li>onMouseMove</li>\n<li>onMouseOut</li>\n<li>onMouseOver</li>\n<li>onMouseUp</li>\n</ul>\n<h4>Selection</h4>\n<ul>\n<li>onSelect</li>\n</ul>\n<h4>Touch</h4>\n<ul>\n<li>onTouchCancel</li>\n<li>onTouchEnd</li>\n<li>onTouchMove</li>\n<li>onTouchStart</li>\n</ul>\n<h4>UI</h4>\n<ul>\n<li>onScroll</li>\n</ul>\n<h4>Mouse Wheel</h4>\n<ul>\n<li>onWheel</li>\n</ul>\n<h4>Media</h4>\n<ul>\n<li>onAbort</li>\n<li>onCanPlay</li>\n<li>onCanPlayThrough</li>\n<li>onDurationChange</li>\n<li>onEmptied</li>\n<li>onEncrypted</li>\n<li>onEnded</li>\n<li>onError</li>\n<li>onLoadedData</li>\n<li>onLoadedMetadata</li>\n<li>onLoadStart</li>\n<li>onPause</li>\n<li>onPlay</li>\n<li>onPlaying</li>\n<li>onProgress</li>\n<li>onRateChange</li>\n<li>onSeeked</li>\n<li>onSeeking</li>\n<li>onStalled</li>\n<li>onSuspend</li>\n<li>onTimeUpdate</li>\n<li>onVolumeChange</li>\n<li>onWaiting</li>\n</ul>\n<h4>Image</h4>\n<ul>\n<li>onLoad</li>\n<li>onError</li>\n</ul>\n<h4>Animation</h4>\n<ul>\n<li>onAnimationStart</li>\n<li>onAnimationEnd</li>\n<li>onAnimationIteration</li>\n</ul>\n<h4>Transition</h4>\n<ul>\n<li>onTransitionEnd</li>\n</ul>\n<h3>Lifecycle Events</h3>\n<p>React class components can have hooks for several lifecycle events.</p>\n<blockquote>\n<p><em>Hooks allow function components to access them too, in a different way.</em></p>\n</blockquote>\n<p>During the lifetime of a component, there's a series of events that gets called, and to each event you can hook and provide custom functionality.</p>\n<p>What hook is best for what functionality is something we're going to see here.</p>\n<p>First, there are 3 phases in a React component lifecycle:</p>\n<ul>\n<li>Mounting</li>\n<li>Updating</li>\n<li>Unmounting</li>\n</ul>\n<p>Let's see those 3 phases in detail and the methods that get called for each.</p>\n<h4>Mounting</h4>\n<p>When mounting you have 4 lifecycle methods before the component is mounted in the DOM: the <code class=\"language-text\">constructor</code>, <code class=\"language-text\">getDerivedStateFromProps</code>, <code class=\"language-text\">render</code> and <code class=\"language-text\">componentDidMount</code>.</p>\n<h4>Constructor</h4>\n<p>The constructor is the first method that is called when mounting a component.</p>\n<p>You usually use the constructor to set up the initial state using <code class=\"language-text\">this.state = ...</code>.</p>\n<h4>getDerivedStateFromProps()</h4>\n<p>When the state depends on props, <code class=\"language-text\">getDerivedStateFromProps</code> can be used to update the state based on the props value.</p>\n<p>It was added in React 16.3, aiming to replace the <code class=\"language-text\">componentWillReceiveProps</code> deprecated method.</p>\n<p>In this method you haven't access to <code class=\"language-text\">this</code> as it's a static method.</p>\n<p>It's a pure method, so it should not cause side effects and should return the same output when called multiple times with the same input.</p>\n<p>Returns an object with the updated elements of the state (or null if the state does not change)</p>\n<h4>render()</h4>\n<p>From the render() method you return the JSX that builds the component interface.</p>\n<p>It's a pure method, so it should not cause side effects and should return the same output when called multiple times with the same input.</p>\n<h4>componentDidMount()</h4>\n<p>This method is the one that you will use to perform API calls, or process operations on the DOM.</p>\n<h4>Updating</h4>\n<p>When updating you have 5 lifecycle methods before the component is mounted in the DOM: the <code class=\"language-text\">getDerivedStateFromProps</code>, <code class=\"language-text\">shouldComponentUpdate</code>, <code class=\"language-text\">render</code>, <code class=\"language-text\">getSnapshotBeforeUpdate</code> and <code class=\"language-text\">componentDidUpdate</code>.</p>\n<h4>getDerivedStateFromProps()</h4>\n<p>See the above description for this method.</p>\n<h4>shouldComponentUpdate()</h4>\n<p>This method returns a boolean, <code class=\"language-text\">true</code> or <code class=\"language-text\">false</code>. You use this method to tell React if it should go on with the rerendering, and defaults to <code class=\"language-text\">true</code>. You will return <code class=\"language-text\">false</code> when rerendering is expensive and you want to have more control on when this happens.</p>\n<h4>render()</h4>\n<p>See the above description for this method.</p>\n<h4>getSnapshotBeforeUpdate()</h4>\n<p>In this method you have access to the props and state of the previous render, and of the current render.</p>\n<p>Its use cases are very niche, and it's probably the one that you will use less.</p>\n<h4>componentDidUpdate()</h4>\n<p>This method is called when the component has been updated in the DOM. Use this to run any 3rd party DOM API or call APIs that must be updated when the DOM changes.</p>\n<p>It corresponds to the <code class=\"language-text\">componentDidMount()</code> method from the mounting phase.</p>\n<h4>Unmounting</h4>\n<p>In this phase we only have one method, <code class=\"language-text\">componentWillUnmount</code>.</p>\n<h4>componentWillUnmount()</h4>\n<p>The method is called when the component is removed from the DOM. Use this to do any sort of cleanup you need to perform.</p>\n<h4>Legacy</h4>\n<p>If you are working on an app that uses <code class=\"language-text\">componentWillMount</code>, <code class=\"language-text\">componentWillReceiveProps</code> or <code class=\"language-text\">componentWillUpdate</code>, those were deprecated in React 16.3 and you should migrate to other lifecycle methods.</p>\n<h3>Forms in React</h3>\n<p>Forms are one of the few HTML elements that are interactive by default.</p>\n<p>They were designed to allow the user to interact with a page.</p>\n<p>Common uses of forms?</p>\n<ul>\n<li>Search</li>\n<li>Contact forms</li>\n<li>Shopping carts checkout</li>\n<li>Login and registration</li>\n<li>and more!</li>\n</ul>\n<p>Using React we can make our forms much more interactive and less static.</p>\n<p>There are two main ways of handling forms in React, which differ on a fundamental level: how data is managed.</p>\n<ul>\n<li>if the data is handled by the DOM, we call them <strong>uncontrolled components</strong></li>\n<li>if the data is handled by the components we call them <strong>controlled components</strong></li>\n</ul>\n<p>As you can imagine, controlled components is what you will use most of the time. The component state is the single source of truth, rather than the DOM. Some form fields are inherently uncontrolled because of their behavior, like the <code class=\"language-text\">&lt;input type=\"file\"></code> field.</p>\n<p>When an element state changes in a form field managed by a component, we track it using the <code class=\"language-text\">onChange</code> attribute.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Form extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { username: '' }\n  }\n  \n  handleChange(event) {}\n  \n  render() {\n    return (\n      &lt;form>\n        Username:\n        &lt;input\n          type=\"text\"\n          value={this.state.username}\n          onChange={this.handleChange}\n        />\n      &lt;/form>\n    )\n  }\n}</code></pre></div>\n<p>In order to set the new state, we must bind <code class=\"language-text\">this</code> to the <code class=\"language-text\">handleChange</code> method, otherwise <code class=\"language-text\">this</code> is not accessible from within that method:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Form extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { username: '' }\n    this.handleChange = this.handleChange.bind(this)\n  }\n  \n  handleChange(event) {\n    this.setState({ value: event.target.value })\n  }\n  \n  render() {\n    return (\n      &lt;form>\n        &lt;input\n          type=\"text\"\n          value={this.state.username}\n          onChange={this.handleChange}\n        />\n      &lt;/form>\n    )\n  }\n}</code></pre></div>\n<p>Similarly, we use the <code class=\"language-text\">onSubmit</code> attribute on the form to call the <code class=\"language-text\">handleSubmit</code> method when the form is submitted:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Form extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { username: '' }\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n  \n  handleChange(event) {\n    this.setState({ value: event.target.value })\n  }\n  \n  handleSubmit(event) {\n    alert(this.state.username)\n    event.preventDefault()\n  }\n  \n  render() {\n    return (\n      &lt;form onSubmit={this.handleSubmit}>\n        &lt;input\n          type=\"text\"\n          value={this.state.username}\n          onChange={this.handleChange}\n        />\n        &lt;input type=\"submit\" value=\"Submit\" />\n      &lt;/form>\n    )\n  }\n}</code></pre></div>\n<p>Validation in a form can be handled in the <code class=\"language-text\">handleChange</code> method: you have access to the old value of the state, and the new one. You can check the new value and if not valid reject the updated value (and communicate it in some way to the user).</p>\n<p>HTML Forms are inconsistent. They have a long history, and it shows. React however makes things more consistent for us, and you can get (and update) fields using its <code class=\"language-text\">value</code> attribute.</p>\n<p>Here's a <code class=\"language-text\">textarea</code>, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;textarea value={this.state.address} onChange={this.handleChange} /></code></pre></div>\n<p>The same goes for the <code class=\"language-text\">select</code> tag:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;select value=\"{this.state.age}\" onChange=\"{this.handleChange}\">\n  &lt;option value=\"teen\">Less than 18&lt;/option>\n  &lt;option value=\"adult\">18+&lt;/option>\n&lt;/select></code></pre></div>\n<p>Previously we mentioned the <code class=\"language-text\">&lt;input type=\"file\"></code> field. That works a bit differently.</p>\n<p>In this case you need to get a reference to the field by assigning the <code class=\"language-text\">ref</code> attribute to a property defined in the constructor with <code class=\"language-text\">React.createRef()</code>, and use that to get the value of it in the submit handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class FileInput extends React.Component {\n  constructor(props) {\n    super(props)\n    this.curriculum = React.createRef()\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n  \n  handleSubmit(event) {\n    alert(this.curriculum.current.files[0].name)\n    event.preventDefault()\n  }\n  \n  render() {\n    return (\n      &lt;form onSubmit={this.handleSubmit}>\n        &lt;input type=\"file\" ref={this.curriculum} />\n        &lt;input type=\"submit\" value=\"Submit\" />\n      &lt;/form>\n    )\n  }\n}</code></pre></div>\n<p>This is the <strong>uncontrolled components</strong> way. The state is stored in the DOM rather than in the component state (notice we used <code class=\"language-text\">this.curriculum</code> to access the uploaded file, and have not touched the <code class=\"language-text\">state</code>.</p>\n<p>I know what you're thinking â€” beyond those basics, there must be a library that simplifies all this form handling stuff and automates validation, error handling and more, right? There is a great one, <a href=\"https://github.com/jaredpalmer/formik\">Formik</a>.</p>\n<h3>Reference a DOM element</h3>\n<p>React is great at abstracting away the DOM from you when building apps.</p>\n<p>But what if you want to access the DOM element that a React component represents?</p>\n<p>Maybe you have to add a library that interacts directly with the DOM like a chart library, maybe you need to call some DOM API, or add focus on an element.</p>\n<blockquote>\n<p><em>Whatever the reason is, a good practice is making sure there's no other way of doing so without accessing the DOM directly.</em></p>\n</blockquote>\n<p>In the JSX of your component, you can assign the reference of the DOM element to a component property using this attribute:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ref={el => this.someProperty = el}</code></pre></div>\n<p>Put this into context, for example with a <code class=\"language-text\">button</code> element:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;button ref={el => (this.button = el)} /></code></pre></div>\n<p><code class=\"language-text\">button</code> refers to a property of the component, which can then be used by the component's lifecycle methods (or other methods) to interact with the DOM:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class SomeComponent extends Component {\n  render() {\n    return &lt;button ref={el => (this.button = el)} />\n  }\n}</code></pre></div>\n<p>In a function component the mechanism is the same, you just avoid using <code class=\"language-text\">this</code> (since it does not point to the component instance) and use a property instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function SomeComponent() {\n  let button\n  return &lt;button ref={el => (button = el)} />\n}</code></pre></div>\n<h3>Server side rendering</h3>\n<p><strong>Server Side Rendering</strong>, also called <strong>SSR</strong>, is the ability of a JavaScript application to render on the server rather than in the browser.</p>\n<p>Why would we ever want to do so?</p>\n<ul>\n<li>it allows your site to have a faster first page load time, which is the key to a good user experience</li>\n<li>it is essential for SEO: search engines cannot (yet?) efficiently and correctly index applications that exclusively render client-side. Despite the latest improvements to indexing in Google, there are other search engines too, and Google is not perfect at it in any case. Also, Google favors sites with fast load times, and having to load client-side is not good for speed</li>\n<li>it's great when people share a page of your site on social media, as they can easily gather the metadata needed to nicely share the link (images, title, description..)</li>\n</ul>\n<p>Without Server Side Rendering, all your server ships is an HTML page with no body, just some script tags that are then used by the browser to render the application.</p>\n<p>Client-rendered apps are great at any subsequent user interaction after the first page load. Server Side Rendering allows us to get the sweet spot in the middle of client-rendered apps and backend-rendered apps: the page is generated server-side, but all interactions with the page once it's been loaded are handled client-side.</p>\n<p>However Server Side Rendering has its drawback too:</p>\n<ul>\n<li>it's fair to say that a simple SSR proof of concept is simple, but the complexity of SSR can grow with the complexity of your application</li>\n<li>rendering a big application server-side can be quite resource-intensive, and under heavy load it could even provide a slower experience than client-side rendering, since you have a single bottleneck</li>\n</ul>\n<h3>A very simplistic example of what it takes to Server-Side render a React app</h3>\n<p>SSR setups can grow very, very complex and most tutorials will bake in Redux, React Router and many other concepts from the start.</p>\n<p>To understand how SSR works, let's start from the basics to implement a proof of concept.</p>\n<blockquote>\n<p><em>Feel free to skip this paragraph if you just want to look into the libraries that provide SSR and not bother with the ground work</em></p>\n</blockquote>\n<p>To implement basic SSR we're going to use Express.</p>\n<blockquote>\n<p><em>If you are new to Express, or need some catch-up, check out my free Express Handbook here: <a href=\"https://flaviocopes.com/page/ebooks/\">https://flaviocopes.com/page/ebooks/</a>.</em></p>\n</blockquote>\n<p>Warning: the complexity of SSR can grow with the complexity of your application. This is the bare minimum setup to render a basic React app. For more complex needs you might need to do a bit more work or also check out SSR libraries for React.</p>\n<p>I assume you started a React app with <code class=\"language-text\">create-react-app</code>. If you are just trying, install one now using <code class=\"language-text\">npx create-react-app ssr</code>.</p>\n<p>Go to the main app folder with the terminal, then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install express</code></pre></div>\n<p>You have a set of folders in your app directory. Create a new folder called <code class=\"language-text\">server</code>, then go into it and create a file named <code class=\"language-text\">server.js</code>.</p>\n<p>Following the <code class=\"language-text\">create-react-app</code> conventions, the app lives in the <code class=\"language-text\">src/App.js</code> file. We're going to load that component, and render it to a string using <a href=\"https://reactjs.org/docs/react-dom-server.html\">ReactDOMServer.renderToString()</a>, which is provided by <code class=\"language-text\">react-dom</code>.</p>\n<p>You get the contents of the <code class=\"language-text\">./build/index.html</code> file, and replace the `<div id=\"root\"></p>\n</div>`placeholder, which is the tag where the application hooks by default, with `` `<div id=\"root\">\\${ReactDOMServer.renderToString(<App />)}</div> ``.\n<p>All the content inside the <code class=\"language-text\">build</code> folder is going to be served as-is, statically by Express.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import path from 'path'\nimport fs from 'fs'\n\nimport express from 'express'\nimport React from 'react'\nimport ReactDOMServer from 'react-dom/server'\n\nimport App from '../src/App'\n\nconst PORT = 8080\nconst app = express()\n\nconst router = express.Router()\n\nconst serverRenderer = (req, res, next) => {\n  fs.readFile(path.resolve('./build/index.html'), 'utf8', (err, data) => {\n    if (err) {\n      console.error(err)\n      return res.status(500).send('An error occurred')\n    }\n    return res.send(\n      data.replace(\n        '&lt;div id=\"root\">\n&lt;/div>',\n        `&lt;div id=\"root\">${ReactDOMServer.renderToString(&lt;App />)}&lt;/div>`\n      )\n    )\n  })\n}\nrouter.use('^/$', serverRenderer)\n\nrouter.use(\n  express.static(path.resolve(__dirname, '..', 'build'), { maxAge: '30d' })\n)\n\n// tell the app to use the above rules\napp.use(router)\n\n// app.use(express.static('./build'))\napp.listen(PORT, () => {\n  console.log(`SSR running on port ${PORT}`)\n})</code></pre></div>\n<p>Now, in the client application, in your <code class=\"language-text\">src/index.js</code>, instead of calling <code class=\"language-text\">ReactDOM.render()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.render(&lt;App />, document.getElementById('root'))</code></pre></div>\n<p>call <code class=\"language-text\">[ReactDOM.hydrate()](https://reactjs.org/docs/react-dom.html#hydrate)</code>, which is the same but has the additional ability to attach event listeners to existing markup once React loads:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.hydrate(&lt;App />, document.getElementById('root'))</code></pre></div>\n<p>All the Node.js code needs to be transpiled by Babel, as server-side Node.js code does not know anything about JSX, nor ES Modules (which we use for the <code class=\"language-text\">include</code> statements).</p>\n<p>Install these 3 packages:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install @babel/register @babel/preset-env @babel/preset-react ignore-styles express</code></pre></div>\n<p><code class=\"language-text\">[ignore-styles](https://www.npmjs.com/package/ignore-styles)</code> is a Babel utility that will tell it to ignore CSS files imported using the <code class=\"language-text\">import</code> syntax.</p>\n<p>Let's create an entry point in <code class=\"language-text\">server/index.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">require('ignore-styles')\n\nrequire('@babel/register')({\n  ignore: [/(node_modules)/],\n  presets: ['@babel/preset-env', '@babel/preset-react']\n})\n\nrequire('./server')</code></pre></div>\n<p>Build the React application, so that the build/ folder is populated:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run build</code></pre></div>\n<p>and let's run this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node server/index.js</code></pre></div>\n<p>I said this is a simplistic approach, and it is:</p>\n<ul>\n<li>it does not handle rendering images correctly when using imports, which need Webpack in order to work (and which complicates the process a lot)</li>\n<li>it does not handle page header metadata, which is essential for SEO and social sharing purposes (among other things)</li>\n</ul>\n<p>So while this is a good example of using <code class=\"language-text\">ReactDOMServer.renderToString()</code> and <code class=\"language-text\">ReactDOM.hydrate</code> to get this basic server-side rendering, it's not enough for real world usage.</p>\n<h4>Server Side Rendering using libraries</h4>\n<p>SSR is hard to do right, and React has no de-facto way to implement it.</p>\n<p>It's still very much debatable if it's worth the trouble, complication and overhead to get the benefits, rather than using a different technology to serve those pages. <a href=\"https://www.reddit.com/r/reactjs/comments/7o6oj6/serverside_rendering_not_worth_it/\">This discussion on Reddit</a> has lots of opinions in that regard.</p>\n<p>When Server Side Rendering is an important matter, my suggestion is to rely on pre-made libraries and tools that have had this goal in mind since the beginning.</p>\n<p>In particular, I suggest <strong>Next.js</strong> and <strong>Gatsby</strong>, two projects we'll see later on.</p>\n<h3>The Context API</h3>\n<p>The Context API is a neat way to pass state across the app without having to use props. It was introduced to allow you to pass state (and enable the state to update) across the app, without having to use props for it.</p>\n<p>The React team suggests to stick to props if you have just a few levels of children to pass, because it's still a much less complicated API than the Context API.</p>\n<p>In many cases, it enables us to avoid using Redux, simplifying our apps a lot, and also learning how to use React.</p>\n<p>How does it work?</p>\n<p>You create a context using <code class=\"language-text\">React.createContext()</code>, which returns a Context object:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { Provider, Consumer } = React.createContext()</code></pre></div>\n<p>Then you create a wrapper component that returns a <strong>Provider</strong> component, and you add as children all the components from which you want to access the context:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Container extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      something: 'hey'\n    }\n  }\n  \n  render() {\n    return (\n      &lt;Provider value={{ state: this.state }}>{this.props.children}&lt;/Provider>\n    )\n  }\n}\n\nclass HelloWorld extends React.Component {\n  render() {\n    return (\n      &lt;Container>\n        &lt;Button />\n      &lt;/Container>\n    )\n  }\n}</code></pre></div>\n<p>I used Container as the name of this component because this will be a global provider. You can also create smaller contexts.</p>\n<p>Inside a component that's wrapped in a Provider, you use a <strong>Consumer</strong> component to make use of the context:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Button extends React.Component {\n  render() {\n    return (\n      &lt;Consumer>\n        {context => &lt;button>{context.state.something}&lt;/button>}\n      &lt;/Consumer>\n    )\n  }\n}</code></pre></div>\n<p>You can also pass functions into a Provider value, and those functions will be used by the Consumer to update the context state:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Provider value={{\n  state: this.state,\n  updateSomething: () => this.setState({something: 'ho!'})\n  {this.props.children}\n&lt;/Provider>\n\n/* ... */\n&lt;Consumer>\n  {(context) => (\n    &lt;button onClick={context.updateSomething}>{context.state.something}&lt;/button>\n  )}\n&lt;/Consumer></code></pre></div>\n<p>You can see this in action <a href=\"https://glitch.com/edit/#!/flavio-react-context-api-example?path=app/components/HelloWorld.jsx\">in this Glitch</a>.</p>\n<p>You can create multiple contexts, to make your state distributed across components, yet expose it and make it reachable by any component you want.</p>\n<p>When using multiple files, you create the content in one file, and import it in all the places you use it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//context.js\nimport React from 'react'\nexport default React.createContext()\n\n//component1.js\nimport Context from './context'\n//... use Context.Provider\n\n//component2.js\nimport Context from './context'\n//... use Context.Consumer</code></pre></div>\n<h3>Higher order components</h3>\n<p>You might be familiar with Higher Order Functions in JavaScript. Those are functions that accept functions as arguments, and/or return functions.</p>\n<p>Two examples of those functions are <code class=\"language-text\">Array.map()</code> or <code class=\"language-text\">Array.filter()</code>.</p>\n<p>In React, we extend this concept to components, and so we have a <strong>Higher Order Component (HOC)</strong>when the component accepts a component as input and returns a component as its output.</p>\n<p>In general, higher order components allow you to create code that's composable and reusable, and also more encapsulated.</p>\n<p>We can use a HOC to add methods or properties to the state of a component, or a Redux store for example.</p>\n<p>You might want to use Higher Order Components when you want to enhance an existing component, operate on the state or props, or its rendered markup.</p>\n<p>There is a convention of prepending a Higher Order Component with the <code class=\"language-text\">with</code> string (it's a convention, so it's not mandatory), so if you have a <code class=\"language-text\">Button</code> component, its HOC counterpart should be called <code class=\"language-text\">withButton</code>.</p>\n<p>Let's create one.</p>\n<p>The simplest example ever of a HOC is one that simply returns the component unaltered:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const withElement = Element => () => &amp;lt;Element /></code></pre></div>\n<p>Let's make this a little bit more useful and add a property to that button, in addition to all the props it already came with, the color:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const withColor = Element => props => &lt;Element {...props} color=\"red\" /></code></pre></div>\n<p>We use this HOC in a component JSX:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  return &lt;button>test&lt;/button>\n}\n\nconst ColoredButton = withColor(Button)</code></pre></div>\n<p>and we can finally render the ColoredButton component in our app JSX:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function App() {\n  return (\n    &lt;div className=\"App\">\n      &lt;h1>Hello&lt;/h1>\n      &lt;ColoredButton />\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>This is a very simple example but hopefully you can get the gist of HOCs before applying those concepts to more complex scenarios.</p>\n<h3>Render Props</h3>\n<p>A common pattern used to share state between components is to use the <code class=\"language-text\">children</code> prop.</p>\n<p>Inside a component JSX you can render <code class=\"language-text\">{this.props.children}</code> which automatically injects any JSX passed in the parent component as a children:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Parent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      /*...*/\n    }\n  }\n  \n  render() {\n    return &lt;div>{this.props.children}&lt;/div>\n  }\n}\n\nconst Children1 = () => {}\n\nconst Children2 = () => {}\n\nconst App = () => (\n  &lt;Parent>\n    &lt;Children1 />\n    &lt;Children2 />\n  &lt;/Parent>\n)</code></pre></div>\n<p>However, there is a problem here: the state of the parent component cannot be accessed from the children.</p>\n<p>To be able to share the state, you need to use a render prop component, and instead of passing components as children of the parent component, you pass a function which you then execute in <code class=\"language-text\">{this.props.children()}</code>. The function can accept arguments:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Parent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { name: 'Flavio' }\n  }\n  \n  render() {\n    return &lt;div>{this.props.children(this.state.name)}&lt;/div>\n  }\n}\n\nconst Children1 = props => {\n  return &lt;p>{props.name}&lt;/p>\n}\n\nconst App = () => &lt;Parent>{name => &lt;Children1 name={name} />}&lt;/Parent></code></pre></div>\n<p>Instead of using the <code class=\"language-text\">children</code> prop, which has a very specific meaning, you can use any prop, and so you can use this pattern multiple times on the same component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">class Parent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { name: 'Flavio', age: 35 }\n  }\n  \n  render() {\n    return (\n      &lt;div>\n        &lt;p>Test&lt;/p>\n        {this.props.someprop1(this.state.name)}\n        {this.props.someprop2(this.state.age)}\n      &lt;/div>\n    )\n  }\n}\n\nconst Children1 = props => {\n  return &lt;p>{props.name}&lt;/p>\n}\n\nconst Children2 = props => {\n  return &lt;p>{props.age}&lt;/p>\n}\n\nconst App = () => (\n  &lt;Parent\n    someprop1={name => &lt;Children1 name={name} />}\n    someprop2={age => &lt;Children2 age={age} />}\n  />\n)\n\nReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<h3>Hooks</h3>\n<p>Hooks is a feature that will be introduced in React 16.7, and is going to change how we write React apps in the future.</p>\n<p>Before Hooks appeared, some key things in components were only possible using class components: having their own state, and using lifecycle events. Function components, lighter and more flexible, were limited in functionality.</p>\n<p><strong>Hooks allow function components to have state and to respond to lifecycle events</strong> too, and kind of make class components obsolete. They also allow function components to have a good way to handle events.</p>\n<h4>Access state</h4>\n<p>Using the <code class=\"language-text\">useState()</code> API, you can create a new state variable, and have a way to alter it. <code class=\"language-text\">useState()</code> accepts the initial value of the state item and returns an array containing the state variable, and the function you call to alter the state. Since it returns an array we use <a href=\"https://flaviocopes.com/es6/#destructuring-assignments\">array destructuring</a> to access each individual item, like this: <code class=\"language-text\">const [count, setCount] = useState(0)</code></p>\n<p>Here's a practical example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { useState } from 'react'\n\nconst Counter = () => {\n  const [count, setCount] = useState(0)\n  \n  return (\n    &lt;div>\n      &lt;p>You clicked {count} times&lt;/p>\n      &lt;button onClick={() => setCount(count + 1)}>Click me&lt;/button>\n    &lt;/div>\n  )\n}\n\nReactDOM.render(&lt;Counter />, document.getElementById('app'))</code></pre></div>\n<p>You can add as many <code class=\"language-text\">useState()</code> calls you want, to create as many state variables as you want. Just make sure you call it in the top level of a component (not in an <code class=\"language-text\">if</code> or in any other block).</p>\n<p><a href=\"https://codepen.io/flaviocopes/pen/maVPKa\">Example on Codepen</a></p>\n<h4>Access lifecycle hooks</h4>\n<p>Another very important feature of Hooks is allowing function components to have access to the lifecycle hooks.</p>\n<p>Using class components you can register a function on the <code class=\"language-text\">componentDidMount</code>, <code class=\"language-text\">componentWillUnmount</code> and <code class=\"language-text\">componentDidUpdate</code> events, and those will serve many use cases, from variables initialization to API calls to cleanup.</p>\n<p>Hooks provide the <code class=\"language-text\">useEffect()</code> API. The call accepts a function as argument.</p>\n<p>The function runs when the component is first rendered, and on every subsequent re-render/update. React first updates the DOM, then calls any function passed to <code class=\"language-text\">useEffect()</code>. All without blocking the UI rendering even on blocking code, unlike the old <code class=\"language-text\">componentDidMount</code> and <code class=\"language-text\">componentDidUpdate</code>, which makes our apps feel faster.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { useEffect, useState } = React\n\nconst CounterWithNameAndSideEffect = () => {\n  const [count, setCount] = useState(0)\n  const [name, setName] = useState('Flavio')\n  \n  useEffect(() => {\n    console.log(`Hi ${name} you clicked ${count} times`)\n  })\n  \n  return (\n    &lt;div>\n      &lt;p>\n        Hi {name} you clicked {count} times\n      &lt;/p>\n      &lt;button onClick={() => setCount(count + 1)}>Click me&lt;/button>\n      &lt;button onClick={() => setName(name === 'Flavio' ? 'Roger' : 'Flavio')}>\n        Change name\n      &lt;/button>\n    &lt;/div>\n  )\n}\n\nReactDOM.render(\n  &lt;CounterWithNameAndSideEffect />,\n  document.getElementById('app')\n)</code></pre></div>\n<p>The same <code class=\"language-text\">componentWillUnmount</code> job can be achieved by optionally <strong>returning</strong> a function from our <code class=\"language-text\">useEffect()</code> parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">useEffect(() => {\n  console.log(`Hi ${name} you clicked ${count} times`)\n  return () => {\n    console.log(`Unmounted`)\n  }\n})</code></pre></div>\n<p><code class=\"language-text\">useEffect()</code> can be called multiple times, which is nice to separate unrelated logic (something that plagues the class component lifecycle events).</p>\n<p>Since the <code class=\"language-text\">useEffect()</code> functions are run on every subsequent re-render/update, we can tell React to skip a run, for performance purposes, by adding a second parameter which is an array that contains a list of state variables to watch for. React will only re-run the side effect if one of the items in this array changes.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">useEffect(\n  () => {\n    console.log(`Hi ${name} you clicked ${count} times`)\n  },\n  [name, count]\n)</code></pre></div>\n<p>Similarly you can tell React to only execute the side effect once (at mount time), by passing an empty array:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">useEffect(() => {\n  console.log(`Component mounted`)\n}, [])</code></pre></div>\n<p><code class=\"language-text\">useEffect()</code> is great for adding logs, accessing 3rd party APIs and much more.</p>\n<p><a href=\"https://codepen.io/flaviocopes/pen/WLrxXp\">Example on Codepen</a></p>\n<h4>Handle events in function components</h4>\n<p>Before hooks, you either used class components, or you passed an event handler using props.</p>\n<p>Now we can use the <code class=\"language-text\">useCallback()</code> built-in API:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  const handleClick = useCallback(() => {\n    //...do something\n  })\n  return &lt;button onClick={handleClick} />\n}</code></pre></div>\n<p>Any parameter used inside the function must be passed through a second parameter to <code class=\"language-text\">useCallback()</code>, in an array:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  let name = '' //... add logic\n  const handleClick = useCallback(\n    () => {\n      //...do something\n    },\n    [name]\n  )\n  return &lt;button onClick={handleClick} />\n}</code></pre></div>\n<h4>Enable cross-component communication using custom hooks</h4>\n<p>The ability to write your own hooks is the feature that is going to significantly alter how you write React apps in the future.</p>\n<p>Using custom hooks you have one more way to share state and logic between components, adding a significant improvement to the patterns of render props and higher order components. Which are still great, but now with custom hooks have less relevance in many use cases.</p>\n<p>How do you create a custom hook?</p>\n<p>A hook is just a function that conventionally starts with <code class=\"language-text\">use</code>. It can accept an arbitrary number of arguments, and return anything it wants.</p>\n<p>Examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const useGetData() {\n  //...\n  return data\n}</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const useGetUser(username) {\n  //...const user = fetch(...)\n  //...const userData = ...\n  return [user, userData]\n}</code></pre></div>\n<p>In your own components, you can use the hook like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const MyComponent = () => {\n  const data = useGetData()\n  const [user, userData] = useGetUser('flavio')\n  //...\n}</code></pre></div>\n<p>When exactly to add hooks instead of regular functions should be determined on a use case basis, and only experience will tell.</p>\n<h3>Code splitting</h3>\n<p>Modern JavaScript applications can be quite huge in terms of bundle size. You don't want your users to have to download a 1MB package of JavaScript (your code and the libraries you use) just to load the first page, right? But this is what happens by default when you ship a modern Web App built with Webpack bundling.</p>\n<p>That bundle will contain code that might never run because the user only stops on the login page and never sees the rest of your app.</p>\n<p>Code splitting is the practice of only loading the JavaScript you need the moment when you need it.</p>\n<p>This improves:</p>\n<ul>\n<li>the performance of your app</li>\n<li>the impact on memory, and so battery usage on mobile devices</li>\n<li>the downloaded KiloBytes (or MegaBytes) size</li>\n</ul>\n<p>React 16.6.0, released in October 2018, introduced a way of performing code splitting that should take the place of every previously used tool or library: <strong>React.lazy</strong> and <strong>Suspense</strong>.</p>\n<p><code class=\"language-text\">React.lazy</code> and <code class=\"language-text\">Suspense</code> form the perfect way to lazily load a dependency and only load it when needed.</p>\n<p>Let's start with <code class=\"language-text\">React.lazy</code>. You use it to import any component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nconst TodoList = React.lazy(() => import('./TodoList'))\n\nexport default () => {\n  return (\n    &lt;div>\n      &lt;TodoList />\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>the TodoList component will be dynamically added to the output as soon as it's available. Webpack will create a separate bundle for it, and will take care of loading it when necessary.</p>\n<p><code class=\"language-text\">Suspense</code> is a component that you can use to wrap any lazily loaded component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nconst TodoList = React.lazy(() => import('./TodoList'))\n\nexport default () => {\n  return (\n    &lt;div>\n      &lt;React.Suspense>\n        &lt;TodoList />\n      &lt;/React.Suspense>\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>It takes care of handling the output while the lazy loaded component is fetched and rendered.</p>\n<p>Use its <code class=\"language-text\">fallback</code> prop to output some JSX or a component output:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">...\n      &lt;React.Suspense fallback={&lt;p>Please wait&lt;/p>}>\n        &lt;TodoList />\n      &lt;/React.Suspense>\n...</code></pre></div>\n<p>All this plays well with React Router:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\n\nconst TodoList = React.lazy(() => import('./routes/TodoList'))\nconst NewTodo = React.lazy(() => import('./routes/NewTodo'))\n\nconst App = () => (\n  &lt;Router>\n    &lt;React.Suspense fallback={&lt;p>Please wait&lt;/p>}>\n      &lt;Switch>\n        &lt;Route exact path=\"/\" component={TodoList} />\n        &lt;Route path=\"/new\" component={NewTodo} />\n      &lt;/Switch>\n    &lt;/React.Suspense>\n  &lt;/Router>\n)</code></pre></div>\n<h3>SECTION 4: PRACTICAL EXAMPLES</h3>\n<p>2 very simple applications to explain some of the concepts introduced so far.</p>\n<h3>A very simple example of building a counter in React</h3>\n<p>In this short example we'll build a very simple example of a counter in React, applying many of the concepts and theory outlined before.</p>\n<p>Let's use Codepen for this. We start by forking the <a href=\"https://codepen.io/flaviocopes/pen/VqeaxB\">React template pen</a>.</p>\n<blockquote>\n<p><em>In Codepen we don't need to import React and ReactDOM as they are already added in the scope.</em></p>\n</blockquote>\n<p>We show the count in a div, and we add a few buttons to increment this count:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = ({ increment }) => {\n  return &lt;button>+{increment}&lt;/button>\n}\n\nconst App = () => {\n  let count = 0\n  \n  return (\n    &lt;div>\n      &lt;Button increment={1} />\n      &lt;Button increment={10} />\n      &lt;Button increment={100} />\n      &lt;Button increment={1000} />\n      &lt;span>{count}&lt;/span>\n    &lt;/div>\n  )\n}\n\nReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<p>Let's add the functionality that lets us change the count by clicking the buttons, by adding a <code class=\"language-text\">onClickFunction</code> prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = ({ increment, onClickFunction }) => {\n  const handleClick = () => {\n    onClickFunction(increment)\n  }\n  return &lt;button onClick={handleClick}>+{increment}&lt;/button>\n}\n\nconst App = () => {\n  let count = 0\n  \n  const incrementCount = increment => {\n    //TODO\n  }\n  \n  return (\n    &lt;div>\n      &lt;Button increment={1} onClickFunction={incrementCount} />\n      &lt;Button increment={10} onClickFunction={incrementCount} />\n      &lt;Button increment={100} onClickFunction={incrementCount} />\n      &lt;Button increment={1000} onClickFunction={incrementCount} />\n      &lt;span>{count}&lt;/span>\n    &lt;/div>\n  )\n}\n\nReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<p>Here, every Button element has 2 props: <code class=\"language-text\">increment</code> and <code class=\"language-text\">onClickFunction</code>. We create 4 different buttons, with 4 increment values: 1, 10, 100, 1000.</p>\n<p>When the button in the Button component is clicked, the <code class=\"language-text\">incrementCount</code> function is called.</p>\n<p>This function must increment the local count. How can we do so? We can use hooks:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { useState } = React\n\nconst Button = ({ increment, onClickFunction }) => {\n  const handleClick = () => {\n    onClickFunction(increment)\n  }\n  return &lt;button onClick={handleClick}>+{increment}&lt;/button>\n}\n\nconst App = () => {\n  const [count, setCount] = useState(0)\n  \n  const incrementCount = increment => {\n    setCount(count + increment)\n  }\n  \n  return (\n    &lt;div>\n      &lt;Button increment={1} onClickFunction={incrementCount} />\n      &lt;Button increment={10} onClickFunction={incrementCount} />\n      &lt;Button increment={100} onClickFunction={incrementCount} />\n      &lt;Button increment={1000} onClickFunction={incrementCount} />\n      &lt;span>{count}&lt;/span>\n    &lt;/div>\n  )\n}\n\nReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<p><code class=\"language-text\">useState()</code> initializes the count variable at 0 and provides us the <code class=\"language-text\">setCount()</code> method to update its value.</p>\n<p>We use both in the <code class=\"language-text\">incrementCount()</code> method implementation, which calls <code class=\"language-text\">setCount()</code> updating the value to the existing value of <code class=\"language-text\">count</code>, plus the increment passed by each Button component.</p>\n<p>The complete example code can be seen at <a href=\"https://codepen.io/flaviocopes/pen/QzEQPR\">https://codepen.io/flaviocopes/pen/QzEQPR</a></p>\n<h3>Fetch and display GitHub users information via API</h3>\n<p>Very simple example of a form that accepts a GitHub username and once it receives a <code class=\"language-text\">submit</code> event, it asks the GitHub API for the user information, and prints them.</p>\n<p>This code creates a reusable <strong>Card</strong> component. When you enter a name in the <code class=\"language-text\">input</code> field managed by the <strong>Form</strong> component, this name is <em>bound to its state</em>.</p>\n<p>When <em>Add card</em> is pressed, the input form is cleared by clearing the <code class=\"language-text\">userName</code> state of the <strong>Form</strong> component.</p>\n<p>The example uses, in addition to React, the <a href=\"https://flaviocopes.com/axios/\">Axios</a> library. It's a nice useful and lightweight library to handle network requests. Add it to the Pen settings in Codepen, or install it locally using <code class=\"language-text\">npm install axios</code>.</p>\n<p>We start by creating the <code class=\"language-text\">Card</code> component, the one that will display our image and details as gathered from GitHub. It gets its data via props, using</p>\n<ul>\n<li><code class=\"language-text\">props.avatar_url</code> the user avatar</li>\n<li><code class=\"language-text\">props.name</code> the user name</li>\n<li><code class=\"language-text\">props.blog</code> the user website URL</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Card = props => {\n  return (\n    &lt;div style={{ margin: '1em' }}>\n      &lt;img alt=\"avatar\" style={{ width: '70px' }} src={props.avatar_url} />\n      &lt;div>\n        &lt;div style={{ fontWeight: 'bold' }}>{props.name}&lt;/div>\n        &lt;div>{props.blog}&lt;/div>\n      &lt;/div>\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>We create a list of those components, which will be passed by a parent component in the <code class=\"language-text\">cards</code> prop to <code class=\"language-text\">CardList</code>, which simply iterates on it using <code class=\"language-text\">map()</code> and outputs a list of cards:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const CardList = props => (\n  &lt;div>\n    {props.cards.map(card => (\n      &lt;Card {...card} />\n    ))}\n  &lt;/div>\n)</code></pre></div>\n<p>The parent component is App, which stores the <code class=\"language-text\">cards</code> array in its own state, managed using the <code class=\"language-text\">useState()</code> Hook:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const App = () => {\n  const [cards, setCards] = useState([])\n  \n  return (\n    &lt;div>\n      &lt;CardList cards={cards} />\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>Cool! We must have a way now to ask GitHub for the details of a single username. We'll do so using a <code class=\"language-text\">Form</code> component, where we manage our own state (<code class=\"language-text\">username</code>), and we ask GitHub for information about a user using their public APIs, via Axios:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Form = props => {\n  const [username, setUsername] = useState('')\n  \n  handleSubmit = event => {\n    event.preventDefault()\n    \n    axios.get(`https://api.github.com/users/${username}`).then(resp => {\n      props.onSubmit(resp.data)\n      setUsername('')\n    })\n  }\n  \n  return (\n    &lt;form onSubmit={handleSubmit}>\n      &lt;input\n        type=\"text\"\n        value={username}\n        onChange={event => setUsername(event.target.value)}\n        placeholder=\"GitHub username\"\n        required\n      />\n      &lt;button type=\"submit\">Add card&lt;/button>\n    &lt;/form>\n  )\n}</code></pre></div>\n<p>When the form is submitted we call the <code class=\"language-text\">handleSubmit</code> event, and after the network call we call <code class=\"language-text\">props.onSubmit</code> passing the parent (<code class=\"language-text\">App</code>) the data we got from GitHub.</p>\n<p>We add it to <code class=\"language-text\">App</code>, passing a method to add a new card to the list of cards, <code class=\"language-text\">addNewCard</code>, as its <code class=\"language-text\">onSubmit</code> prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const App = () => {\n  const [cards, setCards] = useState([])\n  \n  addNewCard = cardInfo => {\n    setCards(cards.concat(cardInfo))\n  }\n  \n  return (\n    &lt;div>\n      &lt;Form onSubmit={addNewCard} />\n      &lt;CardList cards={cards} />\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>Finally we render the app:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<p>Here is the full source code of our little React app:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { useState } = React\n\nconst Card = props => {\n  return (\n    &lt;div style={{ margin: '1em' }}>\n      &lt;img alt=\"avatar\" style={{ width: '70px' }} src={props.avatar_url} />\n      &lt;div>\n        &lt;div style={{ fontWeight: 'bold' }}>{props.name}&lt;/div>\n        &lt;div>{props.blog}&lt;/div>\n      &lt;/div>\n    &lt;/div>\n  )\n}\n\nconst CardList = props => &lt;div>{props.cards.map(card => &lt;Card {...card} />)}&lt;/div>\n\nconst Form = props => {\n  const [username, setUsername] = useState('')\n  \n  handleSubmit = event => {\n    event.preventDefault()\n    \n    axios\n      .get(`https://api.github.com/users/${username}`)\n      .then(resp => {\n        props.onSubmit(resp.data)\n        setUsername('')\n      })\n  }\n  \n  return (\n    &lt;form onSubmit={handleSubmit}>\n      &lt;input\n        type=\"text\"\n        value={username}\n        onChange={event => setUsername(event.target.value)}\n        placeholder=\"GitHub username\"\n        required\n      />\n      &lt;button type=\"submit\">Add card&lt;/button>\n    &lt;/form>\n  )\n}\n\nconst App = () => {\n  const [cards, setCards] = useState([])\n  \n  addNewCard = cardInfo => {\n    setCards(cards.concat(cardInfo))\n  }\n  \n  return (\n    &lt;div>\n      &lt;Form onSubmit={addNewCard} />\n      &lt;CardList cards={cards} />\n    &lt;/div>\n  )\n}\n\nReactDOM.render(&lt;App />, document.getElementById('app'))</code></pre></div>\n<p>This is the final result:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/cZoqPqmbwvuUaIiWJ16fTj6VOhTIquXDECnP\" alt=\"cZoqPqmbwvuUaIiWJ16fTj6VOhTIquXDECnP\"></p>\n<p>Check it out on Codepen at <a href=\"https://codepen.io/flaviocopes/pen/oJLyeY\">https://codepen.io/flaviocopes/pen/oJLyeY</a></p>\n<h3>SECTION 5: STYLING</h3>\n<h3>CSS in React</h3>\n<p>Using React you have various ways to add styling to your components.</p>\n<h4>Using classes and CSS</h4>\n<p>The first and most simple is to use classes, and use a normal CSS file to target those classes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  return &lt;button className=\"button\">A button&lt;/button>\n}\n\n.button {\n  background-color: yellow;\n}</code></pre></div>\n<p>You can import the stylesheet using an import statement, like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import './style.css'</code></pre></div>\n<p>and <a href=\"https://flaviocopes.com/webpack/\">Webpack</a> will take care of adding the CSS property to the bundle.</p>\n<h4>Using the style attribute</h4>\n<p>A second method is to use the <code class=\"language-text\">style</code> attribute attached to a JSX element. Using this approach you don't need a separate CSS file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  return &lt;button style={{ backgroundColor: 'yellow' }}>A button&lt;/button>\n}</code></pre></div>\n<p>CSS is defined in a slightly different way now. First, notice the double curly brackets: it's because <code class=\"language-text\">style</code> accepts an object. We pass in a JavaScript object, which is defined in curly braces. We could also do this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const buttonStyle = { backgroundColor: 'yellow' }\nconst Button = () => {\n  return &lt;button style={buttonStyle}>A button&lt;/button>\n}</code></pre></div>\n<p>When using <code class=\"language-text\">create-react-app</code>, those styles are autoprefixed by default thanks to its use of <a href=\"https://github.com/postcss/autoprefixer\">Autoprefixer</a>.</p>\n<p>Also, the style now is camelCased instead of using dashes. Every time a CSS property has a dash, remove it and start the next word capitalized.</p>\n<p>Styles have the benefit of being local to the component, and they cannot leak to other components in other parts of the app, something that using classes and an external CSS file can't provide.</p>\n<h4>Using CSS Modules</h4>\n<p><strong>CSS Modules</strong> seem to be a perfect spot in the middle: you use classes, but CSS is scoped to the component, which means that any styling you add cannot be applied to other components without your permission. And yet your styles are defined in a separate CSS file, which is easier to maintain than CSS in JavaScript (and you can use your good old CSS property names).</p>\n<p>Start by creating a CSS file that ends with <code class=\"language-text\">.module.css</code>, for example <code class=\"language-text\">Button.module.css</code>. A great choice is to give it the same name as the component you are going to style</p>\n<p>Add your CSS here, then import it inside the component file you want to style:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import style from './Button.module.css'</code></pre></div>\n<p>now you can use it in your JSX:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = () => {\n  return &lt;button className={style.content}>A button&lt;/button>\n}</code></pre></div>\n<p>That's it! In the resulting markup, React will generate a specific, unique class for each rendered component, and assign the CSS to that class, so that the CSS is not affecting other markup.</p>\n<h3>SASS in React</h3>\n<p>When you build a React application using <code class=\"language-text\">[create-react-app](https://flaviocopes.com/react-create-react-app/)</code>, you have many options at your disposal when it comes to styling.</p>\n<blockquote>\n<p><em>Of course, if not using <code class=\"language-text\">create-react-app</code>, you have all the choices in the world, but we limit the discussion to the <code class=\"language-text\">create-react-app</code>-provided options.</em></p>\n</blockquote>\n<p>You can style using plain classes and CSS files, using the style attribute or CSS Modules, to start with.</p>\n<p>SASS/SCSS is a very popular option, a much loved one by many developers.</p>\n<p>You can use it without any configuration at all, starting with <code class=\"language-text\">create-react-app</code> 2.</p>\n<p>All you need is a <code class=\"language-text\">.sass</code> or <code class=\"language-text\">.scss</code> file, and you just import it in a component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import './styles.scss'</code></pre></div>\n<p>You can see an example of it working at <a href=\"https://codesandbox.io/s/18qq31rp3\">https://codesandbox.io/s/18qq31rp3</a>.</p>\n<h3>Styled Components</h3>\n<p>Styled Components are one of the new ways to use CSS in modern JavaScript. It is the meant to be a successor of CSS Modules, a way to write CSS that's scoped to a single component, and not leak to any other element in the page</p>\n<h4>A brief history</h4>\n<p>Once upon a time, the Web was really simple and CSS didn't even exist. We laid out pages using <strong>tables</strong> and frames. Good times.</p>\n<p>Then <strong>CSS</strong> came to life, and after some time it became clear that frameworks could greatly help especially in building grids and layouts, Bootstrap and Foundation playing a big part in this.</p>\n<p>Preprocessors like <strong>SASS</strong> and others helped a lot to slow down the adoption of frameworks, and to better organize the code, conventions like <strong>BEM</strong> and <strong>SMACSS</strong> grew in use, especially within teams.</p>\n<p>Conventions are not a solution to everything, and they are complex to remember, so in the last few years with the increasing adoption of <a href=\"https://flaviocopes.com/javascript/\">JavaScript</a> and build processes in every frontend project, CSS found its way into JavaScript (<strong>CSS-in-JS</strong>).</p>\n<p>New tools explored new ways of doing CSS-in-JS and a few succeeded with increasing popularity:</p>\n<ul>\n<li>React Style</li>\n<li>jsxstyle</li>\n<li>Radium</li>\n</ul>\n<p>and more.</p>\n<h4>Introducing Styled Components</h4>\n<p>One of the most popular of these tools is <strong>Styled Components</strong>.</p>\n<p>It is the meant to be a successor to <strong>CSS Modules</strong>, a way to write CSS that's scoped to a single component, and not leak to any other element in the page.</p>\n<p>(more on CSS modules <a href=\"https://css-tricks.com/css-modules-part-1-need/\">here</a> and <a href=\"https://glenmaddern.com/articles/css-modules\">here</a>)</p>\n<p>Styled Components allow you to write plain CSS in your components without worrying about class name collisions.</p>\n<h4>Installation</h4>\n<p>Simply install styled-components using <a href=\"https://flaviocopes.com/npm/\">npm</a> or <a href=\"https://flaviocopes.com/yarn/\">yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install styled-components\nyarn add styled-components</code></pre></div>\n<p>That's it! Now all you have to do is to add this import:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import styled from 'styled-components'</code></pre></div>\n<h4>Your first styled component</h4>\n<p>With the <code class=\"language-text\">styled</code> object imported, you can now start creating Styled Components. Here's the first one:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = styled.button`\n  font-size: 1.5em;\n  background-color: black;\n  color: white;\n`</code></pre></div>\n<p><code class=\"language-text\">Button</code> is now a React Component in all its greatness.</p>\n<p>We created it using a function of the styled object, called <code class=\"language-text\">button</code> in this case, and passing some CSS properties in a <a href=\"https://flaviocopes.com/ecmascript/#template-literals\">template literal</a>.</p>\n<p>Now this component can be rendered in our container using the normal React syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">render(&lt;Button />)</code></pre></div>\n<p>Styled Components offer other functions you can use to create other components, not just <code class=\"language-text\">button</code>, like <code class=\"language-text\">section</code>, <code class=\"language-text\">h1</code>, <code class=\"language-text\">input</code> and many others.</p>\n<p>The syntax used, with the backtick, might be weird at first, but it's called <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\">Tagged Templates</a>, it's plain JavaScript and it's a way to pass an argument to the function.</p>\n<h4>Using props to customize components</h4>\n<p>When you pass some props to a Styled Component, it will pass them down to the <a href=\"https://flaviocopes.com/dom/\">DOM</a> node mounted.</p>\n<p>For example here's how we pass the <code class=\"language-text\">placeholder</code> and <code class=\"language-text\">type</code> props to an <code class=\"language-text\">input</code> component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Input = styled.input`\n  //...\n`\n\nrender(\n  &lt;div>\n    &lt;Input placeholder=\"...\" type=\"text\" />\n  &lt;/div>\n)</code></pre></div>\n<p>This will do just what you think, inserting those props as HTML attributes.</p>\n<p>Props instead of just being blindly passed down to the <a href=\"https://flaviocopes.com/dom/\">DOM</a> can also be used to customize a component based on the prop value. Here's an example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = styled.button`\n  background: ${props => (props.primary ? 'black' : 'white')};\n  color: ${props => (props.primary ? 'white' : 'black')};\n`\n\nrender(\n  &lt;div>\n    &lt;Button>A normal button&lt;/Button>\n    &lt;Button>A normal button&lt;/Button>\n    &lt;Button primary>The primary button&lt;/Button>\n  &lt;/div>\n)</code></pre></div>\n<p>Setting the <code class=\"language-text\">primary</code> prop changes the color of the button.</p>\n<h4>Extending an existing Styled Component</h4>\n<p>If you have one component and you want to create a similar one, just styled slightly differently, you can use <code class=\"language-text\">extend</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Button = styled.button`\n  color: black;\n  //...\n`\n\nconst WhiteButton = Button.extend`\n  color: white;\n`\n\nrender(\n  &lt;div>\n    &lt;Button>A black button, like all buttons&lt;/Button>\n    &lt;WhiteButton>A white button&lt;/WhiteButton>\n  &lt;/div>\n)</code></pre></div>\n<h4>It's Regular CSS</h4>\n<p>In Styled Components, you can use the CSS you already know and love. It's just plain CSS. It is not pseudo CSS nor inline CSS with its limitations.</p>\n<p>You can use media queries, <a href=\"https://tabatkins.github.io/specs/css-nesting/\">nesting</a> and anything else you might need.</p>\n<h4>Using Vendor Prefixes</h4>\n<p>Styled Components automatically add all the vendor prefixes needed, so you don't need to worry about this problem.</p>\n<h3>SECTION 6: TOOLING</h3>\n<h3>Babel</h3>\n<p>Babel is an awesome tool, and it's been around for quite some time, but nowadays almost every JavaScript developer relies on it. This will continue, because Babel is now indispensable and has solved a big problem for everyone.</p>\n<p>Which problem?</p>\n<p>The problem that every Web Developer has surely had: a feature of JavaScript is available in the latest release of a browser, but not in the older versions. Or maybe Chrome or Firefox implement it, but Safari iOS and Edge do not.</p>\n<p>For example, ES6 introduced the <strong>arrow function</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[1, 2, 3].map((n) => n + 1)</code></pre></div>\n<p>Which is now supported by all modern browsers. IE11 does not support it, nor Opera Mini (How do I know? By checking the <a href=\"http://kangax.github.io/compat-table/es6/#test-arrow_functions\">ES6 Compatibility Table</a>).</p>\n<p>So how should you deal with this problem? Should you move on and leave those customers with older/incompatible browsers behind, or should you write older JavaScript code to make all your users happy?</p>\n<p>Enter Babel. Babel is a <strong>compiler</strong>: it takes code written in one standard, and it transpiles it to code written into another standard.</p>\n<p>You can configure Babel to transpile modern ES2017 JavaScript into JavaScript ES5 syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[1, 2, 3].map(function(n) {\n  return n + 1\n})</code></pre></div>\n<p>This must happen at build time, so you must setup a workflow that handles this for you. <a href=\"https://flaviocopes.com/webpack/\">Webpack</a> is a common solution.</p>\n<p>(P.S. if all this <em>ES</em> thing sounds confusing to you, see more about ES versions <a href=\"https://flaviocopes.com/ecmascript/\">in the ECMAScript guide</a>)</p>\n<h4>Installing Babel</h4>\n<p>Babel is easily installed using <a href=\"https://flaviocopes.com/npm/\">npm</a>, locally in a project:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save-dev @babel/core @babel/cli</code></pre></div>\n<p>Since npm now comes with <code class=\"language-text\">[npx](https://flaviocopes.com/node/npx/)</code>, locally installed CLI packages can run by typing the command in the project folder:</p>\n<p>So we can run Babel by just running</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx babel script.js</code></pre></div>\n<h4>An example Babel configuration</h4>\n<p>Babel out of the box does not do anything useful, you need to configure it and add plugins.</p>\n<blockquote>\n<p><a href=\"https://babeljs.io/docs/en/plugins\"><em>Here is a list of Babel plugins</em></a></p>\n</blockquote>\n<p>To solve the problem we talked about in the introduction (using arrow functions in every browser), we can run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save-dev \\\n    @babel/plugin-transform-es2015-arrow-functions</code></pre></div>\n<p>to download the package in the <code class=\"language-text\">node_modules</code> folder of our app, then we need to add</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"plugins\": [\"transform-es2015-arrow-functions\"]\n}</code></pre></div>\n<p>to the <code class=\"language-text\">.babelrc</code> file present in the application root folder. If you don't have that file already, you just create a blank file, and put that content into it.</p>\n<blockquote>\n<p><em>TIP: If you have never seen a dot file (a file starting with a dot) it might be odd at first because that file might not appear in your file manager, as it's a hidden file.</em></p>\n</blockquote>\n<p>Now if we have a <code class=\"language-text\">script.js</code> file with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = () => {};\nvar a = (b) => b;\n\nconst double = [1,2,3].map((num) => num * 2);\nconsole.log(double); // [2,4,6]\n\nvar bob = {\n  _name: \"Bob\",\n  _friends: [\"Sally\", \"Tom\"],\n  printFriends() {\n    this._friends.forEach(f =>\n      console.log(this._name + \" knows \" + f));\n  }\n};\nconsole.log(bob.printFriends());</code></pre></div>\n<p>running <code class=\"language-text\">babel script.js</code> will output the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var a = function () {};var a = function (b) {\n  return b;\n};\n\nconst double = [1, 2, 3].map(function (num) {\n  return num * 2;\n});\nconsole.log(double); // [2,4,6]\n\nvar bob = {\n  _name: \"Bob\",\n  _friends: [\"Sally\", \"Tom\"],\n  printFriends() {\n    var _this = this;\n    \n    this._friends.forEach(function (f) {\n      return console.log(_this._name + \" knows \" + f);\n    });\n  }\n};\nconsole.log(bob.printFriends());</code></pre></div>\n<p>As you can see arrow functions have all been converted to JavaScript ES5 functions.</p>\n<h4>Babel presets</h4>\n<p>We just saw in the previous article how Babel can be configured to transpile specific JavaScript features.</p>\n<p>You can add much more plugins, but you can't add to the configuration features one by one, it's not practical.</p>\n<p>This is why Babel offers <strong>presets</strong>.</p>\n<p>The most popular presets are <code class=\"language-text\">env</code> and <code class=\"language-text\">react</code>.</p>\n<blockquote>\n<p><em>Tip: Babel 7 deprecated (and removed) yearly presets like <code class=\"language-text\">preset-es2017</code>, and stage presets. Use <code class=\"language-text\">@babel/preset-env</code> instead.</em></p>\n</blockquote>\n<h4><code class=\"language-text\">env</code> preset</h4>\n<p>The <code class=\"language-text\">env</code> preset is very nice: you tell it which environments you want to support, and it does everything for you, <strong>supporting all modern JavaScript features</strong>.</p>\n<p>E.g. \"support the last 2 versions of every browser, but for Safari let's support all versions since Safari 7\"</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"presets\": [\n    [\"env\", {\n      \"targets\": {\n        \"browsers\": [\"last 2 versions\", \"safari >= 7\"]\n      }\n    }]\n  ]\n}</code></pre></div>\n<p>or \"I don't need browser support, just let me work with <a href=\"https://flaviocopes.com/node/\">Node.js</a> 6.10\"</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"presets\": [\n    [\"env\", {\n      \"targets\": {\n        \"node\": \"6.10\"\n      }\n    }]\n  ]\n}</code></pre></div>\n<h4><code class=\"language-text\">react</code> preset</h4>\n<p>The <code class=\"language-text\">react</code> preset is very convenient when writing React apps: adding <code class=\"language-text\">preset-flow</code>, <code class=\"language-text\">syntax-jsx</code>, <code class=\"language-text\">transform-react-jsx</code>, <code class=\"language-text\">transform-react-display-name</code>.</p>\n<p>By including it, you are all ready to go developing React apps, with JSX transforms and Flow support.</p>\n<h4>More info on presets</h4>\n<p><a href=\"https://babeljs.io/docs/plugins/\">https://babeljs.io/docs/plugins/</a></p>\n<h4>Using Babel with webpack</h4>\n<p>If you want to run modern JavaScript in the browser, Babel on its own is not enough, you also need to bundle the code. Webpack is the perfect tool for this.</p>\n<p>Modern JS needs two different stages: a compile stage, and a runtime stage. This is because some ES6+ features need a polyfill or a runtime helper.</p>\n<p>To install the Babel polyfill runtime functionality, run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install @babel/polyfill \\\n            @babel/runtime \\\n            @babel/plugin-transform-runtime</code></pre></div>\n<p>Now in your <code class=\"language-text\">webpack.config.js</code> file add:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">entry: [\n  'babel-polyfill',\n  // your app scripts should be here\n],\n\nmodule: {\n  loaders: [\n    // Babel loader compiles ES2015 into ES5 for\n    // complete cross-browser support\n    {\n      loader: 'babel-loader',\n      test: /\\.js$/,\n      // only include files present in the `src` subdirectory\n      include: [path.resolve(__dirname, \"src\")],\n      // exclude node_modules, equivalent to the above line\n      exclude: /node_modules/,\n      query: {\n        // Use the default ES2015 preset\n        // to include all ES2015 features\n        presets: ['es2015'],\n        plugins: ['transform-runtime']\n      }\n    }\n  ]\n}</code></pre></div>\n<p>By keeping the presets and plugins information inside the <code class=\"language-text\">webpack.config.js</code> file, we can avoid having a <code class=\"language-text\">.babelrc</code> file.</p>\n<h3>Webpack</h3>\n<p>Webpack is a tool that lets you compile JavaScript modules, also known as <strong>module bundler</strong>. Given a large number of files, it generates a single file (or a few files) that run your app.</p>\n<p>It can perform many operations:</p>\n<ul>\n<li>helps you bundle your resources.</li>\n<li>watches for changes and re-runs the tasks.</li>\n<li>can run Babel transpilation to ES5, allowing you to use the latest JavaScript features without worrying about browser support.</li>\n<li>can transpile CoffeeScript to JavaScript</li>\n<li>can convert inline images to data URIs.</li>\n<li>allows you to use require() for CSS files.</li>\n<li>can run a development webserver.</li>\n<li>can handle hot module replacement.</li>\n<li>can split the output files into multiple files, to avoid having a huge js file to load in the first page hit.</li>\n<li>can perform <a href=\"https://flaviocopes.com/javascript-glossary/#tree-shaking\">tree shaking</a>.</li>\n</ul>\n<p>Webpack is not limited to be use on the frontend, it's also useful in backend Node.js development as well.</p>\n<p>Predecessors of webpack, and still widely used tools, include:</p>\n<ul>\n<li>Grunt</li>\n<li>Broccoli</li>\n<li>Gulp</li>\n</ul>\n<p>There are lots of similarities in what those and Webpack can do, but the main difference is that those are known as <strong>task runners</strong>, while webpack was born as a module bundler.</p>\n<p>It's a more focused tool: you specify an entry point to your app (it could even be an HTML file with script tags) and webpack analyzes the files and bundles all you need to run the app in a single JavaScript output file (or in more files if you use code splitting).</p>\n<h4>Installing webpack</h4>\n<p>Webpack can be installed globally or locally for each project.</p>\n<h4>Global install</h4>\n<p>Here's how to install it globally with <a href=\"https://flaviocopes.com/yarn/\">Yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn global add webpack webpack-cli</code></pre></div>\n<p>with <a href=\"https://flaviocopes.com/npm/\">npm</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -g webpack webpack-cli</code></pre></div>\n<p>once this is done, you should be able to run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">webpack-cli</code></pre></div>\n<h4>Local install</h4>\n<p>Webpack can be installed locally as well. It's the recommended setup, because webpack can be updated per-project, and you have less resistance to using the latest features just for a small project rather than updating all the projects you have that use webpack.</p>\n<p>With <a href=\"https://flaviocopes.com/yarn/\">Yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add webpack webpack-cli -D</code></pre></div>\n<p>with <a href=\"https://flaviocopes.com/npm/\">npm</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i webpack webpack-cli --save-dev</code></pre></div>\n<p>Once this is done, add this to your <code class=\"language-text\">package.json</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  //...\n  \"scripts\": {\n    \"build\": \"webpack\"\n  }\n}</code></pre></div>\n<p>once this is done, you can run webpack by typing</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn build</code></pre></div>\n<p>in the project root.</p>\n<h4>Webpack configuration</h4>\n<p>By default, webpack (starting from version 4) does not require any config if you respect these conventions:</p>\n<ul>\n<li>the <strong>entry point</strong> of your app is <code class=\"language-text\">./src/index.js</code></li>\n<li>the output is put in <code class=\"language-text\">./dist/main.js</code>.</li>\n<li>Webpack works in production mode</li>\n</ul>\n<p>You can customize every little bit of webpack of course, when you need. The webpack configuration is stored in the <code class=\"language-text\">webpack.config.js</code> file, in the project root folder.</p>\n<h4>The entry point</h4>\n<p>By default the entry point is <code class=\"language-text\">./src/index.js</code> This simple example uses the <code class=\"language-text\">./index.js</code> file as a starting point:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  entry: './index.js'\n  /*...*/\n}</code></pre></div>\n<h4>The output</h4>\n<p>By default the output is generated in <code class=\"language-text\">./dist/main.js</code>. This example puts the output bundle into <code class=\"language-text\">app.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'app.js'\n  }\n  /*...*/\n}</code></pre></div>\n<h4>Loaders</h4>\n<p>Using webpack allows you to use <code class=\"language-text\">import</code> or <code class=\"language-text\">require</code> statements in your JavaScript code to not just include other JavaScript, but any kind of file, for example CSS.</p>\n<p>Webpack aims to handle all our dependencies, not just JavaScript, and loaders are one way to do that.</p>\n<p>For example, in your code you can use:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import 'style.css'</code></pre></div>\n<p>by using this loader configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      { test: /\\.css$/, use: 'css-loader' },\n    }]\n  }\n  /*...*/\n}</code></pre></div>\n<p>The <a href=\"https://flaviocopes.com/javascript-regular-expressions/\">regular expression</a> targets any CSS file.</p>\n<p>A loader can have options:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [\n          {\n            loader: 'css-loader',\n            options: {\n              modules: true\n            }\n          }\n        ]\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<p>You can require multiple loaders for each rule:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use:\n          [\n            'style-loader',\n            'css-loader',\n          ]\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<p>In this example, <code class=\"language-text\">css-loader</code> interprets the <code class=\"language-text\">import 'style.css'</code> directive in the CSS. <code class=\"language-text\">style-loader</code> is then responsible for injecting that CSS in the DOM, using a <code class=\"language-text\">&lt;style></code> tag.</p>\n<p>The order matters, and it's reversed (the last is executed first).</p>\n<p>What kind of loaders are there? Many! <a href=\"https://webpack.js.org/loaders/\">You can find the full list here</a>.</p>\n<p>A commonly used loader is Babel, which is used to transpile modern JavaScript to ES5 code:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules|bower_components)/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env']\n          }\n        }\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<p>This example makes Babel preprocess all our React/JSX files:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.(js|jsx)$/,\n        exclude: /node_modules/,\n        use: 'babel-loader'\n      }\n    ]\n  },\n  resolve: {\n    extensions: [\n      '.js',\n      '.jsx'\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<p><a href=\"https://webpack.js.org/loaders/babel-loader/\">See the <code class=\"language-text\">babel-loader</code> options here</a>.</p>\n<h4>Plugins</h4>\n<p>Plugins are like loaders, but on steroids. They can do things that loaders can't do, and they are the main building block of webpack.</p>\n<p>Take this example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  plugins: [\n    new HTMLWebpackPlugin()\n  ]\n  /*...*/\n}</code></pre></div>\n<p>The <code class=\"language-text\">HTMLWebpackPlugin</code> plugin has the job of automatically creating an HTML file, adding the output JS bundle path, so the JavaScript is ready to be served.</p>\n<p>There are <a href=\"https://webpack.js.org/plugins/\">lots of plugins available</a>.</p>\n<p>One useful plugin, <code class=\"language-text\">CleanWebpackPlugin</code>, can be used to clear the <code class=\"language-text\">dist/</code> folder before creating any output, so you don't leave files around when you change the name of the output file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  plugins: [\n    new CleanWebpackPlugin(['dist']),\n  ]\n  /*...*/\n}</code></pre></div>\n<h4>The webpack mode</h4>\n<p>This mode (introduced in webpack 4) sets the environment on which webpack works. It can be set to <code class=\"language-text\">development</code> or <code class=\"language-text\">production</code> (defaults to production, so you only set it when moving to development)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  entry: './index.js',\n  mode: 'development',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'app.js'\n  }\n}</code></pre></div>\n<p>Development mode:</p>\n<ul>\n<li>builds very fast</li>\n<li>is less optimized than production</li>\n<li>does not remove comments</li>\n<li>provides more detailed error messages and suggestions</li>\n<li>provides a better debugging experience</li>\n</ul>\n<p>Production mode is slower to build, since it needs to generate a more optimized bundle. The resulting JavaScript file is smaller in size, as it removes many things that are not needed in production.</p>\n<p>I made a sample app that just prints a <code class=\"language-text\">console.log</code> statement.</p>\n<p>Here's the production bundle:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/kbXOiSFaO06VSDxcLC29Nh4a8ycSoaL9LDup\" alt=\"kbXOiSFaO06VSDxcLC29Nh4a8ycSoaL9LDup\"></p>\n<p>Here's the development bundle:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/W-1sAge4rvYL0aH00e7FuyJ5NLv7PJYpves0\" alt=\"W-1sAge4rvYL0aH00e7FuyJ5NLv7PJYpves0\"></p>\n<h4>Running webpack</h4>\n<p>Webpack can be run from the command line manually if installed globally, but generally you write a script inside the <code class=\"language-text\">package.json</code> file, which is then run using <code class=\"language-text\">npm</code> or <code class=\"language-text\">yarn</code>.</p>\n<p>For example this <code class=\"language-text\">package.json</code> scripts definition we used before:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"scripts\": {\n  \"build\": \"webpack\"\n}</code></pre></div>\n<p>allows us to run <code class=\"language-text\">webpack</code> by running</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run build</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn run build</code></pre></div>\n<p>or simply</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn build</code></pre></div>\n<h4>Watching changes</h4>\n<p>Webpack can automatically rebuild the bundle when a change in your app happens, and keep listening for the next change.</p>\n<p>Just add this script:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\"scripts\": {\n  \"watch\": \"webpack --watch\"\n}</code></pre></div>\n<p>and run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run watch</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn run watch</code></pre></div>\n<p>or simply</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn watch</code></pre></div>\n<p>One nice feature of the watch mode is that the bundle is only changed if the build has no errors. If there are errors, <code class=\"language-text\">watch</code> will keep listening for changes, and try to rebuild the bundle, but the current, working bundle is not affected by those problematic builds.</p>\n<h4>Handling images</h4>\n<p>Webpack allows us to use images in a very convenient way, using the <code class=\"language-text\">[file-loader](https://webpack.js.org/loaders/file-loader/)</code> loader.</p>\n<p>This simple configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.(png|svg|jpg|gif)$/,\n        use: [\n          'file-loader'\n        ]\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<p>Allows you to import images in your JavaScript:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Icon from './icon.png'\n\nconst img = new Image()\nimg.src = Icon\nelement.appendChild(img)</code></pre></div>\n<p>(<code class=\"language-text\">img</code> is an HTMLImageElement. Check the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image\">Image docs</a>)</p>\n<p><code class=\"language-text\">file-loader</code> can handle other asset types as well, like fonts, CSV files, xml, and more.</p>\n<p>Another nice tool to work with images is the <code class=\"language-text\">url-loader</code> loader.</p>\n<p>This example loads any PNG file smaller than 8KB as a <a href=\"https://flaviocopes.com/data-urls/\">data URL</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.png$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192\n            }\n          }\n        ]\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<h4>Process your SASS code and transform it to CSS</h4>\n<p>Using <code class=\"language-text\">sass-loader</code>, <code class=\"language-text\">css-loader</code> and <code class=\"language-text\">style-loader</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  module: {\n    rules: [\n      {\n        test: /\\.scss$/,\n        use: [\n          'style-loader',\n          'css-loader',\n          'sass-loader'\n        ]\n      }\n    ]\n  }\n  /*...*/\n}</code></pre></div>\n<h4>Generate Source Maps</h4>\n<p>Since webpack bundles the code, Source Maps are mandatory to get a reference to the original file that raised an error, for example.</p>\n<p>You tell webpack to generate source maps using the <code class=\"language-text\">devtool</code> property of the configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  /*...*/\n  devtool: 'inline-source-map',\n  /*...*/\n}</code></pre></div>\n<p><code class=\"language-text\">devtool</code> has <a href=\"https://webpack.js.org/configuration/devtool/\">many possible values</a>, the most used probably are:</p>\n<ul>\n<li><code class=\"language-text\">none</code>: adds no source maps</li>\n<li><code class=\"language-text\">source-map</code>: ideal for production, provides a separate source map that can be minimized, and adds a reference into the bundle, so development tools know that the source map is available. Of course you should configure the server to avoid shipping this, and just use it for debugging purposes</li>\n<li><code class=\"language-text\">inline-source-map</code>: ideal for development, inlines the source map as a Data URL</li>\n</ul>\n<h3>SECTION 7: TESTING</h3>\n<h3>Jest</h3>\n<p>Jest is a library for testing JavaScript code.</p>\n<p>It's an open source project maintained by Facebook, and it's especially well suited for React code testing, although not limited to that: it can test any JavaScript code. Its strengths are:</p>\n<ul>\n<li>it's fast</li>\n<li>it can perform <strong>snapshot testing</strong></li>\n<li>it's opinionated, and provides everything out of the box without requiring you to make choices</li>\n</ul>\n<p>Jest is a tool very similar to Mocha, although they have differences:</p>\n<ul>\n<li>Mocha is less opinionated, while Jest has a certain set of conventions</li>\n<li>Mocha requires more configuration, while Jest works usually out of the box, thanks to being opinionated</li>\n<li>Mocha is older and more established, with more tooling integrations</li>\n</ul>\n<p>In my opinion the biggest feature of Jest is it's an out of the box solution that works without having to interact with other testing libraries to perform its job.</p>\n<h4>Installation</h4>\n<p>Jest is automatically installed in <code class=\"language-text\">create-react-app</code>, so if you use that, you don't need to install Jest.</p>\n<p>Jest can be installed in any other project using <a href=\"https://flaviocopes.com/yarn/\">Yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add --dev jest</code></pre></div>\n<p>or <a href=\"https://flaviocopes.com/npm/\">npm</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save-dev jest</code></pre></div>\n<p>notice how we instruct both to put Jest in the <code class=\"language-text\">devDependencies</code> part of the <code class=\"language-text\">package.json</code> file, so that it will only be installed in the development environment and not in production.</p>\n<p>Add this line to the scripts part of your <code class=\"language-text\">package.json</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"scripts\": {\n    \"test\": \"jest\"\n  }\n}</code></pre></div>\n<p>so that tests can be run using <code class=\"language-text\">yarn test</code> or <code class=\"language-text\">npm run test</code>.</p>\n<p>Alternatively, you can install Jest globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn global add jest</code></pre></div>\n<p>and run all your tests using the <code class=\"language-text\">jest</code> command line tool.</p>\n<h4>Create the first Jest test</h4>\n<p>Projects created with <code class=\"language-text\">create-react-app</code> have Jest installed and preconfigured out of the box, but adding Jest to any project is as easy as typing</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add --dev jest</code></pre></div>\n<p>Add to your <code class=\"language-text\">package.json</code> this line:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"scripts\": {\n    \"test\": \"jest\"\n  }\n}</code></pre></div>\n<p>and run your tests by executing <code class=\"language-text\">yarn test</code> in your shell.</p>\n<p>Now, you don't have any tests here, so nothing is going to be executed:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/QJ4lMCN6PhDyBBZ8mPyLmLciew9p9cUE9ug0\" alt=\"QJ4lMCN6PhDyBBZ8mPyLmLciew9p9cUE9ug0\"></p>\n<p>Let's create the first test. Open a <code class=\"language-text\">math.js</code> file and type a couple functions that we'll later test:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const sum = (a, b) => a + b\nconst mul = (a, b) => a * b\nconst sub = (a, b) => a - b\nconst div = (a, b) => a / b\n\nexport default { sum, mul, sub, div }</code></pre></div>\n<p>Now create a <code class=\"language-text\">math.test.js</code> file, in the same folder, and there we'll use Jest to test the functions defined in <code class=\"language-text\">math.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const { sum, mul, sub, div } = require('./math')\n\ntest('Adding 1 + 1 equals 2', () => {\n  expect(sum(1, 1)).toBe(2)\n})\ntest('Multiplying 1 * 1 equals 1', () => {\n  expect(mul(1, 1)).toBe(1)\n})\ntest('Subtracting 1 - 1 equals 0', () => {\n  expect(sub(1, 1)).toBe(0)\n})\ntest('Dividing 1 / 1 equals 1', () => {\n  expect(div(1, 1)).toBe(1)\n})</code></pre></div>\n<p>Running <code class=\"language-text\">yarn test</code> results in Jest being run on all the test files it finds, and returning us the end result:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/vGSvRogM-QF8N3EP5j9vUYYrkWvRc89OhE98\" alt=\"vGSvRogM-QF8N3EP5j9vUYYrkWvRc89OhE98\"></p>\n<h4>Run Jest with VS Code</h4>\n<p>Visual Studio Code is a great editor for JavaScript development. The <a href=\"https://marketplace.visualstudio.com/items?itemName=Orta.vscode-jest\">Jest extension</a> offers a top notch integration for our tests.</p>\n<p>Once you install it, it will automatically detect if you have installed Jest in your devDependencies and run the tests. You can also invoke the tests manually by selecting the <strong>Jest: Start Runner</strong> command. It will run the tests and stay in watch mode to re-run them whenever you change one of the files that have a test (or a test file):</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/WYyCsxacP34Fss8u9jT5lT0u3O--1Uwz9cKW\" alt=\"WYyCsxacP34Fss8u9jT5lT0u3O--1Uwz9cKW\"></p>\n<h4>Matchers</h4>\n<p>In the previous article I used <code class=\"language-text\">toBe()</code> as the only <strong>matcher</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test('Adding 1 + 1 equals 2', () => {\n  expect(sum(1, 1)).toBe(2)\n})</code></pre></div>\n<p>A matcher is a method that lets you test values.</p>\n<p>Most commonly used matchers, comparing the value of the result of <code class=\"language-text\">expect()</code> with the value passed in as argument, are:</p>\n<ul>\n<li><code class=\"language-text\">toBe</code> compares strict equality, using <code class=\"language-text\">===</code></li>\n<li><code class=\"language-text\">toEqual</code> compares the values of two variables. If it's an object or array, it checks the equality of all the properties or elements</li>\n<li><code class=\"language-text\">toBeNull</code> is true when passing a null value</li>\n<li><code class=\"language-text\">toBeDefined</code> is true when passing a defined value (opposite to the above)</li>\n<li><code class=\"language-text\">toBeUndefined</code> is true when passing an undefined value</li>\n<li><code class=\"language-text\">toBeCloseTo</code> is used to compare floating values, avoiding rounding errors</li>\n<li><code class=\"language-text\">toBeTruthy</code> true if the value is considered true (like an <code class=\"language-text\">if</code> does)</li>\n<li><code class=\"language-text\">toBeFalsy</code> true if the value is considered false (like an <code class=\"language-text\">if</code> does)</li>\n<li><code class=\"language-text\">toBeGreaterThan</code> true if the result of expect() is higher than the argument</li>\n<li><code class=\"language-text\">toBeGreaterThanOrEqual</code> true if the result of expect() is equal to the argument, or higher than the argument</li>\n<li><code class=\"language-text\">toBeLessThan</code> true if the result of expect() is lower than the argument</li>\n<li><code class=\"language-text\">toBeLessThanOrEqual</code> true if the result of expect() is equal to the argument, or lower than the argument</li>\n<li><code class=\"language-text\">toMatch</code> is used to compare strings with <a href=\"https://flaviocopes.com/javascript-regular-expressions/\">regular expression</a> pattern matching</li>\n<li><code class=\"language-text\">toContain</code> is used in arrays, true if the expected array contains the argument in its elements set</li>\n<li><code class=\"language-text\">toHaveLength(number)</code>: checks the length of an array</li>\n<li><code class=\"language-text\">toHaveProperty(key, value)</code>: checks if an object has a property, and optionally checks its value</li>\n<li><code class=\"language-text\">toThrow</code> checks if a function you pass throws an exception (in general) or a specific exception</li>\n<li><code class=\"language-text\">toBeInstanceOf()</code>: checks if an object is an instance of a class</li>\n</ul>\n<p>All those matchers can be negated using <code class=\"language-text\">.not.</code> inside the statement, for example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test('Adding 1 + 1 does not equal 3', () => {\n  expect(sum(1, 1)).not.toBe(3)\n})</code></pre></div>\n<p>For use with promises, you can use <code class=\"language-text\">.resolves</code> and <code class=\"language-text\">.rejects</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">expect(Promise.resolve('lemon')).resolves.toBe('lemon')\n\nexpect(Promise.reject(new Error('octopus'))).rejects.toThrow('octopus')</code></pre></div>\n<h4>Setup</h4>\n<p>Before running your tests you will want to perform some initialization.</p>\n<p>To do something once before all the tests run, use the <code class=\"language-text\">beforeAll()</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">beforeAll(() => {\n  //do something\n})</code></pre></div>\n<p>To perform something before each test runs, use <code class=\"language-text\">beforeEach()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">beforeEach(() => {\n  //do something\n})</code></pre></div>\n<h4>Teardown</h4>\n<p>Just as you can do with setup, you can also perform something after each test runs:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">afterEach(() => {\n  //do something\n})</code></pre></div>\n<p>and after all tests end:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">afterAll(() => {\n  //do something\n})</code></pre></div>\n<h4>Group tests using describe()</h4>\n<p>You can create groups of tests, in a single file, that isolate the setup and teardown functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">describe('first set', () => {\n  beforeEach(() => {\n    //do something\n  })\n  afterAll(() => {\n    //do something\n  })\n  test(/*...*/)\n  test(/*...*/)\n})\n\ndescribe('second set', () => {\n  beforeEach(() => {\n    //do something\n  })\n  beforeAll(() => {\n    //do something\n  })\n  test(/*...*/)\n  test(/*...*/)\n}) </code></pre></div>\n<h4>Testing asynchronous code</h4>\n<p>Asynchronous code in modern JavaScript can have basically 2 forms: callbacks and promises. On top of promises we can use async/await.</p>\n<h4>Callbacks</h4>\n<p>You can't have a test in a callback, because Jest won't execute it â€” the execution of the test file ends before the callback is called. To fix this, pass a parameter to the test function, which you can conveniently call <code class=\"language-text\">done</code>. Jest will wait until you call <code class=\"language-text\">done()</code> before ending that test:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//uppercase.js\nfunction uppercase(str, callback) {\n  callback(str.toUpperCase())\n}\nmodule.exports = uppercase\n\n//uppercase.test.js\nconst uppercase = require('./src/uppercase')\n\ntest(`uppercase 'test' to equal 'TEST'`, (done) => {\n  uppercase('test', (str) => {\n    expect(str).toBe('TEST')\n    done()\n  }\n})</code></pre></div>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/wsyP30ZeaXYM6LTu4UOiTIg4cFjUOo4GtutV\" alt=\"wsyP30ZeaXYM6LTu4UOiTIg4cFjUOo4GtutV\"></p>\n<h4>Promises</h4>\n<p>With functions that return promises, we simply <strong>return a promise</strong> from the test:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//uppercase.js\nconst uppercase = str => {\n  return new Promise((resolve, reject) => {\n    if (!str) {\n      reject('Empty string')\n      return\n    }\n    resolve(str.toUpperCase())\n  })\n}\nmodule.exports = uppercase\n\n//uppercase.test.js\nconst uppercase = require('./uppercase')\ntest(`uppercase 'test' to equal 'TEST'`, () => {\n  return uppercase('test').then(str => {\n    expect(str).toBe('TEST')\n  })\n})</code></pre></div>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/8j7LKC8uKE5Tw0X4WN4Gm0rD3NziyPxNwyCn\" alt=\"8j7LKC8uKE5Tw0X4WN4Gm0rD3NziyPxNwyCn\"></p>\n<p>Promises that are rejected can be tested using <code class=\"language-text\">.catch()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//uppercase.js\nconst uppercase = str => {\n  return new Promise((resolve, reject) => {\n    if (!str) {\n      reject('Empty string')\n      return\n    }\n    resolve(str.toUpperCase())\n  })\n}\n\nmodule.exports = uppercase\n\n//uppercase.test.js\nconst uppercase = require('./uppercase')\n\ntest(`uppercase 'test' to equal 'TEST'`, () => {\n  return uppercase('').catch(e => {\n    expect(e).toMatch('Empty string')\n  })\n})</code></pre></div>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/F9HWCuZKWwG1RMZdNkDAaGMRsC0zaIsMokia\" alt=\"F9HWCuZKWwG1RMZdNkDAaGMRsC0zaIsMokia\"></p>\n<h4>Async/await</h4>\n<p>To test functions that return promises we can also use async/await, which makes the syntax very straightforward and simple:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//uppercase.test.js\nconst uppercase = require('./uppercase')\ntest(`uppercase 'test' to equal 'TEST'`, async () => {\n  const str = await uppercase('test')\n  expect(str).toBe('TEST')\n})</code></pre></div>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/7xWQMgM0PC9AGUBewAzcCgNWvHIjjxerfRxR\" alt=\"7xWQMgM0PC9AGUBewAzcCgNWvHIjjxerfRxR\"></p>\n<h4>Mocking</h4>\n<p>In testing, <strong>mocking</strong> allows you to test functionality that depends on:</p>\n<ul>\n<li><strong>Database</strong></li>\n<li><strong>Network</strong> requests</li>\n<li>access to <strong>Files</strong></li>\n<li>any <strong>External</strong> system</li>\n</ul>\n<p>so that:</p>\n<ol>\n<li>your tests run <strong>faster</strong>, giving a quick turnaround time during development</li>\n<li>your tests are <strong>independent</strong> of network conditions, or the state of the database</li>\n<li>your tests do not <strong>pollute</strong> any data storage because they do not touch the database</li>\n<li>any change done in a test does not change the state for subsequent tests, and re-running the test suite should start from a known and reproducible starting point</li>\n<li>you don't have to worry about rate limiting on API calls and network requests</li>\n</ol>\n<p>Mocking is useful when you want to avoid side effects (e.g. writing to a database) or you want to skip slow portions of code (like network access), and also avoids implications with running your tests multiple times (e.g. imagine a function that sends an email or calls a rate-limited API).</p>\n<p>Even more important, if you are writing a <strong>Unit Test</strong>, you should test the functionality of a function in isolation, not with all its baggage of things it touches.</p>\n<p>Using mocks, you can inspect if a module function has been called and which parameters were used, with:</p>\n<ul>\n<li><code class=\"language-text\">expect().toHaveBeenCalled()</code>: check if a spied function has been called</li>\n<li><code class=\"language-text\">expect().toHaveBeenCalledTimes()</code>: count how many times a spied function has been called</li>\n<li><code class=\"language-text\">expect().toHaveBeenCalledWith()</code>: check if the function has been called with a specific set of parameters</li>\n<li><code class=\"language-text\">expect().toHaveBeenLastCalledWith()</code>: check the parameters of the last time the function has been invoked</li>\n</ul>\n<h4>Spy packages without affecting the functions code</h4>\n<p>When you import a package, you can tell Jest to \"spy\" on the execution of a particular function, using <code class=\"language-text\">spyOn()</code>, without affecting how that method works.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const mathjs = require('mathjs')\n\ntest(`The mathjs log function`, () => {\n  const spy = jest.spyOn(mathjs, 'log')\n  const result = mathjs.log(10000, 10)\n  \n  expect(mathjs.log).toHaveBeenCalled()\n  expect(mathjs.log).toHaveBeenCalledWith(10000, 10)\n})</code></pre></div>\n<h4>Mock an entire package</h4>\n<p>Jest provides a convenient way to mock an entire package. Create a <code class=\"language-text\">__mocks__</code>folder in the project root, and in this folder create one JavaScript file for each of your packages.</p>\n<p>Say you import <code class=\"language-text\">mathjs</code>. Create a <code class=\"language-text\">__mocks__/mathjs.js</code> file in your project root, and add this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  log: jest.fn(() => 'test')\n}</code></pre></div>\n<p>This will mock the log() function of the package. Add as many functions as you want to mock:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const mathjs = require('mathjs')\n\ntest(`The mathjs log function`, () => {\n  const result = mathjs.log(10000, 10)\n  expect(result).toBe('test')\n  expect(mathjs.log).toHaveBeenCalled()\n  expect(mathjs.log).toHaveBeenCalledWith(10000, 10)\n})</code></pre></div>\n<h4>Mock a single function</h4>\n<p>More simply, you can mock a single function using <code class=\"language-text\">jest.fn()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const mathjs = require('mathjs')\n\nmathjs.log = jest.fn(() => 'test')\ntest(`The mathjs log function`, () => {\n  const result = mathjs.log(10000, 10)\n  expect(result).toBe('test')\n  expect(mathjs.log).toHaveBeenCalled()\n  expect(mathjs.log).toHaveBeenCalledWith(10000, 10)\n})</code></pre></div>\n<p>You can also use <code class=\"language-text\">jest.fn().mockReturnValue('test')</code> to create a simple mock that does nothing except returning a value.</p>\n<h4>Pre-built mocks</h4>\n<p>You can find pre-made mocks for popular libraries. For example this package <a href=\"https://github.com/jefflau/jest-fetch-mock\">https://github.com/jefflau/jest-fetch-mock</a> allows you to mock <code class=\"language-text\">fetch()</code> calls, and provide sample return values without interacting with the actual server in your tests.</p>\n<h4>Snapshot testing</h4>\n<p>Snapshot testing is a pretty cool feature offered by Jest. It can memorize how your UI components are rendered, and compare it to the current test, raising an error if there's a mismatch.</p>\n<p>This is a simple test on the App component of a simple <code class=\"language-text\">create-react-app</code> application (make sure you install <code class=\"language-text\">react-test-renderer</code>):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport App from './App'\nimport renderer from 'react-test-renderer'\n\nit('renders correctly', () => {\n  const tree = renderer.create(&lt;App />).toJSON()\n  expect(tree).toMatchSnapshot()\n})</code></pre></div>\n<p>the first time you run this test, Jest saves the snapshot to the <code class=\"language-text\">__snapshots__</code>folder. Here's what App.test.js.snap contains:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Jest Snapshot v1, https://goo.gl/fbAQLP\n\nexports[`renders correctly 1`] = `\n&lt;div\n  className=\"App\"\n>\n  &lt;header\n    className=\"App-header\"\n  >\n    &lt;img\n      alt=\"logo\"\n      className=\"App-logo\"\n      src=\"logo.svg\"\n    />\n    &lt;h1\n      className=\"App-title\"\n    >\n      Welcome to React\n    &lt;/h1>\n  &lt;/header>\n  &lt;p\n    className=\"App-intro\"\n  >\n    To get started, edit\n    &lt;code>\n      src/App.js\n    &lt;/code>\n     and save to reload.\n  &lt;/p>\n&lt;/div>\n`</code></pre></div>\n<p>As you see it's the code that the App component renders, nothing more.</p>\n<p>The next time the test compares the output of <code class=\"language-text\">&lt;App</code> /> to this. If App changes, you get an error:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/imS-QSkC1rmVVRYLkLYSJrGk5b3DOjodEJkx\" alt=\"imS-QSkC1rmVVRYLkLYSJrGk5b3DOjodEJkx\"></p>\n<p>When using <code class=\"language-text\">yarn test</code> in <code class=\"language-text\">create-react-app</code> you are in <strong>watch mode</strong>, and from there you can press <code class=\"language-text\">w</code> and show more options:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Watch Usage\n â€º Press u to update failing snapshots.\n â€º Press p to filter by a filename regex pattern.\n â€º Press t to filter by a test name regex pattern.\n â€º Press q to quit watch mode.\n â€º Press Enter to trigger a test run.</code></pre></div>\n<p>If your change is intended, pressing <code class=\"language-text\">u</code> will update the failing snapshots, and make the test pass.</p>\n<p>You can also update the snapshot by running <code class=\"language-text\">jest -u</code> (or <code class=\"language-text\">jest --updateSnapshot</code>) outside of watch mode.</p>\n<h3>Testing React components</h3>\n<p>The easiest way to start with testing React components is doing snapshot testing, a testing technique that lets you test components in isolation.</p>\n<p>If you are familiar with testing software, it's just like unit testing you do for classes: you test each component functionality.</p>\n<p>I assume you created a React app with <code class=\"language-text\">create-react-app</code>, which already comes with <strong>Jest</strong> installed, the testing package we'll need.</p>\n<p>Let's start with a simple test. CodeSandbox is a great environment to try this out. Start with a React sandbox, and create an <code class=\"language-text\">App.js</code> component in a <code class=\"language-text\">components</code> folder, and add an <code class=\"language-text\">App.test.js</code> file.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nexport default function App() {\n  return (\n    &lt;div className=\"App\">\n      &lt;h1>Hello CodeSandbox&lt;/h1>\n      &lt;h2>Start editing to see some magic happen!&lt;/h2>\n    &lt;/div>\n  )\n}</code></pre></div>\n<p>Our first test is dumb:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test('First test', () => {\n  expect(true).toBeTruthy()\n})</code></pre></div>\n<p>When CodeSandbox detects test files, it automatically runs them for you, and you can click the Tests button in the bottom of the view to show your test results:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/DKFPyZSWF0O2ldKLAMyz7i0Di9NLqMs-ChQ4\" alt=\"DKFPyZSWF0O2ldKLAMyz7i0Di9NLqMs-ChQ4\"></p>\n<p>A test file can contain multiple tests:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/iWZgjKzyxhyAtvjpsyTTEpzs4pKot938aVjk\" alt=\"iWZgjKzyxhyAtvjpsyTTEpzs4pKot938aVjk\"></p>\n<p>Let's do something a bit more useful now, to actually test a React component. We only have App now, which is not doing anything really useful, so let's first set up the environment with a little application with more functionality: the counter app we built previously. If you skipped it, you can go back and read how we built it, but for easier reference I add it here again.</p>\n<p>It's just 2 components: App and Button. Create the <code class=\"language-text\">App.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { useState } from 'react'\nimport Button from './Button'\n\nconst App = () => {\n  const [count, setCount] = useState(0)\n  \n  const incrementCount = increment => {\n    setCount(count + increment)\n  }\n  \n  return (\n    &lt;div>\n      &lt;Button increment={1} onClickFunction={incrementCount} />\n      &lt;Button increment={10} onClickFunction={incrementCount} />\n      &lt;Button increment={100} onClickFunction={incrementCount} />\n      &lt;Button increment={1000} onClickFunction={incrementCount} />\n      &lt;span>{count}&lt;/span>\n    &lt;/div>\n  )\n}\n\nexport default App</code></pre></div>\n<p>and the <code class=\"language-text\">Button.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nconst Button = ({ increment, onClickFunction }) => {\n  const handleClick = () => {\n    onClickFunction(increment)\n  }\n  return &lt;button onClick={handleClick}>+{increment}&lt;/button>\n}\n\nexport default Button</code></pre></div>\n<p>We are going to use the <code class=\"language-text\">react-testing-library</code>, which is a great help as it allows us to inspect the output of every component and to apply events on them. You can read more about it on <a href=\"https://github.com/kentcdodds/react-testing-library\">https://github.com/kentcdodds/react-testing-library</a> or watch <a href=\"https://www.youtube.com/watch?v=JKOwJUM4_RM\">this video</a>.</p>\n<p>Let's test the Button component first.</p>\n<p>We start by importing <code class=\"language-text\">render</code> and <code class=\"language-text\">fireEvent</code> from <code class=\"language-text\">react-testing-library</code>, two helpers. The first lets us render JSX. The second lets us emit events on a component.</p>\n<p>Create a <code class=\"language-text\">Button.test.js</code> and put it in the same folder as <code class=\"language-text\">Button.js</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport { render, fireEvent } from 'react-testing-library'\nimport Button from './Button'</code></pre></div>\n<p>Buttons are used in the app to accept a click event and then they call a function passed to the <code class=\"language-text\">onClickFunction</code> prop. We add a <code class=\"language-text\">count</code> variable and we create a function that increments it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let count\n\nconst incrementCount = increment => {\n  count += increment\n}</code></pre></div>\n<p>Now off to the actual tests. We first initialize count to 0, and we render a <code class=\"language-text\">+1</code> <code class=\"language-text\">Button</code> component passing a <code class=\"language-text\">1</code> to <code class=\"language-text\">increment</code> and our <code class=\"language-text\">incrementCount</code> function to <code class=\"language-text\">onClickFunction</code>.</p>\n<p>Then we get the content of the first child of the component, and we check it outputs <code class=\"language-text\">+1</code>.</p>\n<p>We then proceed to clicking the button, and we check that the count got from 0 to 1:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test('+1 Button works', () => {\n  count = 0\n  const { container } = render(\n    &lt;Button increment={1} onClickFunction={incrementCount} />\n  )\n  const button = container.firstChild\n  expect(button.textContent).toBe('+1')\n  expect(count).toBe(0)\n  fireEvent.click(button)\n  expect(count).toBe(1)\n})</code></pre></div>\n<p>Similarly we test a +100 button, this time checking the output is <code class=\"language-text\">+100</code> and the button click increments the count of 100.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">test('+100 Button works', () => {\n  count = 0\n  const { container } = render(\n    &lt;Button increment={100} onClickFunction={incrementCount} />\n  )\n  const button = container.firstChild\n  expect(button.textContent).toBe('+100')\n  expect(count).toBe(0)\n  fireEvent.click(button)\n  expect(count).toBe(100)\n})</code></pre></div>\n<p>Let's test the App component now. It shows 4 buttons and the result in the page. We can inspect each button and see if the result increases when we click them, clicking multiple times as well:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport { render, fireEvent } from 'react-testing-library'\nimport App from './App'\n\ntest('App works', () => {\n  const { container } = render(&lt;App />)\n  console.log(container)\n  const buttons = container.querySelectorAll('button')\n  \n  expect(buttons[0].textContent).toBe('+1')\n  expect(buttons[1].textContent).toBe('+10')\n  expect(buttons[2].textContent).toBe('+100')\n  expect(buttons[3].textContent).toBe('+1000')\n  \n  const result = container.querySelector('span')\n  expect(result.textContent).toBe('0')\n  fireEvent.click(buttons[0])\n  expect(result.textContent).toBe('1')\n  fireEvent.click(buttons[1])\n  expect(result.textContent).toBe('11')\n  fireEvent.click(buttons[2])\n  expect(result.textContent).toBe('111')\n  fireEvent.click(buttons[3])\n  expect(result.textContent).toBe('1111')\n  fireEvent.click(buttons[2])\n  expect(result.textContent).toBe('1211')\n  fireEvent.click(buttons[1])\n  expect(result.textContent).toBe('1221')\n  fireEvent.click(buttons[0])\n  expect(result.textContent).toBe('1222')\n})</code></pre></div>\n<p>Check the code working on this CodeSandbox: <a href=\"https://codesandbox.io/s/pprl4y0wq\">https://codesandbox.io/s/pprl4y0wq</a></p>\n<h3>SECTION 8: THE REACT ECOSYSTEM</h3>\n<p>The ecosystem around React is huge. Here I introduce you to 4 of the most popular projects based upon React: React Router, Redux, Next.js, Gatsby.</p>\n<h3>React Router</h3>\n<p>React Router is the de-facto React routing library, and it's one of the most popular projects built on top of React.</p>\n<p>React at its core is a very simple library, and it does not dictate anything about routing.</p>\n<p>Routing in a Single Page Application is the way to introduce some features to navigating the app through links, which are <strong>expected</strong> in normal web applications:</p>\n<ol>\n<li>The browser should <strong>change the URL</strong> when you navigate to a different screen</li>\n<li><strong>Deep linking</strong> should work: if you point the browser to a URL, the application should reconstruct the same view that was presented when the URL was generated.</li>\n<li>The <strong>browser back (and forward) button</strong> should work like expected.</li>\n</ol>\n<p><strong>Routing links together your application navigation with the navigation features offered by the browser</strong>: the <strong>address bar</strong> and the <strong>navigation buttons</strong>.</p>\n<p>React Router offers a way to write your code so that <strong>it will show certain components of your app only if the route matches what you define</strong>.</p>\n<h3>Installation</h3>\n<p>With <a href=\"https://flaviocopes.com/npm/\">npm</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install react-router-dom</code></pre></div>\n<p>With <a href=\"https://flaviocopes.com/yarn/\">Yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add react-router-dom</code></pre></div>\n<h3>Types of routes</h3>\n<p>React Router provides two different kind of routes:</p>\n<ul>\n<li><code class=\"language-text\">BrowserRouter</code></li>\n<li><code class=\"language-text\">HashRouter</code></li>\n</ul>\n<p>One builds classic URLs, the other builds URLs with the hash:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://application.com/dashboard   /* BrowserRouter */\nhttps://application.com/#/dashboard /* HashRouter    */</code></pre></div>\n<p>Which one to use is mainly dictated by the browsers you need to support. <code class=\"language-text\">BrowserRouter</code> uses the <a href=\"https://flaviocopes.com/history-api/\">History API</a>, which is relatively recent, and not supported in IE9 and below. If you don't have to worry about older browsers, it's the recommended choice.</p>\n<h3>Components</h3>\n<p>The 3 components you will interact the most when working with React Router are:</p>\n<ul>\n<li><code class=\"language-text\">BrowserRouter</code>, usually aliased as <code class=\"language-text\">Router</code></li>\n<li><code class=\"language-text\">Link</code></li>\n<li><code class=\"language-text\">Route</code></li>\n</ul>\n<p><code class=\"language-text\">BrowserRouter</code> wraps all your Route components.</p>\n<p><code class=\"language-text\">Link</code> components are - as you can imagine - used to generate links to your routes</p>\n<p><code class=\"language-text\">Route</code> components are responsible for showing - or hiding - the components they contain.</p>\n<h3>BrowserRouter</h3>\n<p>Here's a simple example of the BrowserRouter component. You import it from react-router-dom, and you use it to wrap all your app:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nReactDOM.render(\n  &lt;Router>\n      &lt;div>\n        &lt;!-- -->\n      &lt;/div>\n  &lt;/Router>,\n  document.getElementById('app')\n)</code></pre></div>\n<p>A BrowserRouter component can only have one child element, so we wrap all we're going to add in a <code class=\"language-text\">div</code> element.</p>\n<h3>Link</h3>\n<p>The Link component is used to trigger new routes. You import it from <code class=\"language-text\">react-router-dom</code>, and you can add the Link components to point at different routes, with the <code class=\"language-text\">to</code> attribute:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router, Link } from 'react-router-dom'\n\nReactDOM.render(\n  &lt;Router>\n      &lt;div>\n        &lt;aside>\n          &lt;Link to={`/dashboard`}>Dashboard&lt;/Link>\n          &lt;Link to={`/about`}>About&lt;/Link>\n        &lt;/aside>\n        &lt;!-- -->\n      &lt;/div>\n  &lt;/Router>,\n  document.getElementById('app')\n)</code></pre></div>\n<h3>Route</h3>\n<p>Now let's add the Route component in the above snippet to make things actually work as we want:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router, Link, Route } from 'react-router-dom'\n\nconst Dashboard = () => (\n  &lt;div>\n    &lt;h2>Dashboard&lt;/h2>\n    ...\n  &lt;/div>\n)\n\nconst About = () => (\n  &lt;div>\n    &lt;h2>About&lt;/h2>\n    ...\n  &lt;/div>\n)\n\nReactDOM.render(\n  &lt;Router>\n    &lt;div>\n      &lt;aside>\n        &lt;Link to={`/`}>Dashboard&lt;/Link>\n        &lt;Link to={`/about`}>About&lt;/Link>\n      &lt;/aside>\n      \n      &lt;main>\n        &lt;Route exact path=\"/\" component={Dashboard} />\n        &lt;Route path=\"/about\" component={About} />\n      &lt;/main>\n    &lt;/div>\n  &lt;/Router>,\n  document.getElementById('app')\n)</code></pre></div>\n<p>Check this example on Glitch: <a href=\"https://flaviocopes-react-router-v4.glitch.me/\">https://flaviocopes-react-router-v4.glitch.me/</a></p>\n<p>When the route matches <code class=\"language-text\">/</code>, the application shows the <strong>Dashboard</strong> component.</p>\n<p>When the route is changed by clicking the \"About\" link to <code class=\"language-text\">/about</code>, the Dashboard component is removed and the <strong>About</strong> component is inserted in the DOM.</p>\n<p>Notice the <code class=\"language-text\">exact</code> attribute. Without this, <code class=\"language-text\">path=\"/\"</code> would also match <code class=\"language-text\">/about</code>, since <code class=\"language-text\">/</code> is contained in the route.</p>\n<h3>Match multiple paths</h3>\n<p>You can have a route respond to multiple paths simply using a regex, because <code class=\"language-text\">path</code> can be a regular expressions string:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Route path=\"/(about|who)/\" component={Dashboard} /></code></pre></div>\n<h3>Inline rendering</h3>\n<p>Instead of specifying a <code class=\"language-text\">component</code> property on <code class=\"language-text\">Route</code>, you can set a <code class=\"language-text\">render</code> prop:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Route\n  path=\"/(about|who)/\"\n  render={() => (\n    &lt;div>\n      &lt;h2>About&lt;/h2>\n      ...\n    &lt;/div>\n  )}\n/></code></pre></div>\n<h3>Match dynamic route parameter</h3>\n<p>You already saw how to use static routes like</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Posts = () => (\n  &lt;div>\n    &lt;h2>Posts&lt;/h2>\n    ...\n  &lt;/div>\n)\n\n//...\n\n&lt;Route exact path=\"/posts\" component={Posts} /></code></pre></div>\n<p>Here's how to handle dynamic routes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Post = ({match}) => (\n  &lt;div>\n    &lt;h2>Post #{match.params.id}&lt;/h2>\n    ...\n  &lt;/div>\n)\n\n//...\n\n&lt;Route exact path=\"/post/:id\" component={Post} /></code></pre></div>\n<p>In your Route component you can lookup the dynamic parameters in <code class=\"language-text\">match.params</code>.</p>\n<p><code class=\"language-text\">match</code> is also available in inline rendered routes, and this is especially useful in this case, because we can use the <code class=\"language-text\">id</code> parameter to lookup the post data in our data source before rendering Post:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const posts = [\n  { id: 1, title: 'First', content: 'Hello world!' },\n  { id: 2, title: 'Second', content: 'Hello again!' }\n]\n\nconst Post = ({post}) => (\n  &lt;div>\n    &lt;h2>{post.title}&lt;/h2>\n    {post.content}\n  &lt;/div>\n)\n\n//...\n\n&lt;Route exact path=\"/post/:id\" render={({match}) => (\n  &lt;Post post={posts.find(p => p.id === match.params.id)} />\n)} /></code></pre></div>\n<h3>Redux</h3>\n<p>Redux is a state manager that's usually used along with React, but it's not tied to that library â€” it can be used with other technologies as well, but we'll stick to React for the sake of the explanation..</p>\n<p>Redux is a way to manage an application state, and move it to an <strong>external global store</strong>.</p>\n<p>There are a few concepts to grasp, but once you do, Redux is a very simple approach to the problem.</p>\n<p>Redux is very popular with React applications, but it's in no way unique to React: there are bindings for nearly any popular framework. That said, I'll make some examples using React as it is its primary use case.</p>\n<h4>When should you use Redux?</h4>\n<p>Redux is ideal for medium to big apps, and you should only use it when you have trouble managing the state with the default state management of React, or the other library you use.</p>\n<p>Simple apps should not need it at all (and there's nothing wrong with simple apps).</p>\n<h4>Immutable State Tree</h4>\n<p>In Redux, the whole state of the application is represented by <strong>one</strong> <a href=\"https://flaviocopes.com/javascript/\">JavaScript</a> object, called <strong>State</strong> or <strong>State Tree</strong>.</p>\n<p>We call it <strong>Immutable State Tree</strong> because it is read only: it can't be changed directly.</p>\n<p>It can only be changed by dispatching an <strong>Action</strong>.</p>\n<h4>Actions</h4>\n<p>An <strong>Action</strong> is <strong>a JavaScript object that describes a change in a minimal way</strong> (with just the information needed):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  type: 'CLICKED_SIDEBAR'\n}\n\n// e.g. with more data\n{\n  type: 'SELECTED_USER',\n  userId: 232\n}</code></pre></div>\n<p>The only requirement of an action object is having a <code class=\"language-text\">type</code> property, whose value is usually a string.</p>\n<h4>Actions types should be constants</h4>\n<p>In a simple app an action type can be defined as a string, as I did in the example in the previous lesson.</p>\n<p>When the app grows is best to use constants:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const ADD_ITEM = 'ADD_ITEM'\nconst action = { type: ADD_ITEM, title: 'Third item' }</code></pre></div>\n<p>and to separate actions in their own files, and import them</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { ADD_ITEM, REMOVE_ITEM } from './actions'</code></pre></div>\n<h4>Action creators</h4>\n<p><strong>Actions Creators</strong> are functions that create actions.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">function addItem(t) {\n  return {\n    type: ADD_ITEM,\n    title: t\n  }\n}</code></pre></div>\n<p>You usually run action creators in combination with triggering the dispatcher:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dispatch(addItem('Milk'))</code></pre></div>\n<p>or by defining an action dispatcher function:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const dispatchAddItem = i => dispatch(addItem(i))\ndispatchAddItem('Milk')</code></pre></div>\n<h4>Reducers</h4>\n<p>When an action is fired, something must happen, the state of the application must change.</p>\n<p>This is the job of <strong>reducers</strong>.</p>\n<p>A <strong>reducer</strong> is a <strong>pure function</strong> that calculates the next State Tree based on the previous State Tree, and the action dispatched.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">;(currentState, action) => newState</code></pre></div>\n<p>A pure function takes an input and returns an output without changing the input or anything else. Thus, a reducer returns a completely new state tree object that substitutes the previous one.</p>\n<h4>What a reducer should not do</h4>\n<p>A reducer should be a pure function, so it should:</p>\n<ul>\n<li>never mutate its arguments</li>\n<li>never mutate the state, but instead create a new one with <code class=\"language-text\">Object.assign({}, ...)</code></li>\n<li>never generate side-effects (no API calls changing anything)</li>\n<li>never call non-pure functions, functions that change their output based on factors other than their input (e.g. <code class=\"language-text\">Date.now()</code> or <code class=\"language-text\">Math.random()</code>)</li>\n</ul>\n<p>There is no reinforcement, but you should stick to the rules.</p>\n<h4>Multiple reducers</h4>\n<p>Since the state of a complex app could be really wide, there is not a single reducer, but many reducers for any kind of action.</p>\n<h4>A simulation of a reducer</h4>\n<p>At its core, Redux can be simplified with this simple model:</p>\n<h4>The state</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  list: [\n    { title: \"First item\" },\n    { title: \"Second item\" },\n  ],\n  title: 'Groceries list'\n}</code></pre></div>\n<h4>A list of actions</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{ type: 'ADD_ITEM', title: 'Third item' }\n{ type: 'REMOVE_ITEM', index: 1 }\n{ type: 'CHANGE_LIST_TITLE', title: 'Road trip list' }</code></pre></div>\n<h4>A reducer for every part of the state</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const title = (state = '', action) => {\n    if (action.type === 'CHANGE_LIST_TITLE') {\n      return action.title\n    } else {\n      return state\n    }\n}\n\nconst list = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      return state.concat([{ title: action.title }])\n    case 'REMOVE_ITEM':\n      return state.map((item, index) =>\n        action.index === index\n          ? { title: item.title }\n          : item\n    default:\n      return state\n  }\n}</code></pre></div>\n<h4>A reducer for the whole state</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const listManager = (state = {}, action) => {\n  return {\n    title: title(state.title, action),\n    list: list(state.list, action)\n  }\n}</code></pre></div>\n<h4>The Store</h4>\n<p>The <strong>Store</strong> is an object that:</p>\n<ul>\n<li><strong>holds the state</strong> of the app</li>\n<li><strong>exposes the state</strong> via <code class=\"language-text\">getState()</code></li>\n<li>allows us to <strong>update the state</strong> via <code class=\"language-text\">dispatch()</code></li>\n<li>allows us to (un)register a <strong>state change listener</strong> using <code class=\"language-text\">subscribe()</code></li>\n</ul>\n<p>A store is <strong>unique</strong> in the app.</p>\n<p>Here is how a store for the listManager app is created:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { createStore } from 'redux'\nimport listManager from './reducers'\nlet store = createStore(listManager)</code></pre></div>\n<h4>Can I initialize the store with server-side data?</h4>\n<p>Sure, <strong>just pass a starting state</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let store = createStore(listManager, preexistingState)</code></pre></div>\n<h4>Getting the state</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">store.getState()</code></pre></div>\n<h4>Update the state</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">store.dispatch(addItem('Something'))</code></pre></div>\n<h4>Listen to state changes</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const unsubscribe = store.subscribe(() =>\n  const newState = store.getState()\n)\n\nunsubscribe()</code></pre></div>\n<h4>Data Flow</h4>\n<p>Data flow in Redux is always <strong>unidirectional</strong>.</p>\n<p>You call <code class=\"language-text\">dispatch()</code> on the Store, passing an Action.</p>\n<p>The Store takes care of passing the Action to the Reducer, generating the next State.</p>\n<p>The Store updates the State and alerts all the Listeners.</p>\n<h3>Next.js</h3>\n<p>Working on a modern <a href=\"https://flaviocopes.com/javascript/\">JavaScript</a> application powered by <a href=\"https://flaviocopes.com/react/\">React</a> is awesome until you realize that there are a couple problems related to rendering all the content on the client-side.</p>\n<p>First, the page takes longer to the become visible to the user, because before the content loads, all the JavaScript must load, and your application needs to run to determine what to show on the page.</p>\n<p>Second, if you are building a publicly available website, you have a content SEO issue. Search engines are getting better at running and indexing JavaScript apps, but it's much better if we can send them content instead of letting them figure it out.</p>\n<p>The solution to both of those problems is <strong>server rendering</strong>, also called <strong>static pre-rendering</strong>.</p>\n<p>Next.js is one React framework to do all of this in a very simple way, but it's not limited to this. It's advertised by its creators as a <strong>zero-configuration, single-command toolchain for React apps</strong>.</p>\n<p>It provides a common structure that allows you to easily build a frontend React application, and transparently handle server-side rendering for you.</p>\n<p>Here is a non-exhaustive list of the main Next.js features:</p>\n<ul>\n<li><strong>Hot Code Reloading</strong>: Next.js reloads the page when it detects any change saved to disk.</li>\n<li><strong>Automatic Routing</strong>: any URL is mapped to the filesystem, to files put in the <code class=\"language-text\">pages</code> folder, and you don't need any configuration (you have customization options of course).</li>\n<li><strong>Single File Components</strong>: using <a href=\"https://github.com/zeit/styled-jsx\">styled-jsx</a>, completely integrated as built by the same team, it's trivial to add styles scoped to the component.</li>\n<li><strong>Server Rendering</strong>: you can (optionally) render React components on the server side, before sending the HTML to the client.</li>\n<li><strong>Ecosystem Compatibility</strong>: Next.js plays well with the rest of the JavaScript, Node and React ecosystem.</li>\n<li><strong>Automatic Code Splitting</strong>: pages are rendered with just the libraries and JavaScript that they need, no more.</li>\n<li><strong>Prefetching</strong>: the <code class=\"language-text\">Link</code> component, used to link together different pages, supports a <code class=\"language-text\">prefetch</code> prop which automatically prefetches page resources (including code missing due to code splitting) in the background.</li>\n<li><strong>Dynamic Components</strong>: you can import JavaScript modules and React Components dynamically (<a href=\"https://github.com/zeit/next.js#dynamic-import\">https://github.com/zeit/next.js#dynamic-import</a>).</li>\n<li><strong>Static Exports</strong>: using the <code class=\"language-text\">next export</code> command, Next.js allows you to export a fully static site from your app.</li>\n</ul>\n<h4>Installation</h4>\n<p>Next.js supports all the major platforms: Linux, macOS, Windows.</p>\n<p>A Next.js project is started easily with npm:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install next react react-dom</code></pre></div>\n<p>or with <a href=\"https://flaviocopes.com/yarn/\">Yarn</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add next react react-dom</code></pre></div>\n<h4>Getting started</h4>\n<p>Create a <code class=\"language-text\">package.json</code> file with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"scripts\": {\n    \"dev\": \"next\"\n  }\n}</code></pre></div>\n<p>If you run this command now:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run dev</code></pre></div>\n<p>the script will raise an error complaining about not finding the <code class=\"language-text\">pages</code> folder. This is the only thing that Next.js requires to run.</p>\n<p>Create an empty <code class=\"language-text\">pages</code> folder, and run the command again, and Next.js will start up a server on <code class=\"language-text\">localhost:3000</code>.</p>\n<p>If you go to that URL now, you'll be greeted by a friendly 404 page, with a nice clean design.</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/wBBqzsveZC9evvtqiPb6yrFav9V5UjExd0HE\" alt=\"wBBqzsveZC9evvtqiPb6yrFav9V5UjExd0HE\"></p>\n<p>Next.js handles other error types as well, like 500 errors for example.</p>\n<h4>Create a page</h4>\n<p>In the <code class=\"language-text\">pages</code> folder create an <code class=\"language-text\">index.js</code> file with a simple React functional component:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default () => (\n  &lt;div>\n    &lt;p>Hello World!&lt;/p>\n  &lt;/div>\n)</code></pre></div>\n<p>If you visit <code class=\"language-text\">localhost:3000</code>, this component will automatically be rendered.</p>\n<p>Why is this so simple?</p>\n<p>Next.js uses a declarative pages structure, which is based on the filesystem structure.</p>\n<p>Simply put, pages are inside a <code class=\"language-text\">pages</code> folder, and the page URL is determined by the page file name. The filesystem is the pages API.</p>\n<h4>Server-side rendering</h4>\n<p>Open the page source, <code class=\"language-text\">View -> Developer -> View</code> Source with Chrome.</p>\n<p>As you can see, the HTML generated by the component is sent directly in the page source. It's not rendered client-side, but instead it's rendered on the server.</p>\n<p>The Next.js team wanted to create a developer experience for server rendered pages similar to the one you get when creating a basic PHP project, where you simply drop PHP files and you call them, and they show up as pages. Internally of course it's all very different, but the apparent ease of use is clear.</p>\n<h4>Add a second page</h4>\n<p>Let's create another page, in <code class=\"language-text\">pages/contact.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default () => (\n  &lt;div>\n    &lt;p>\n      &lt;a href=\"mailto:my@email.com\">Contact us!&lt;/a>\n    &lt;/p>\n  &lt;/div>\n)</code></pre></div>\n<p>If you point your browser to <code class=\"language-text\">localhost:3000/contact</code> this page will be rendered. As you can see, also this page is server rendered.</p>\n<h4>Hot reloading</h4>\n<p>Note how you did not have to restart the <code class=\"language-text\">npm</code> process to load the second page. Next.js does this for you under the hood.</p>\n<h4>Client rendering</h4>\n<p>Server rendering is very convenient in your first page load, for all the reasons we saw above, but when it comes to navigating inside the website, client-side rendering is key to speeding up the page load and improving the user experience.</p>\n<p>Next.js provides a <code class=\"language-text\">Link</code> component you can use to build links. Try linking the two pages above.</p>\n<p>Change <code class=\"language-text\">index.js</code> to this code:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Link from 'next/link'\n\nexport default () => (\n  &lt;div>\n    &lt;p>Hello World!&lt;/p>\n    &lt;Link href=\"/contact\">\n      &lt;a>Contact me!&lt;/a>\n    &lt;/Link>\n  &lt;/div>\n)</code></pre></div>\n<p>Now go back to the browser and try this link. As you can see, the Contact page loads immediately, without a page refresh.</p>\n<p>This is client-side navigation working correctly, with complete support for the <a href=\"https://flaviocopes.com/history-api/\"><strong>History API</strong></a>, which means your users back button won't break.</p>\n<p>If you now <code class=\"language-text\">cmd-click</code> the link, the same Contact page will open in a new tab, now server rendered.</p>\n<h4>Dynamic pages</h4>\n<p>A good use case for Next.js is a blog, as it's something that all developers know how it works, and it's a good fit for a simple example of how to handle dynamic pages.</p>\n<p>A dynamic page is a page that has no fixed content, but instead display some data based on some parameters.</p>\n<p>Change <code class=\"language-text\">index.js</code> to</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Link from 'next/link'\n\nconst Post = props => (\n  &lt;li>\n    &lt;Link href={`/post?title=${props.title}`}>\n      &lt;a>{props.title}&lt;/a>\n    &lt;/Link>\n  &lt;/li>\n)\n\nexport default () => (\n  &lt;div>\n    &lt;h2>My blog&lt;/h2>\n    &lt;ul>\n      &lt;li>\n        &lt;Post title=\"Yet another post\" />\n        &lt;Post title=\"Second post\" />\n        &lt;Post title=\"Hello, world!\" />\n      &lt;/li>\n    &lt;/ul>\n  &lt;/div>\n)</code></pre></div>\n<p>This will create a series of posts and will fill the title query parameter with the post title:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/nEBXVSebNz6KzUWgNg62w-clo2vL7tnLIYpl\" alt=\"nEBXVSebNz6KzUWgNg62w-clo2vL7tnLIYpl\"></p>\n<p>Now create a <code class=\"language-text\">post.js</code> file in the <code class=\"language-text\">pages</code> folder, and add:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default props => &lt;h1>{props.url.query.title}&lt;/h1></code></pre></div>\n<p>Now clicking a single post will render the post title in a <code class=\"language-text\">h1</code> tag:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/urgIpOydqbjE4i9nyELblMonOjrK0Plrn3OJ\" alt=\"urgIpOydqbjE4i9nyELblMonOjrK0Plrn3OJ\"></p>\n<p>You can use clean URLs without query parameters. The Next.js Link component helps us by accepting an <code class=\"language-text\">as</code> attribute, which you can use to pass a slug:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import Link from 'next/link'\n\nconst Post = props => (\n  &lt;li>\n    &lt;Link as={`/${props.slug}`} href={`/post?title=${props.title}`}>\n      &lt;a>{props.title}&lt;/a>\n    &lt;/Link>\n  &lt;/li>\n)\n\nexport default () => (\n  &lt;div>\n    &lt;h2>My blog&lt;/h2>\n    &lt;ul>\n      &lt;li>\n        &lt;Post slug=\"yet-another-post\" title=\"Yet another post\" />\n        &lt;Post slug=\"second-post\" title=\"Second post\" />\n        &lt;Post slug=\"hello-world\" title=\"Hello, world!\" />\n      &lt;/li>\n    &lt;/ul>\n  &lt;/div>\n)</code></pre></div>\n<h4>CSS-in-JS</h4>\n<p>Next.js by default provides support for <a href=\"https://github.com/zeit/styled-jsx\">styled-jsx</a>, which is a CSS-in-JS solution provided by the same development team, but you can use whatever library you prefer, like Styled Components.</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default () => (\n  &lt;div>\n    &lt;p>\n      &lt;a href=\"mailto:my@email.com\">Contact us!&lt;/a>\n    &lt;/p>\n    &lt;style jsx>{`\n      p {\n        font-family: 'Courier New';\n      }\n      a {\n        text-decoration: none;\n        color: black;\n      }\n      a:hover {\n        opacity: 0.8;\n      }\n    `}&lt;/style>\n  &lt;/div>\n)</code></pre></div>\n<p>Styles are scoped to the component, but you can also edit global styles adding <code class=\"language-text\">global</code> to the <code class=\"language-text\">style</code> element:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default () => (\n  &lt;div>\n    &lt;p>\n      &lt;a href=\"mailto:my@email.com\">Contact us!&lt;/a>\n    &lt;/p>\n    &lt;style jsx global>{`\n      body {\n        font-family: 'Benton Sans', 'Helvetica Neue';\n        margin: 2em;\n      }\n      h2 {\n        font-style: italic;\n        color: #373fff;\n      }\n    `}&lt;/style>\n  &lt;/div>\n)</code></pre></div>\n<h4>Exporting a static site</h4>\n<p>A Next.js application can be easily exported as a static site, which can be deployed on one of the super fast static site hosts, like <a href=\"https://flaviocopes.com/netlify/\">Netlify</a> or <a href=\"https://flaviocopes.com/firebase-hosting/\">Firebase Hosting</a>, without the need to set up a Node environment.</p>\n<p>The process requires you to declare the URLs that compose the site, but it's <a href=\"https://github.com/zeit/next.js/#static-html-export\">a straightforward process</a>.</p>\n<h4>Deploying</h4>\n<p>Creating a production-ready copy of the application, without source maps or other development tooling that aren't needed in the final build, is easy.</p>\n<p>At the beginning of this tutorial you created a <code class=\"language-text\">package.json</code> file with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"scripts\": {\n    \"dev\": \"next\"\n  }\n}</code></pre></div>\n<p>which was the way to start up a development server using <code class=\"language-text\">npm run dev</code>.</p>\n<p>Now just add the following content to <code class=\"language-text\">package.json</code> instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n  \"scripts\": {\n    \"dev\": \"next\",\n    \"build\": \"next build\",\n    \"start\": \"next start\"\n  }\n}</code></pre></div>\n<p>and prepare your app by running <code class=\"language-text\">npm run build</code> and <code class=\"language-text\">npm run start</code>.</p>\n<h4>Now</h4>\n<p>The company behind Next.js provides an awesome hosting service for Node.js applications, called <a href=\"https://zeit.co/now\"><strong>Now</strong></a>.</p>\n<p>Of course they integrate both their products so you can deploy Next.js apps seamlessly, <a href=\"https://zeit.co/download\">once you have Now installed</a>, by running the <code class=\"language-text\">now</code> command in the application folder.</p>\n<p>Behind the scenes Now sets up a server for you, and you don't need to worry about anything, just wait for your application URL to be ready.</p>\n<h4>Zones</h4>\n<p>You can set up multiple Next.js instances to listen to different URLs, yet the application to an outside user will simply look like it's being powered by a single server: <a href=\"https://github.com/zeit/next.js/#multi-zones\">https://github.com/zeit/next.js/#multi-zones</a></p>\n<h4>Plugins</h4>\n<p>Next.js has a list of plugins at <a href=\"https://github.com/zeit/next-plugins\">https://github.com/zeit/next-plugins</a></p>\n<h4>Starter kit on Glitch</h4>\n<p>If you're looking to experiment, I recommend Glitch. Check out my <a href=\"https://glitch.com/edit/#!/flavio-starter-nextjs\">Next.js Glitch Starter Kit</a>.</p>\n<h3>Gatsby</h3>\n<p>Gatsby is a platform for building apps and websites using React.</p>\n<p>It is one of the tools that allow you to build on a set of technologies and practices collectively known as <a href=\"https://flaviocopes.com/jamstack/\">JAMstack</a>.</p>\n<p>Gatsby is one of the cool kids in the Frontend Development space right now. Why? I think the reasons are:</p>\n<ul>\n<li>the explosion of the JAMstack approach to building Web Apps and Web Sites</li>\n<li>the rapid adoption of the <a href=\"https://flaviocopes.com/progressive-web-apps/\">Progressive Web Apps</a> technology in the industry, which is one of the key features of Gatsby</li>\n<li>it's built in React and <a href=\"https://flaviocopes.com/graphql/\">GraphQL</a>, which are two very popular and rising technologies</li>\n<li>it's really powerful</li>\n<li>it's fast</li>\n<li>the documentation is great</li>\n<li>the network effect (people use it, create sites, make tutorials, people know more about it, creating a cycle)</li>\n<li>everything is JavaScript (no need to learn a new templating language)</li>\n<li>it hides the complexity, in the beginning, but allows us access into every step to customize</li>\n</ul>\n<p>All those are great points, and Gatsby is definitely worth a look.</p>\n<h4>How does it work?</h4>\n<p>With Gatsby, your applications are built using React components.</p>\n<p>The content you'll render in a site is generally written using Markdown, but you can use any kind of data source, like a headless CMS or a web service like Contentful.</p>\n<p>Gatsby builds the site, and it's compiled to static HTML which can be deployed on any Web Server you want, like Netlify, AWS S3, GitHub Pages, regular hosting providers, PAAS and more. All you need is a place that serves plain HTTP pages and your assets to the client.</p>\n<p>I mentioned Progressive Web Apps in the list. Gatsby automatically generates your site as a PWA, with a service worker that speeds up page loading and resource caching.</p>\n<p>You can enhance the functionality of Gatsby via plugins.</p>\n<h4>Installation</h4>\n<p>You can install Gatsby by simply running this in your terminal:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install -g gatsby-cli</code></pre></div>\n<p>This installs the <code class=\"language-text\">gatsby</code> CLI utility.</p>\n<p>(when a new version is out, update it by calling this command again)</p>\n<p>You create a new \"Hello World\" site by running</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby new mysite https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<p>This command creates a brand new Gatsby site in the <code class=\"language-text\">mysite</code> folder, using the <em>starter</em> available at <a href=\"https://github.com/gatsbyjs/gatsby-starter-hello-world\">https://github.com/gatsbyjs/gatsby-starter-hello-world</a>.</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/rNWB5DuHCS526rLjNuhwMdYAErq4TTAJFqg5\" alt=\"rNWB5DuHCS526rLjNuhwMdYAErq4TTAJFqg5\"></p>\n<p>A <em>starter</em> is a sample site that you can build upon. Another common starter is <code class=\"language-text\">default</code>, available at <a href=\"https://github.com/gatsbyjs/gatsby-starter-default\">https://github.com/gatsbyjs/gatsby-starter-default</a>.</p>\n<blockquote>\n<p><a href=\"https://www.gatsbyjs.org/docs/gatsby-starters/\"><em>Here you can find a list of all the starters you can use</em></a><em>.</em></p>\n</blockquote>\n<h4>Running the Gatsby site</h4>\n<p>After the terminal has finished installing the starter, you can run the website by calling</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd mysite\ngatsby develop</code></pre></div>\n<p>which will start up a new Web Server and serve the site on port 8000 on localhost.</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/tThFtYg35ax6YBnuLS9z4y92JYUhdxJZaBaj\" alt=\"tThFtYg35ax6YBnuLS9z4y92JYUhdxJZaBaj\"></p>\n<p>And here is our Hello World starter in action:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/i-aQLpALPcniL3pkUylOWeoqYCKvnzDHX8Sx\" alt=\"i-aQLpALPcniL3pkUylOWeoqYCKvnzDHX8Sx\"></p>\n<h3>Inspecting the site</h3>\n<p>If you open the site you created with your favorite code editor (I use <a href=\"https://flaviocopes.com/vscode/\">VS Code</a>), you'll find there are 3 folders:</p>\n<ul>\n<li><code class=\"language-text\">.cache</code>, a hidden folder that contains the Gatsby internals, nothing you should change right now</li>\n<li><code class=\"language-text\">public</code>, which contains the resulting website once you build it</li>\n<li><code class=\"language-text\">src</code> contains the React components, in this case just the <code class=\"language-text\">index</code> component</li>\n<li><code class=\"language-text\">static</code> which will contain the static resources like CSS and images</li>\n</ul>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/x5XH1s5uMEQdUfnZB6BM2-T9HXkDwv1xLhPd\" alt=\"x5XH1s5uMEQdUfnZB6BM2-T9HXkDwv1xLhPd\"></p>\n<p>Now, making a simple change to the default page is easy, just open <code class=\"language-text\">src/pages/index.js</code> and change \"Hello world!\" to something else, and save. The browser should instantly <strong>hot reload</strong> the component (which means the page does not actually refresh, but the content changes - a trick made possible by the underlying technology).</p>\n<p>To add a second page, just create another .js file in this folder, with the same content of <code class=\"language-text\">index.js</code> (tweak the content) and save it.</p>\n<p>For example I created a <code class=\"language-text\">second.js</code> file with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from 'react'\n\nexport default () => &lt;div>Second page!&lt;/div></code></pre></div>\n<p>and I opened the browser to <a href=\"http://localhost:8000/second\">http://localhost:8000/second</a>:</p>\n<p><img src=\"https://cdn-media-1.freecodecamp.org/images/g4uWZNxitB4AAVbqOFmCKKPugS7yrxKYH-ld\" alt=\"g4uWZNxitB4AAVbqOFmCKKPugS7yrxKYH-ld\"></p>\n<h4>Linking pages</h4>\n<p>You can link those pages by importing a Gatsby-provided React component called <code class=\"language-text\">Link</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Link } from \"gatsby\"</code></pre></div>\n<p>and using it in your component <a href=\"https://flaviocopes.com/jsx/\">JSX</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;Link to=\"/second/\">Second&amp;lt;/Link></code></pre></div>\n<h4>Adding CSS</h4>\n<p>You can import any CSS file using a JavaScript import:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import './index.css'</code></pre></div>\n<p>You can use React styling:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p style={{\n    margin: '0 auto',\n    padding: '20px'\n  }}>Hello world&lt;/p></code></pre></div>\n<h4>Using plugins</h4>\n<p>Gatsby provides lots of things out of the box, but many other functionalities are provided by <a href=\"https://www.gatsbyjs.org/plugins/\">plugins</a>.</p>\n<p>There are 3 kind of plugins:</p>\n<ul>\n<li><strong>source plugins</strong> fetch data from a source. Create nodes that can be then filtered by transformer plugins</li>\n<li><strong>transformer plugins</strong> transform the data provided by source plugins into something Gatsby can use</li>\n<li><strong>functional plugins</strong> implement some kind of functionality, like adding sitemap support or more</li>\n</ul>\n<p>Some commonly used plugins are:</p>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/\">gatsby-plugin-react-helmet</a> which allows to edit the <code class=\"language-text\">head</code> tag content</li>\n<li><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-catch-links/\">gatsby-plugin-catch-links</a> which uses the <a href=\"https://flaviocopes.com/history-api/\">History API</a> to prevent the browser reloading the page when a link is clicked, loading the new content using AJAX instead</li>\n</ul>\n<p>A Gatsby plugin is installed in 2 steps. First you install it using <code class=\"language-text\">npm</code>, then you add it to the Gatsby configuration in <code class=\"language-text\">gatsby-config.js</code>.</p>\n<p>For example you can install the Catch Links plugin:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install gatsby-plugin-catch-links</code></pre></div>\n<p>In <code class=\"language-text\">gatsby-config.js</code> (create it if you don't have it, in the website root folder), add the plugin to the <code class=\"language-text\">plugins</code> exported array:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\n  plugins: ['gatsby-plugin-catch-links']\n}</code></pre></div>\n<p>That's it, the plugin will now do its job.</p>\n<h4>Building the static website</h4>\n<p>Once you are done tweaking the site and you want to generate the production static site, you will call</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby build</code></pre></div>\n<p>At this point you can check that it all works as you expect by starting a local Web Server using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby serve</code></pre></div>\n<p>which will render the site as close as possible to how you will see it in production.</p>\n<h4>Deployment</h4>\n<p>Once you build the site using <code class=\"language-text\">gatsby build</code>, all you need to do is to deploy the result contained in the <code class=\"language-text\">public</code> folder.</p>\n<p>Depending on the solution you choose, you'll need different steps here, but generally you'll push to a Git repository and let the Git post-commit hooks do the job of deploying. <a href=\"https://www.gatsbyjs.org/docs/deploying-and-hosting/\">Here are some great guides for some popular hosting platforms</a> where you can deploy Gatsby.</p>"}