{"expireTime":9007200908525411000,"key":"transformer-remark-markdown-ast-667ddc5afdef94539f88fcd411296b97--","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"text","value":"How does serverless JavaScript work? | Service workers and Cloudflare Workers | Cloudflare","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":93,"offset":93},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":93,"offset":93},"indent":[]}},{"type":"blockquote","children":[{"type":"heading","depth":2,"children":[{"type":"text","value":"Excerpt","position":{"start":{"line":4,"column":6,"offset":100},"end":{"line":4,"column":13,"offset":107},"indent":[]}}],"position":{"start":{"line":4,"column":3,"offset":97},"end":{"line":4,"column":13,"offset":107},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Serverless JavaScript is used to build serverless architecture at the network edge. Learn what serverless JavaScript is and how it works.","position":{"start":{"line":6,"column":3,"offset":112},"end":{"line":6,"column":140,"offset":249},"indent":[]}}],"position":{"start":{"line":6,"column":3,"offset":112},"end":{"line":6,"column":140,"offset":249},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":95},"end":{"line":6,"column":140,"offset":249},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":8,"column":1,"offset":251},"end":{"line":8,"column":4,"offset":254},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is serverless JavaScript?","position":{"start":{"line":10,"column":4,"offset":259},"end":{"line":10,"column":34,"offset":289},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":256},"end":{"line":10,"column":34,"offset":289},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Serverless JavaScript is JavaScript code that comprises all or part of an application, is only run when requested, and is not hosted on proprietary servers. It enables developers to build high-performance, low-latency serverless applications (such as ","position":{"start":{"line":12,"column":1,"offset":291},"end":{"line":12,"column":252,"offset":542},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/performance/what-is-jamstack/","children":[{"type":"text","value":"JAMstack applications","position":{"start":{"line":12,"column":253,"offset":543},"end":{"line":12,"column":274,"offset":564},"indent":[]}}],"position":{"start":{"line":12,"column":252,"offset":542},"end":{"line":12,"column":342,"offset":632},"indent":[]}},{"type":"text","value":") that run on a network and avoid many issues associated with other serverless applications, such as cold starts.","position":{"start":{"line":12,"column":342,"offset":632},"end":{"line":12,"column":455,"offset":745},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":291},"end":{"line":12,"column":455,"offset":745},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/serverless/what-is-serverless/","children":[{"type":"text","value":"Serverless","position":{"start":{"line":14,"column":2,"offset":748},"end":{"line":14,"column":12,"offset":758},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":747},"end":{"line":14,"column":81,"offset":827},"indent":[]}},{"type":"text","value":" JavaScript is hosted in an edge network or by an HTTP caching service, which stores content to respond quickly to HTTP requests. Developers can write and deploy JavaScript functions that process HTTP requests before they travel all the way to the ","position":{"start":{"line":14,"column":81,"offset":827},"end":{"line":14,"column":329,"offset":1075},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/cdn/glossary/origin-server/","children":[{"type":"text","value":"origin server","position":{"start":{"line":14,"column":330,"offset":1076},"end":{"line":14,"column":343,"offset":1089},"indent":[]}}],"position":{"start":{"line":14,"column":329,"offset":1075},"end":{"line":14,"column":409,"offset":1155},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":14,"column":409,"offset":1155},"end":{"line":14,"column":410,"offset":1156},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":747},"end":{"line":14,"column":410,"offset":1156},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":"Serverless JavaScript on Edge Server","url":"https://www.cloudflare.com/img/learning/serverless/serverless-javascript/serverless-javascript-running-on-edge-server.svg","alt":"Serverless JavaScript on Edge Server","position":{"start":{"line":16,"column":1,"offset":1158},"end":{"line":16,"column":202,"offset":1359},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1158},"end":{"line":16,"column":202,"offset":1359},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Using serverless JavaScript, it is possible to expand the functionality and improve the user experience of existing applications by running code at the edge, or to create a new, fully serverless application that is fast and highly scalable. ","position":{"start":{"line":18,"column":1,"offset":1361},"end":{"line":18,"column":242,"offset":1602},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/products/cloudflare-workers/","children":[{"type":"text","value":"Cloudflare Workers","position":{"start":{"line":18,"column":243,"offset":1603},"end":{"line":18,"column":261,"offset":1621},"indent":[]}}],"position":{"start":{"line":18,"column":242,"offset":1602},"end":{"line":18,"column":319,"offset":1679},"indent":[]}},{"type":"text","value":" is a serverless JavaScript platform.","position":{"start":{"line":18,"column":319,"offset":1679},"end":{"line":18,"column":356,"offset":1716},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1361},"end":{"line":18,"column":356,"offset":1716},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is Varnish?","position":{"start":{"line":20,"column":4,"offset":1721},"end":{"line":20,"column":20,"offset":1737},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1718},"end":{"line":20,"column":20,"offset":1737},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Varnish is a web accelerator designed to speed up web applications and improve website performance. It is a caching HTTP ","position":{"start":{"line":22,"column":1,"offset":1739},"end":{"line":22,"column":122,"offset":1860},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/","children":[{"type":"text","value":"reverse proxy","position":{"start":{"line":22,"column":123,"offset":1861},"end":{"line":22,"column":136,"offset":1874},"indent":[]}}],"position":{"start":{"line":22,"column":122,"offset":1860},"end":{"line":22,"column":202,"offset":1940},"indent":[]}},{"type":"text","value":", meaning it sits in front of any web server and accelerates HTTP traffic to and from that server by caching, or storing, any content that is frequently requested by web clients. Varnish Configuration Language, or VCL, is used in conjunction with Varnish to allow developers to customize how Varnish manages web requests.","position":{"start":{"line":22,"column":202,"offset":1940},"end":{"line":22,"column":523,"offset":2261},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1739},"end":{"line":22,"column":523,"offset":2261},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is the advantage of using JavaScript instead of VCL in a serverless architecture?","position":{"start":{"line":24,"column":4,"offset":2266},"end":{"line":24,"column":90,"offset":2352},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2263},"end":{"line":24,"column":90,"offset":2352},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"VCL is a configuration language designed to make the Varnish cache easy to configure; itâ€™s not a full-fledged programming language. VCL is not flexible enough for building or expanding robust applications. It is limited in what it can do compared to JavaScript. In addition, VCL is not used outside of Varnish implementations, and as a result most developers are not familiar with it. In contrast, JavaScript is ubiquitous and already widely used for building applications. Using JavaScript in a serverless architecture allows developers to build full applications in a language they are familiar with.","position":{"start":{"line":26,"column":1,"offset":2354},"end":{"line":26,"column":603,"offset":2956},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2354},"end":{"line":26,"column":603,"offset":2956},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Serverless JavaScript allows a wider group of developers to leverage serverless computing on the edge, and allows those developers to build a greater variety of applications.","position":{"start":{"line":28,"column":1,"offset":2958},"end":{"line":28,"column":175,"offset":3132},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2958},"end":{"line":28,"column":175,"offset":3132},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"How does building an application with serverless JavaScript help reduce latency?","position":{"start":{"line":30,"column":4,"offset":3137},"end":{"line":30,"column":84,"offset":3217},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":3134},"end":{"line":30,"column":84,"offset":3217},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Serverless JavaScript runs in an HTTP caching network, which is closer to the end user than code hosted on an origin server. As a result, requests don't have to travel all the way to the origin server and back, and the application responds much more quickly to user interactions. The more geographically distributed edge locations that a caching network has, the more latency will be reduced.","position":{"start":{"line":32,"column":1,"offset":3219},"end":{"line":32,"column":393,"offset":3611},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":3219},"end":{"line":32,"column":393,"offset":3611},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"When does serverless JavaScript run?","position":{"start":{"line":34,"column":4,"offset":3616},"end":{"line":34,"column":40,"offset":3652},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":3613},"end":{"line":34,"column":40,"offset":3652},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In a serverless model, applications are broken up into functions, and function code runs in response to certain events. It does not run otherwise. The event that triggers serverless JavaScript to execute is an HTTP request. Developers can customize the kind of HTTP requests that their JavaScript functions respond to, and how the HTTP request will be altered or fulfilled.","position":{"start":{"line":36,"column":1,"offset":3654},"end":{"line":36,"column":374,"offset":4027},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":3654},"end":{"line":36,"column":374,"offset":4027},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is an HTTP request?","position":{"start":{"line":38,"column":4,"offset":4032},"end":{"line":38,"column":28,"offset":4056},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":4029},"end":{"line":38,"column":28,"offset":4056},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is a request sent via ","position":{"start":{"line":40,"column":1,"offset":4058},"end":{"line":40,"column":28,"offset":4085},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/","children":[{"type":"text","value":"HTTP (hypertext transfer protocol)","position":{"start":{"line":40,"column":29,"offset":4086},"end":{"line":40,"column":63,"offset":4120},"indent":[]}}],"position":{"start":{"line":40,"column":28,"offset":4085},"end":{"line":40,"column":149,"offset":4206},"indent":[]}},{"type":"text","value":" from a client to a server. Browsers translate user actions, such as clicking on a hyperlink or submitting a form, into HTTP requests. The request is then sent on to the server, and the server sends an HTTP response to fulfill the request. An HTTP request also occurs when an application makes an API call.","position":{"start":{"line":40,"column":149,"offset":4206},"end":{"line":40,"column":455,"offset":4512},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":4058},"end":{"line":40,"column":455,"offset":4512},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is HTTP caching?","position":{"start":{"line":42,"column":4,"offset":4517},"end":{"line":42,"column":25,"offset":4538},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":4514},"end":{"line":42,"column":25,"offset":4538},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"HTTP caching is when a server or a browser saves a copy of a response to a user's HTTP request in order to produce quicker replies to future requests. A ","position":{"start":{"line":44,"column":1,"offset":4540},"end":{"line":44,"column":154,"offset":4693},"indent":[]}},{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/cdn/what-is-a-cdn/","children":[{"type":"text","value":"CDN","position":{"start":{"line":44,"column":155,"offset":4694},"end":{"line":44,"column":158,"offset":4697},"indent":[]}}],"position":{"start":{"line":44,"column":154,"offset":4693},"end":{"line":44,"column":215,"offset":4754},"indent":[]}},{"type":"text","value":" server is an example of an HTTP cache. Some HTTP caching services enable developers to customize how HTTP caching works for their applications.","position":{"start":{"line":44,"column":215,"offset":4754},"end":{"line":44,"column":359,"offset":4898},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":4540},"end":{"line":44,"column":359,"offset":4898},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare is an HTTP caching edge network with data centers all over the world, and it allows developers to write and deploy their own JavaScript at the network edge. In the Cloudflare network, HTTP caching does not take place in any specific server, but rather within whatever data center is closest to the source of the HTTP request.","position":{"start":{"line":46,"column":1,"offset":4900},"end":{"line":46,"column":337,"offset":5236},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":4900},"end":{"line":46,"column":337,"offset":5236},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What are service workers?","position":{"start":{"line":48,"column":4,"offset":5241},"end":{"line":48,"column":29,"offset":5266},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":5238},"end":{"line":48,"column":29,"offset":5266},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Service workers are scripts that browsers download and run in order to create customized experiences for users. Service workers make features like push notifications, background syncing, and offline functionality possible in the browser. Written in JavaScript, they intercept, modify, and respond to HTTP requests before the requests reach the Internet.","position":{"start":{"line":50,"column":1,"offset":5268},"end":{"line":50,"column":354,"offset":5621},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":5268},"end":{"line":50,"column":354,"offset":5621},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Two ways service workers can handle HTTP traffic:","position":{"start":{"line":52,"column":4,"offset":5626},"end":{"line":52,"column":53,"offset":5675},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":5623},"end":{"line":52,"column":53,"offset":5675},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":"Service Worker Responds","url":"https://www.cloudflare.com/img/learning/serverless/serverless-javascript/service-worker-responds-http-request.svg","alt":"Service Worker Responds","position":{"start":{"line":54,"column":1,"offset":5677},"end":{"line":54,"column":168,"offset":5844},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":5677},"end":{"line":54,"column":168,"offset":5844},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Service workers can respond to HTTP requests without contacting the web server","position":{"start":{"line":56,"column":1,"offset":5846},"end":{"line":56,"column":79,"offset":5924},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":5846},"end":{"line":56,"column":79,"offset":5924},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":"Service Worker Modifies Request","url":"https://www.cloudflare.com/img/learning/serverless/serverless-javascript/service-worker-modifies-http-request-response.svg","alt":"Service Worker Modifies Request","position":{"start":{"line":58,"column":1,"offset":5926},"end":{"line":58,"column":193,"offset":6118},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":5926},"end":{"line":58,"column":193,"offset":6118},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Service workers can modify HTTP requests and responses","position":{"start":{"line":60,"column":1,"offset":6120},"end":{"line":60,"column":55,"offset":6174},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":6120},"end":{"line":60,"column":55,"offset":6174},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What are Cloudflare Workers?","position":{"start":{"line":62,"column":4,"offset":6179},"end":{"line":62,"column":32,"offset":6207},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":6176},"end":{"line":62,"column":32,"offset":6207},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Cloudflare Workers are a platform for enabling serverless functions to run as close as possible to the end user. In essence, the serverless code itself is 'cached' on the network, and runs when it receives the right type of request. Cloudflare Workers are written in JavaScript against the service workers API, meaning they can use all the functionality offered by service workers. They leverage the Chrome V8 engine for execution. Cloudflare Workers code is hosted in Cloudflare's vast network of data centers around the world.","position":{"start":{"line":64,"column":1,"offset":6209},"end":{"line":64,"column":529,"offset":6737},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":6209},"end":{"line":64,"column":529,"offset":6737},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"What is Chrome V8?","position":{"start":{"line":66,"column":4,"offset":6742},"end":{"line":66,"column":22,"offset":6760},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":6739},"end":{"line":66,"column":22,"offset":6760},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.cloudflare.com/learning/serverless/glossary/what-is-chrome-v8/","children":[{"type":"text","value":"Chrome V8","position":{"start":{"line":68,"column":2,"offset":6763},"end":{"line":68,"column":11,"offset":6772},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":6762},"end":{"line":68,"column":88,"offset":6849},"indent":[]}},{"type":"text","value":", also known as just 'V8,' is a JavaScript engine Google developed for compiling, optimizing, and executing JavaScript. By using V8 for JavaScript code execution, startup time for JavaScript workers is greatly reduced, eliminating the issue of 'cold starts' in most cases. V8 is also heavily analyzed for security vulnerabilities, making it ideal for running JavaScript code securely.","position":{"start":{"line":68,"column":88,"offset":6849},"end":{"line":68,"column":472,"offset":7233},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":6762},"end":{"line":68,"column":472,"offset":7233},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":69,"column":1,"offset":7234}}}}