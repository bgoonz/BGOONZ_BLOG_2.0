{"expireTime":9007200911206577000,"key":"transformer-remark-markdown-ast-5ec2b0594a114992a9a6d64c56979efd-gatsby-remark-prismjs-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"The easiest way to write to files in Node.js is to use the ","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":60,"offset":61},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">fs.writeFile()</code>","position":{"start":{"line":3,"column":60,"offset":61},"end":{"line":3,"column":76,"offset":77},"indent":[]}},{"type":"text","value":" API.","position":{"start":{"line":3,"column":76,"offset":77},"end":{"line":3,"column":81,"offset":82},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":81,"offset":82},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Example:","position":{"start":{"line":5,"column":1,"offset":84},"end":{"line":5,"column":9,"offset":92},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":84},"end":{"line":5,"column":9,"offset":92},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//file written successfully</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":7,"column":1,"offset":94},"end":{"line":20,"column":4,"offset":324},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Alternatively, you can use the synchronous version ","position":{"start":{"line":22,"column":1,"offset":326},"end":{"line":22,"column":52,"offset":377},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">fs.writeFileSync()</code>","position":{"start":{"line":22,"column":52,"offset":377},"end":{"line":22,"column":72,"offset":397},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":22,"column":72,"offset":397},"end":{"line":22,"column":73,"offset":398},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":326},"end":{"line":22,"column":73,"offset":398},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//file written successfully</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":24,"column":1,"offset":400},"end":{"line":36,"column":4,"offset":620},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"By default, this API will ","position":{"start":{"line":38,"column":1,"offset":622},"end":{"line":38,"column":27,"offset":648},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"replace the contents of the file","position":{"start":{"line":38,"column":29,"offset":650},"end":{"line":38,"column":61,"offset":682},"indent":[]}}],"position":{"start":{"line":38,"column":27,"offset":648},"end":{"line":38,"column":63,"offset":684},"indent":[]}},{"type":"text","value":" if it does already exist.","position":{"start":{"line":38,"column":63,"offset":684},"end":{"line":38,"column":89,"offset":710},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":622},"end":{"line":38,"column":89,"offset":710},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can modify the default by specifying a flag:","position":{"start":{"line":40,"column":1,"offset":712},"end":{"line":40,"column":49,"offset":760},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":712},"end":{"line":40,"column":49,"offset":760},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/Users/joe/test.txt'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">flag</span><span class=\"token operator\">:</span> <span class=\"token string\">'a+'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":42,"column":1,"offset":762},"end":{"line":45,"column":4,"offset":849},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The flags you'll likely use are","position":{"start":{"line":47,"column":1,"offset":851},"end":{"line":47,"column":32,"offset":882},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":851},"end":{"line":47,"column":32,"offset":882},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">r+</code>","position":{"start":{"line":49,"column":3,"offset":886},"end":{"line":49,"column":7,"offset":890},"indent":[]}},{"type":"text","value":" open the file for reading and writing","position":{"start":{"line":49,"column":7,"offset":890},"end":{"line":49,"column":45,"offset":928},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":886},"end":{"line":49,"column":45,"offset":928},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":884},"end":{"line":49,"column":45,"offset":928},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">w+</code>","position":{"start":{"line":50,"column":3,"offset":931},"end":{"line":50,"column":7,"offset":935},"indent":[]}},{"type":"text","value":" open the file for reading and writing, positioning the stream at the beginning of the file. The file is created if not existing","position":{"start":{"line":50,"column":7,"offset":935},"end":{"line":50,"column":135,"offset":1063},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":931},"end":{"line":50,"column":135,"offset":1063},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":929},"end":{"line":50,"column":135,"offset":1063},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">a</code>","position":{"start":{"line":51,"column":3,"offset":1066},"end":{"line":51,"column":6,"offset":1069},"indent":[]}},{"type":"text","value":" open the file for writing, positioning the stream at the end of the file. The file is created if not existing","position":{"start":{"line":51,"column":6,"offset":1069},"end":{"line":51,"column":116,"offset":1179},"indent":[]}}],"position":{"start":{"line":51,"column":3,"offset":1066},"end":{"line":51,"column":116,"offset":1179},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1064},"end":{"line":51,"column":116,"offset":1179},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">a+</code>","position":{"start":{"line":52,"column":3,"offset":1182},"end":{"line":52,"column":7,"offset":1186},"indent":[]}},{"type":"text","value":" open the file for reading and writing, positioning the stream at the end of the file. The file is created if not existing","position":{"start":{"line":52,"column":7,"offset":1186},"end":{"line":52,"column":129,"offset":1308},"indent":[]}}],"position":{"start":{"line":52,"column":3,"offset":1182},"end":{"line":52,"column":129,"offset":1308},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1180},"end":{"line":52,"column":129,"offset":1308},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":884},"end":{"line":52,"column":129,"offset":1308},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"(you can find more flags at ","position":{"start":{"line":54,"column":1,"offset":1310},"end":{"line":54,"column":29,"offset":1338},"indent":[]}},{"type":"link","title":null,"url":"https://nodejs.org/api/fs.html#fs_file_system_flags","children":[{"type":"text","value":"https://nodejs.org/api/fs.html#fs_file_system_flags","position":{"start":{"line":54,"column":30,"offset":1339},"end":{"line":54,"column":81,"offset":1390},"indent":[]}}],"position":{"start":{"line":54,"column":29,"offset":1338},"end":{"line":54,"column":82,"offset":1391},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":54,"column":82,"offset":1391},"end":{"line":54,"column":83,"offset":1392},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":1310},"end":{"line":54,"column":83,"offset":1392},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Append to a file","position":{"start":{"line":56,"column":4,"offset":1397},"end":{"line":56,"column":20,"offset":1413},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":1394},"end":{"line":56,"column":20,"offset":1413},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A handy method to append content to the end of a file is ","position":{"start":{"line":58,"column":1,"offset":1415},"end":{"line":58,"column":58,"offset":1472},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">fs.appendFile()</code>","position":{"start":{"line":58,"column":58,"offset":1472},"end":{"line":58,"column":75,"offset":1489},"indent":[]}},{"type":"text","value":" (and its ","position":{"start":{"line":58,"column":75,"offset":1489},"end":{"line":58,"column":85,"offset":1499},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">fs.appendFileSync()</code>","position":{"start":{"line":58,"column":85,"offset":1499},"end":{"line":58,"column":106,"offset":1520},"indent":[]}},{"type":"text","value":" counterpart):","position":{"start":{"line":58,"column":106,"offset":1520},"end":{"line":58,"column":120,"offset":1534},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1415},"end":{"line":58,"column":120,"offset":1534},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token string\">'Some content!'</span><span class=\"token punctuation\">;</span>\n\nfs<span class=\"token punctuation\">.</span><span class=\"token function\">appendFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file.log'</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//done!</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":60,"column":1,"offset":1536},"end":{"line":71,"column":4,"offset":1709},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Using streams","position":{"start":{"line":73,"column":4,"offset":1714},"end":{"line":73,"column":17,"offset":1727},"indent":[]}}],"position":{"start":{"line":73,"column":1,"offset":1711},"end":{"line":73,"column":17,"offset":1727},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All those methods write the full content to the file before returning the control back to your program (in the async version, this means executing the callback)","position":{"start":{"line":75,"column":1,"offset":1729},"end":{"line":75,"column":161,"offset":1889},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":1729},"end":{"line":75,"column":161,"offset":1889},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this case, a better option is to write the file content using streams.","position":{"start":{"line":77,"column":1,"offset":1891},"end":{"line":77,"column":74,"offset":1964},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":1891},"end":{"line":77,"column":74,"offset":1964},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"72","position":{"start":{"line":79,"column":1,"offset":1966},"end":{"line":79,"column":3,"offset":1968},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":1966},"end":{"line":79,"column":3,"offset":1968},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://stackoverflow.com/posts/11194896/timeline","children":[],"position":{"start":{"line":81,"column":1,"offset":1970},"end":{"line":81,"column":54,"offset":2023},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":1970},"end":{"line":81,"column":54,"offset":2023},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here's a sketch. Error handling is left as an exercise for the reader.","position":{"start":{"line":83,"column":1,"offset":2025},"end":{"line":83,"column":71,"offset":2095},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2025},"end":{"line":83,"column":71,"offset":2095},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//</span>\n<span class=\"token keyword\">let</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">dirTree</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> stats <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">lstatSync</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        info <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> filename<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stats<span class=\"token punctuation\">.</span><span class=\"token function\">isDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        info<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'folder'</span><span class=\"token punctuation\">;</span>\n        info<span class=\"token punctuation\">.</span>children <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">dirTree</span><span class=\"token punctuation\">(</span>filename <span class=\"token operator\">+</span> <span class=\"token string\">'/'</span> <span class=\"token operator\">+</span> child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Assuming it's a file. In real life it could be a symlink or</span>\n        <span class=\"token comment\">// something else!</span>\n        info<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'file'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> info<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">.</span>parent <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// node dirTree.js ~/foo/bar</span>\n    <span class=\"token keyword\">let</span> util <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'util'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>util<span class=\"token punctuation\">.</span><span class=\"token function\">inspect</span><span class=\"token punctuation\">(</span><span class=\"token function\">dirTree</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":85,"column":1,"offset":2097},"end":{"line":116,"column":4,"offset":2864},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":117,"column":1,"offset":2865}}}}