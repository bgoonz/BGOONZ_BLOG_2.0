{
  "version": 3,
  "sources": ["../../workspace/BGOONZ_BLOG_2.0/functions/greet.ts", "../../workspace/BGOONZ_BLOG_2.0/node_modules/@cloudflare/pages-plugin-cloudflare-access/api/index.ts"],
  "sourceRoot": "/tmp/tmp-3101-mKud38EBR3Xq",
  "sourcesContent": ["import { getIdentity } from \"@cloudflare/pages-plugin-cloudflare-access/api\";\n\nexport const onRequest: PagesFunction = async ({ data }) => {\n  const identity = await getIdentity({\n    jwt: \"eyJhbGciOiJIUzI1NiIsImtpZCI6IjkzMzhhYmUxYmFmMmZlNDkyZjY0NmE3MzZmMjVhZmJmN2IwMjVlMzVjNjI3YmU0ZjYwYzQxNGQ0YzczMDY5YjgiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOlsiOTdlMmFhZTEyMDEyMWY5MDJkZjhiYzk5ZmMzNDU5MTNhYjE4NmQxNzRmMzA3OWVhNzI5MjM2NzY2YjJlN2M0YSJdLCJlbWFpbCI6ImFkbWluQGV4YW1wbGUuY29tIiwiZXhwIjoxNTE5NDE4MjE0LCJpYXQiOjE1MTkzMzE4MTUsImlzcyI6Imh0dHBzOi8vdGVzdC5jbG91ZGZsYXJlYWNjZXNzLmNvbSIsIm5vbmNlIjoiMWQ4MDgzZjcwOGE0Nzk4MjI5NmYyZDk4OTZkNzBmMjA3YTI3OTM4ZjAyNjU0MGMzOTJiOTAzZTVmZGY0ZDZlOSIsInN1YiI6ImNhNjM5YmI5LTI2YWItNDJlNS1iOWJmLTNhZWEyN2IzMzFmZCJ9.05vGt-_0Mw6WEFJF3jpaqkNb88PUMplsjzlEUvCEfnQ\",\n    domain: \"https://test.cloudflareaccess.com\",\n  });\n\n  return new Response(`Hello, ${identity.name || \"service user\"}!`);\n};", "import { Identity } from \"..\";\n\nexport const getIdentity = async ({\n  jwt,\n  domain,\n}: {\n  jwt: string;\n  domain: string;\n}): Promise<undefined | Identity> => {\n  const identityURL = new URL(\"/cdn-cgi/access/get-identity\", domain);\n  const response = await fetch(identityURL.toString(), {\n    headers: { Cookie: `CF_Authorization=${jwt}` },\n  });\n  if (response.ok) return await response.json();\n};\n\nexport const generateLoginURL = ({\n  redirectURL: redirectURLInit,\n  domain,\n  aud,\n}: {\n  redirectURL: string | URL;\n  domain: string;\n  aud: string;\n}): string => {\n  const redirectURL =\n    typeof redirectURLInit === \"string\"\n      ? new URL(redirectURLInit)\n      : redirectURLInit;\n  const { hostname } = redirectURL;\n  const loginPathname = `/cdn-cgi/access/login/${hostname}?`;\n  const searchParams = new URLSearchParams({\n    kid: aud,\n    redirect_url: redirectURL.pathname + redirectURL.search,\n  });\n  return new URL(loginPathname + searchParams.toString(), domain).toString();\n};\n\nexport const generateLogoutURL = ({ domain }: { domain: string }) =>\n  new URL(`/cdn-cgi/access/logout`, domain).toString();\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;;ACEO,IAAM,cAAc,OAAO;AAAA,EAChC;AAAA,EACA;AAAA,MAImC;AACnC,QAAM,cAAc,IAAI,IAAI,gCAAgC,MAAM;AAClE,QAAM,WAAW,MAAM,MAAM,YAAY,SAAS,GAAG;AAAA,IACnD,SAAS,EAAE,QAAQ,oBAAoB,MAAM;AAAA,EAC/C,CAAC;AACD,MAAI,SAAS;AAAI,WAAO,MAAM,SAAS,KAAK;AAC9C;;;ADZO,IAAM,YAA2B,OAAO,EAAE,WAAW;AAC1D,QAAM,WAAW,MAAM,YAAY;AAAA,IACjC,KAAK;AAAA,IACL,QAAQ;AAAA,EACV,CAAC;AAED,SAAO,IAAI,SAAS,UAAU,SAAS,QAAQ,iBAAiB;AAClE;",
  "names": []
}
